!function(C,S,V){"use strict";var O="ht",q=C[O],g=q.Default,u=q.graph,G=g.getInternal(),Y=G.ui(),B=Y.NodeUI.prototype,R=Y.ShapeUI.prototype,w=u.GraphView,_=w.prototype,U=Y.EdgeUI.prototype,n=q.Node,j=q.Shape,i=q.Edge,N=q.Group,a=g.isTouchable,v=g.preventDefault,I=C.setTimeout,x=g.grow,T=g.isDragging,H=g.getDistance,y=null,D=q.List,m="undefined"!=typeof Float32Array?Float32Array:Array,l=Math,F=l.PI,K="Crossing",M="No Crossing",A=F/2,Z=2*F,P=l.atan2,z=l.sqrt,e=l.pow,J=l.sin,f=l.cos,p=l.min,c=l.max,o=l.abs,t=l.ceil,d=l.round,h=g.unionPoint,Q=g.unionRect,b=g.containsPoint,s=g.clone,E="rgb(52, 152, 219)",r="red",X={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},L={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var s=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],h=0;h<s.length;h++){var f=s[h];f=0===h%2?f/400*L.width:f/100*L.height,s[h]=f}return L.width>120&&(s[4]=L.width-26,s[6]=L.width-40,s[10]=L.width-40,s[12]=L.width-26,s[18]=33),s}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},$={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:E,rotation:.61},{type:"circle",rect:[200,120,70,70],background:E,rotation:.61},{type:"circle",rect:[200,220,70,70],background:E,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:E},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:E}]},W={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:r,rotation:.61}]},k={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:E},{type:"circle",rect:[0,210,90,90],background:E},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:E}]},El={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:r},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:r}]},qc={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:E}]},Ep={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:r}]},on={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},lg={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},Ih=function(m){var B=m.touches[0];return B?B:m.changedTouches[0]},Lj=function(z,C,O,q){return P(q-C,O-z)},Em=function(q,J){return{x:q.x*J,y:q.y*J}},gi=function(e,g){e.each(function(w){return e.isSelected(w)?g(w):void 0})},po=function(h,w){h.reverseEach(function(L){return h.isSelected(L)?w(L):void 0})},ed=function(y,Z,G){var T,N,S,P,o,c=this,J=Z,F=c.gv;if(y instanceof j){S=y.getSegments();var L=F.getDataUI(y);o=L._55O.$15l,S&&S.size()||(S=co(o)),y.isClosePath()&&S.indexOf(5)<0&&(S=new D(S._as),S.add(5)),T=Ec(y,L,J),N=o[T]}else{var x=F.getDataUI(y);o=Ol(x,y.s("edge.points")),S=y.s("edge.segments"),S&&S.size()||(S=co(o)),o=o._as,T=Ec(y,x,J),N=o[T]}if(S&&(P=S.get(J)),2===P||1===P||5===P){var u=o[T+1];5===P&&(u=o[0]);var t=qh(N,G,u);return t}return G},Be=function(x,$,l,T){var P=$/2,p=l/2,Y=Dm(x,-P,-p,T),e=Dm(x,P,-p,T),I=Dm(x,-P,p,T),C=Dm(x,P,p,T),Z=Dm(x,0,-p,T),c=Dm(x,P,0,T),f=Dm(x,0,p,T),q=Dm(x,-P,0,T);return[Y,e,I,C,Z,c,f,q]},qh=function(l,U,$){var h={x:U.x-l.x,y:U.y-l.y},Q={x:$.x-l.x,y:$.y-l.y},O=z(e($.x-l.x,2)+e($.y-l.y,2)),J={x:Q.x/O,y:Q.y/O},D=h.x*J.x+h.y*J.y,X={x:J.x*D,y:J.y*D};return{x:l.x+X.x,y:l.y+X.y}},Dm=function(H,k,F,G){var Y=f(G)*k-J(G)*F,K=J(G)*k+f(G)*F;return H?{x:H.x+Y,y:H.y+K}:{x:Y,y:K}},dr=function(y,w){return w>2*y?y:w/2},ke=function(B,x,a,c){var P=H(B,x);return a=c?p(a,P):dr(a,P),P?a/=P:a=0,{x:B.x+(x.x-B.x)*a,y:B.y+(x.y-B.y)*a}},tn=function(Q,P){var r,C,j=Q.gv,B=Q._data,w=B._40I,f=B._41I,U=B.s("edge.offset"),A=B.s("edge.source.position"),l=B.s("edge.target.position"),M=B.s("edge.source.offset.x"),J=B.s("edge.source.offset.y"),v=B.s("edge.target.offset.x"),g=B.s("edge.target.offset.y"),V=B.s("edge.source.anchor.x"),F=B.s("edge.source.anchor.y"),E=B.s("edge.target.anchor.x"),Z=B.s("edge.target.anchor.y");if(P?(r=G.getEdgeAgentPosition(j,w,A,M,J,V,F),C=G.getEdgeAgentPosition(j,f,l,v,g,E,Z)):(r=G.getEdgeAgentPosition(j,w,A,0,0,V,F),C=G.getEdgeAgentPosition(j,f,l,0,0,E,Z)),"points"===B.s("edge.type")&&U&&!B.s("edge.center")&&r){var e=B.s("edge.points")||new D,I=e.size(),R=ke(r,I?e.get(0):C,U,I),k=ke(C,I?e.get(I-1):r,U,I);r=R,C=k}return[r,C]},Ol=function(T,M,c){var S=T._78o,m=T._data,g=m.s("edge.type"),W=[S.sourcePoint,S.targetPoint];return"points"===g?c&&(W=tn(T)):W=S.center?g?c?tn(T):tn(T,!0):c?tn(T):[S.c1,S.c2]:c?tn(T):tn(T,!0),M=new D(M?M._as:y),M.add(W[0],0),M.add(W[1]),M},Vo=function(M){return M=new D(M._as),M.removeAt(0),M.removeAt(M.size()-1),M},co=function(U){U._as||(U=new D(U));var z=new D;z.add(1);for(var w=1;w<U.size();w++)z.add(2);return z},Qo=function(y,E){return{x:(y.x+E.x)/2,y:(y.y+E.y)/2}},Il=function(e,L){return{x:e.x+1*(L.x-e.x)/4,y:e.y+1*(L.y-e.y)/4}},xd=function(s,Z){return{x:s.x+3*(Z.x-s.x)/4,y:s.y+3*(Z.y-s.y)/4}},Cg=function(x,a,S,o){var n=a.x+a.width/2,l=a.y+a.height/2,T=z(n*n+l*l),$=P(l,n)+S;return{x:o.x+T*f($),y:o.y+T*J($)}},wr=_.validateImpl,mr=_.isRectEditable,kq=_.isPointEditable,pk=_._42,Yq=R._79o,os=U._79o,gp=R._48O,En=R._47O,hc=B._48O,Vm=B._80o,Qq=R._80o,sk=B.getSelectWidth,Rn=B._47O,rl=U._47O,kr=_.isEditable,qo=["northwest","north","northeast","east","southeast","south","southwest","west"],up=function(M,T,g,w,u,R,B,f,t,F){var v=M.x,Y=M.y,c=M.width,_=M.height,E={x:v+c/2,y:Y+_/2};w=w||0,T=Dm(E,T.x-E.x,T.y-E.y,-w),B&&!f&&(T.x+=t,T.y+=F);var A=.01;if("northwest"===g?(T.x+u>v+c-A&&(T.x=v+c-u-A),T.y+u>Y+_-A&&(T.y=Y+_-u-A),M=h(T,{x:v+c,y:Y+_})):"north"===g?(T.y+u>Y+_-A&&(T.y=Y+_-u-A),M=h({x:v,y:T.y},{x:v+c,y:Y+_})):"northeast"===g?(T.x<v+u+A&&(T.x=v+u+A),T.y+u>Y+_-A&&(T.y=Y+_-u-A),M=h({x:v,y:T.y},{x:T.x,y:Y+_})):"west"===g?(T.x+u>v+c-A&&(T.x=v+c-u-A),M=h({x:T.x,y:Y},{x:v+c,y:Y+_})):"east"===g?(T.x<v+u+A&&(T.x=v+u+A),M=h({x:v,y:Y},{x:T.x,y:Y+_})):"southwest"===g?(T.x+u>v+c-A&&(T.x=v+c-u-A),T.y<Y+u+A&&(T.y=Y+u+A),M=h({x:T.x,y:Y},{x:v+c,y:T.y})):"south"===g?(T.y<Y+u+A&&(T.y=Y+u+A),M=h({x:v,y:Y},{x:v+c,y:T.y})):"southeast"===g&&(T.x<v+u+A&&(T.x=v+u+A),T.y<Y+u+A&&(T.y=Y+u+A),M=h({x:v,y:Y},T)),"keepRatio"===R&&(!B&&f||B&&!f)&&("northeast"===g||"southeast"===g||"northwest"===g||"southwest"===g)){var C=M.width,D=M.height,l=C/c,a=D/_,z=p(l,a);M.width=c*z,M.height=_*z,"northeast"===g?M.y=Y+(_-M.height):"northwest"===g?(M.y=Y+(_-M.height),M.x=v+(c-M.width)):"southwest"===g&&(M.x=v+(c-M.width))}M.x-=E.x,M.y-=E.y;var K=Cg(y,M,w,E);return M.x=K.x-M.width/2,M.y=K.y-M.height/2,M},Zg=function(C,H,Q,U){var N=C.getRotation(),i=H,e=i.x,P=i.y,y=i.width,x=i.height,T={x:e+i.width/2,y:P+i.height/2};U=Dm(T,U.x-T.x,U.y-T.y,-N),"northwest"===Q?i=h(U,{x:e+y,y:P+x}):"north"===Q?i=h({x:e,y:U.y},{x:e+y,y:P+x}):"northeast"===Q?i=h({x:e,y:U.y},{x:U.x,y:P+x}):"west"===Q?i=h({x:U.x,y:P},{x:e+y,y:P+x}):"east"===Q?i=h({x:e,y:P},{x:U.x,y:P+x}):"southwest"===Q?i=h({x:U.x,y:P},{x:e+y,y:U.y}):"south"===Q?i=h({x:e,y:P},{x:e+y,y:U.y}):"southeast"===Q&&(i=h({x:e,y:P},U)),C.setRect(i),i.x-=T.x,i.y-=T.y;var c=Cg(C,i,N,T);C.p(c.x,c.y)},zn=function(M,Z,K,C,O,G,I,g){var m=y;G?(m=Dm(y,O.x-Z.x,O.y-Z.y,-K),m.x-=I.x,m.y-=I.y):m=Dm(y,O.x-Z.x,O.y-Z.y,0);var e={x:Z.x+m.x,y:Z.y+m.y};g&&(e=g(e.x,e.y)),e.e=M.getPoints().get(C).e,M.setPoint(C,e);var T=M.getWidth(),P=M.getHeight(),$=M.p().x-T/2,u=M.p().y-P/2;$-=Z.x,u-=Z.y;var N=Cg(M,{x:$,y:u,width:T,height:P},K,Z);M.p(N.x,N.y)},Ec=function(p,X,$){var b,N;if(p instanceof j?(b=p.getPoints(),N=p.getSegments()):p instanceof i&&"points"===p.s("edge.type")&&(b=p.s("edge.points"),N=p.s("edge.segments"),b=Ol(X,b)),N&&N.size()||(N=co(b)),p instanceof j&&p.isClosePath()&&N.indexOf(5)<0&&(N=new D(N._as),N.add(5)),N)for(var J=-1,k=0;k<N.size();k++){if(k===$)return J;var P=N.get(k);1===P?J+=1:2===P?J+=1:3===P?J+=2:4===P&&(J+=3)}},Hb=function(h,G,C){var L,Z;if(h instanceof j?(L=h.getPoints(),Z=h.getSegments()):h instanceof i&&"points"===h.s("edge.type")&&(L=h.s("edge.points"),Z=h.s("edge.segments"),L=Ol(G,L)),Z&&Z.size()||(Z=co(L)),Z)for(var w=-1,e=0;e<Z.size();e++){var K=Z.get(e);if(1===K?w+=1:2===K?w+=1:3===K?w+=2:4===K&&(w+=3),w===C)return e}},Sg=function(O,U){var R=[O[0]-U[0],O[1]-U[1],O[2]-U[2]];return R},Rf=function(){var M=new m(16);return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M},Bj=function(S,o){var B=S[0],P=S[1],l=S[2];return S[0]=o[0]*B+o[4]*P+o[8]*l+o[12],S[1]=o[1]*B+o[5]*P+o[9]*l+o[13],S[2]=o[2]*B+o[6]*P+o[10]*l+o[14],S},Um=function(R,r){if(r){var j=J(r),n=f(r),G=R[0],x=R[1],h=R[2],w=R[3],K=R[8],V=R[9],Y=R[10],m=R[11];R[0]=G*n-K*j,R[1]=x*n-V*j,R[2]=h*n-Y*j,R[3]=w*n-m*j,R[8]=G*j+K*n,R[9]=x*j+V*n,R[10]=h*j+Y*n,R[11]=w*j+m*n}},rq=function(W,i){for(var D=W.s("grid.row.count"),j=W.s("grid.column.count"),B=0;D>B;B++)for(var F=0;j>F;F++){var e=W.getCellRect(B,F);if(b(e,i))return{rowIndex:B,columnIndex:F,rect:e,grid:W}}return null},Vh=function(v,K,n,R,Z,E){var f={},H=n-v,O=R-K,s=l.sqrt(H*H+O*O),Q=H/s,M=O/s,c=(-v+Z)*Q+(-K+E)*M;return 0>=c?(f.x=v,f.y=K):c>=s?(f.x=n,f.y=R):(f.x=v+c*Q,f.y=K+c*M),H=Z-f.x,O=E-f.y,f.z=l.sqrt(H*H+O*O),f},Op=function(J,I){var o,R,j,l,F,B,x,K,q=J.getPoints(),m=J.getSegments(),p=J.p(),d=J.getRotation();if(!m||!(m.indexOf(3)>0||m.indexOf(4)>0)){for(K=0;K<=q.size()-1;K++)if(K===q.size()-1?(F=q.get(0),l=q.get(K)):(l=q.get(K),F=q.get(K+1)),l=Dm(p,l.x-p.x,l.y-p.y,d),F=Dm(p,F.x-p.x,F.y-p.y,d),B=Vh(l.x,l.y,F.x,F.y,I.x,I.y),x=B.z,x<(J.s("shape.border.width")||10)){R=l,j=F,o=K;break}if(o!=y){var c=Vh(R.x,R.y,j.x,j.y,I.x,I.y),$=H(R,c);return{attachIndex:o,attachOffset:$}}}},ps=function($){for(var s=$._data,j=s.p(),M=s.getRotation(),V=s.getPoints(),L=y,J=[],Z=0;Z<V.size();Z++)L=V.get(Z),J.push(Dm(j,L.x-j.x,L.y-j.y,M));$._55O.$15l=J};g.setImage("xeditinteractor_parentIcon",$),g.setImage("xeditinteractor_hostIcon",W),g.setImage("xeditinteractor_edgeIcon",k),g.setImage("xeditinteractor_removeIcon",El),g.setImage("xeditinteractor_sourceIcon",qc),g.setImage("xeditinteractor_targetIcon",Ep),g.setImage("xeditinteractor_elevationIcon",on),g.setImage("xeditinteractor_tallIcon",lg),_._editPointSize=a?24:9,_._edgeHelpers=["parent","remove","source","target"],_._leftTopHelpers=["parent"],_._rightTopHelpers=["host"],_._leftBottomHelpers=["edge"],_._rightBottomHelpers=["remove"],qo=qo.concat(qo).concat(qo),U._79o=function(){var M=this,Z=M.gv,i=Z.getZoom(),K=Z._editInteractor,T=os.call(M);if(!T)return null;var S=tn(M,!0),U=S[0],E=S[1],C={x:T.x,y:T.y,width:T.width,height:T.height},a=h(U,E);if(K instanceof u.XEditInteractor){C=Q(C,a);var o=M._55O,W=Z.getEditPointSize()/i+2,R=0;o&&o._43O&&(R+=W/2,x(C,R))}return C},U._47O=function(Y){var e=this,$=e.gv,W=$._editInteractor;W instanceof u.XEditInteractor||rl.call(e,Y)},U.rectIntersects=function(v){var g=this,D=g._data,o=g.gv,P=o.getZoom(),I=g._55O,f=o._editInteractor;if(f instanceof u.XEditInteractor&&o.isEditable(D)&&I&&I._43O&&"points"===D.s("edge.type")){var Q=D.s("edge.points"),Y=D.s("edge.segments");Q=Ol(g,Q),Y&&Y.size()||(Y=co(Q)),Q=Q._as;var d=!1,e=a?5:1,J=v.x+e,F=v.y+e,k={x:J,y:F};if(f._edge===D&&f._hoverSegmentIndex>=0){var A=o._editInteractor._hoverSegmentIndex,G=Y.get(A),i=Ec(D,g,A),Z=y;if(i!=y&&i>=0){var n=Q[i],t=o.getSegmentHoverWidth()/P;if(2===G||1===G){var H=Q[i+1];Z=Or(new qr(n.x,n.y),new qr(H.x,H.y),new qr(k.x-t,k.y-t),new qr(k.x+2*t,k.y+2*t)),Z.$62l===K&&(d=!0)}else if(3===G){var X=Q[i+1],H=Q[i+2];Z=gh(new qr(n.x,n.y),new qr(X.x,X.y),new qr(H.x,H.y),new qr(k.x-t,k.y-t),new qr(k.x+2*t,k.y+2*t)),Z.$62l===K&&(d=!0)}else if(4===G){var C=Q[i+1],b=Q[i+2];H=Q[i+3],Z=so(new qr(n.x,n.y),new qr(C.x,C.y),new qr(b.x,b.y),new qr(H.x,H.y),new qr(k.x-t,k.y-t),new qr(k.x+2*t,k.y+2*t)),Z.$62l===K&&(d=!0)}}}if(d)return!0}return y},R._47O=function(Y){var a=this,n=a.gv,s=n._editInteractor;s instanceof u.XEditInteractor||En.call(a,Y)},R.rectIntersects=function(s){var C=this,Q=C._data,N=C.gv,V=N.getZoom(),P=C._55O,W=N._editInteractor;if(W instanceof u.XEditInteractor&&N.isEditable(Q)&&P&&P._43O){var q=P.$15l,G=!1,c=a?5:1,g=s.x+c,B=s.y+c,l={x:g,y:B};if(q&&q.length===Q.getPoints().size()||(ps(C),q=P.$15l),W._shape===Q&&W._hoverSegmentIndex>=0){var i=Q.getSegments();i&&i.size()||(i=co(q));var f=N._editInteractor._hoverSegmentIndex,Y=i.get(f),v=Ec(Q,C,f),r=y;if(v!=y&&v>=0){var n=q[v],z=N.getSegmentHoverWidth()/V;if(2===Y||1===Y){var o=q[v+1];r=Or(new qr(n.x,n.y),new qr(o.x,o.y),new qr(l.x-z,l.y-z),new qr(l.x+2*z,l.y+2*z)),r.$62l===K&&(G=!0)}else if(3===Y){var J=q[v+1],o=q[v+2];r=gh(new qr(n.x,n.y),new qr(J.x,J.y),new qr(o.x,o.y),new qr(l.x-z,l.y-z),new qr(l.x+2*z,l.y+2*z)),r.$62l===K&&(G=!0)}else if(4===Y){var x=q[v+1],$=q[v+2];o=q[v+3],r=so(new qr(n.x,n.y),new qr(x.x,x.y),new qr($.x,$.y),new qr(o.x,o.y),new qr(l.x-z,l.y-z),new qr(l.x+2*z,l.y+2*z)),r.$62l===K&&(G=!0)}}}if(G)return!0}return y},R._48O=function(){var s=this,N=s.gv,G=N._editInteractor;G instanceof u.XEditInteractor?(B._48O.call(s),s._55O._43O&&ps(s)):gp.call(s)},R._79o=function(){var b=this,o=b.gv,M=o.getZoom(),r=o._editInteractor,m=Yq.call(b);if(m){var d={x:m.x,y:m.y,width:m.width,height:m.height};if(r instanceof u.XEditInteractor){var l=b._55O,f=o.getEditPointSize()/M+2,t=0;l&&l._43O&&(t+=f/2,x(d,t))}return d}},B._47O=function(T){var A=this,E=A.gv,l=E._editInteractor;if(l instanceof u.XEditInteractor);else{var b=A._55O;b&&b._98o&&Rn.call(A,T)}},B.getSelectWidth=function(){var d=this,H=d.gv,T=H._editInteractor,m=d._data;return H.isEditable(m)&&T instanceof u.XEditInteractor?0:sk.call(d)},B._80o=function(N){var J=this,H=J.gv._editInteractor;if(Vm.call(J,N),H&&H._debug){N.save(),N.beginPath(),N.lineWidth=1,N.strokeStyle="green";var I=J._79o();I&&(N.rect(I.x,I.y,I.width,I.height),N.stroke()),N.restore()}},R._80o=function(Y){var b=this,k=b.gv._editInteractor;if(Qq.call(b,Y),k&&k._debug){Y.save(),Y.beginPath(),Y.lineWidth=1,Y.strokeStyle="green";var f=b._79o();Y.rect(f.x,f.y,f.width,f.height),Y.stroke(),Y.restore()}},B._48O=function(){var s=this,M=s.gv,T=s._data,f=M._editInteractor,A=s._55O,j=T.p(),X=T.getRotation();if(f instanceof u.XEditInteractor){if(A._42O){var $=Be(j,T.getWidth(),T.getHeight(),X),b=$[0],g=$[1],F=$[2],a=$[3],r=$[4],V=$[5],P=$[6],C=$[7];A.$45l=[b,r,g,V,a,P,F,C]}}else hc.call(s)},_.getResizeMode=function(){return this.$25l||"normal"},_.setResizeMode=function(L){var f=this.$25l;this.$25l=L,this.fp("resizeMode",f,L)},_.getSnapAngle=function(){return this.$26l||Math.PI/36},_.setSnapAngle=function(Z){var $=this.$26l;this.$26l=Z,this.fp("snapAngle",$,Z)},_.getSnapSpacing=function(){return this.$27l},_.setSnapSpacing=function(q){var p=this.$27l;this.$27l=q,this.fp("snapSpacing",p,q)},_.getPointSnapSpacing=function(){return this._pointSnapSpacing},_.setPointSnapSpacing=function(Y){var B=this._pointSnapSpacing;this._pointSnapSpacing=Y,this.fp("pointSnapSpacing",B,Y)},_.setHelperEditableFunc=function(E){var A=this._helperEditableFunc;this._helperEditableFunc=E,this.fp("helperEditableFunc",A,E)},_.getHelperEditableFunc=function(){return this._helperEditableFunc},_.setLeftTopHelpers=function(B){var t=this._leftTopHelpers;this._leftTopHelpers=B,this.fp("leftTopHelpers",t,B)},_.getLeftTopHelpers=function(){return this._leftTopHelpers},_.setLeftTopHelpersAlign=function(k){var M=this._leftTopHelpersAlign;this._leftTopHelpersAlign=k,this.fp("leftTopHelpersAlign",M,k)},_.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},_.setRightTopHelpers=function(R){var U=this._rightTopHelpers;this._rightTopHelpers=R,this.fp("rightTopHelpers",U,R)},_.getRightTopHelpers=function(){return this._rightTopHelpers},_.setRightTopHelpersAlign=function($){var m=this._rightTopHelpersAlign;this._rightTopHelpersAlign=$,this.fp("rightTopHelpersAlign",m,$)},_.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},_.setLeftBottomHelpers=function(q){var H=this._leftBottomHelpers;this._leftBottomHelpers=q,this.fp("leftBottomHelpers",H,q)},_.getLeftBottomHelpers=function(){return this._leftBottomHelpers},_.setLeftBottomHelpersAlign=function(t){var q=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=t,this.fp("leftBottomHelpersAlign",q,t)},_.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},_.setRightBottomHelpers=function(s){var D=this._rightBottomHelpers;this._rightBottomHelpers=s,this.fp("rightBottomHelpers",D,s)},_.getRightBottomHelpers=function(){return this._rightBottomHelpers},_.setRightBottomHelpersAlign=function(F){var f=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=F,this.fp("rightBottomHelpersAlign",f,F)},_.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},_.setEdgeHelpers=function($){var w=this._edgeHelpers;this._edgeHelpers=$,this.fp("edgeHelpers",w,$)},_.getEdgeHelpers=function(){return this._edgeHelpers},_.isHelperEditable=function(G,v){return G instanceof i&&("host"===v||"edge"===v||"elevation"===v||"tall"===v)?!1:G instanceof n&&("source"===v||"target"===v)?!1:"pointElevation"===v?this._helperEditableFunc?this._helperEditableFunc(G,v):!1:this._helperEditableFunc?this._helperEditableFunc(G,v):!0},_.getEditHelperSize=function(){return this._editHelperSize||(a?28:16)},_.setEditHelperSize=function(c){var g=this._editHelperSize;this._editHelperSize=c,this.fp("editHelperSize",g,c)},_.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},_.setEditRectBorderColor=function(J){var C=this.$28l;this.$28l=J,this.fp("editRectBorderColor",C,J)},_.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},_.setNodeBorderColor=function(v){var e=this.$29l;this.$29l=v,this.fp("nodeBorderColor",e,v)},_.getEditRectBorderStyle=function(){return this.$30l||"dashed"},_.setEditRectBorderStyle=function(l){var u=this.$30l;this.$30l=l,this.fp("editRectBorderStyle",u,l)},_.getControlPointBackground=function(){return this.$31l||"#ff0"},_.setControlPointBackground=function(F){var q=this.$31l;this.$31l=F,this.fp("controlPointBackground",q,F)},_.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},_.setControlPointBorderColor=function(P){var M=this.$32l;this.$32l=P,this.fp("controlPointBorderColor",M,P)},_.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},_.setJoinPointBackground=function(l){var y=this.$33l;this.$33l=l,this.fp("joinPointBackground",y,l)},_.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},_.setJoinPointBorderColor=function(J){var B=this.$34l;this.$34l=J,this.fp("joinPointBorderColor",B,J)},_.getDirectionLineColor=function(){return this.$35l||"#888"},_.setDirectionLineColor=function(M){var E=this.$35l;this.$35l=M,this.fp("directionLineColor",E,M)},_.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},_.setSegmentHoverColor=function(x){var c=this.$36l;this.$36l=x,this.fp("segmentHoverColor",c,x)},_.getSegmentHoverWidth=function(){return this.$22l||(a?16:8)},_.setSegmentHoverWidth=function(T){var K=this.$22l;this.$22l=T,this.fp("segmentHoverWidth",K,T)},_.getSnapPointBorderColor=function(){return this.$38l||"#f00"},_.setSnapPointBorderColor=function(B){var D=this.$38l;this.$38l=B,this.fp("snapPointBorderColor",D,B)},_.getEditRectPadding=function(){return this.$39l!=y?this.$39l:6},_.setEditRectPadding=function(i){var H=this.$39l;this.$39l=i,this.fp("editRectPading",H,i)},_.isRectEditable=function(q){var Y=this,W=Y._editInteractor;return W instanceof u.XEditInteractor?Y._rectEditableFunc?Y._rectEditableFunc(q):!0:mr.call(Y,q)},_.isPointEditable=function(k){var l=this,v=l._editInteractor;return v instanceof u.XEditInteractor?l._pointEditableFunc?l._pointEditableFunc(k):!0:kq.call(l,k)},_.validateImpl=function(){var v=this,M=v.$14l,X=v._editInteractor;if(M){var c=v.getWidth(),S=v.getHeight();(c!==M.clientWidth||S!==M.clientHeight)&&(X&&(X._68I=1),G.setCanvas(M,c,S),v._32I=1)}wr.call(this)},_.isEditable=function(Z){var C=kr.call(this,Z),S=this._editInteractor;if(S instanceof u.XEditInteractor&&Z instanceof i){if(!Z.s("2d.editable"))return!1;var M=this.getEditableFunc();C=M?M(Z):!0}return C},_._42=function(T,P){var w=this,I=w._editInteractor;pk.call(w,T,P),I instanceof u.XEditInteractor&&I._68I&&I._42()},_.isSnapPoint=function(){return!0};var is=function(b){arguments.length>0&&this.$58l(b)},Hc=is.prototype;Hc.$58l=function(B){this.$62l=B,this.points=new Array},Hc.$56l=function(j){this.points.push(j)},Hc.$57l=function(I){this.points=this.points.concat(I)};var qr=function(c,g){arguments.length>0&&this.$58l(c,g)},Dq=qr.prototype;Dq.$58l=function(C,S){this.x=C,this.y=S},Dq.add=function(B){return new qr(this.x+B.x,this.y+B.y)},Dq.addEquals=function(H){return this.x+=H.x,this.y+=H.y,this},Dq.$55l=function(K){return new qr(this.x*K,this.y*K)},Dq.eq=function(Q){return this.x==Q.x&&this.y==Q.y},Dq.lt=function(g){return this.x<g.x&&this.y<g.y},Dq.lte=function(K){return this.x<=K.x&&this.y<=K.y},Dq.gt=function(C){return this.x>C.x&&this.y>C.y},Dq.gte=function(J){return this.x>=J.x&&this.y>=J.y},Dq.lerp=function(E,i){return new qr(this.x+(E.x-this.x)*i,this.y+(E.y-this.y)*i)},Dq.distanceFrom=function(D){var B=this.x-D.x,d=this.y-D.y;return z(B*B+d*d)},Dq.min=function(b){return new qr(p(this.x,b.x),p(this.y,b.y))},Dq.max=function(e){return new qr(c(this.x,e.x),c(this.y,e.y))},Dq.toString=function(){return this.x+","+this.y};var _k=function(){this.$58l(arguments)},wk=_k.prototype;_k.TO=1e-6,_k.AC=6,wk.$58l=function(G){this.co=new Array;for(var p=G.length-1;p>=0;p--)this.co.push(G[p])},wk.$55l=function(n){for(var c=new _k,g=0;g<=this.$50l()+n.$50l();g++)c.co.push(0);for(var g=0;g<=this.$50l();g++)for(var i=0;i<=n.$50l();i++)c.co[g+i]+=this.co[g]*n.co[i];return c},wk.$59l=function(){for(var m=this.$50l();m>=0&&o(this.co[m])<=_k.TO;m--)this.co.pop()},wk.$50l=function(){return this.co.length-1},wk.$51l=function(){var N;switch(this.$59l(),this.$50l()){case 0:N=new Array;break;case 1:N=this.$52l();break;case 2:N=this.$53l();break;case 3:N=this.$54l();break;case 4:N=this.$63l();break;default:N=new Array}return N},wk.$52l=function(){var A=new Array,$=this.co[1];return 0!=$&&A.push(-this.co[0]/$),A},wk.$53l=function(){var t=new Array;if(2==this.$50l()){var r=this.co[2],u=this.co[1]/r,o=this.co[0]/r,f=u*u-4*o;if(f>0){var d=z(f);t.push(.5*(-u+d)),t.push(.5*(-u-d))}else 0==f&&t.push(.5*-u)}return t},wk.$63l=function(){var B=new Array;if(4==this.$50l()){var V=this.co[4],E=this.co[3]/V,N=this.co[2]/V,A=this.co[1]/V,r=this.co[0]/V,l=new _k(1,-N,E*A-4*r,-E*E*r+4*N*r-A*A).$54l(),S=l[0],_=E*E/4-N+S;if(o(_)<=_k.TO&&(_=0),_>0){var h=z(_),t=3*E*E/4-h*h-2*N,P=(4*E*N-8*A-E*E*E)/(4*h),k=t+P,G=t-P;if(o(k)<=_k.TO&&(k=0),o(G)<=_k.TO&&(G=0),k>=0){var F=z(k);B.push(-E/4+(h+F)/2),B.push(-E/4+(h-F)/2)}if(G>=0){var F=z(G);B.push(-E/4+(F-h)/2),B.push(-E/4-(F+h)/2)}}else if(0>_);else{var P=S*S-4*r;if(P>=-_k.TO){if(0>P&&(P=0),P=2*z(P),t=3*E*E/4-2*N,t+P>=_k.TO){var C=z(t+P);B.push(-E/4+C/2),B.push(-E/4-C/2)}if(t-P>=_k.TO){var C=z(t-P);B.push(-E/4+C/2),B.push(-E/4-C/2)}}}}return B},wk.$54l=function(){var E=new Array;if(3==this.$50l()){var y=this.co[3],D=this.co[2]/y,u=this.co[1]/y,O=this.co[0]/y,Z=(3*u-D*D)/3,C=(2*D*D*D-9*u*D+27*O)/27,X=D/3,w=C*C/4+Z*Z*Z/27,j=C/2;if(o(w)<=_k.TO&&(w=0),w>0){var F,h,A=z(w);F=-j+A,h=F>=0?e(F,1/3):-e(-F,1/3),F=-j-A,F>=0?h+=e(F,1/3):h-=e(-F,1/3),E.push(h-X)}else if(0>w){var r=z(-Z/3),q=P(z(-w),-j)/3,v=f(q),l=J(q),s=z(3);E.push(2*r*v-X),E.push(-r*(v+s*l)-X),E.push(-r*(v-s*l)-X)}else{var F;F=j>=0?-e(j,1/3):e(-j,1/3),E.push(2*F-X),E.push(-F-X)}}return E};var oq=function(Y,W){arguments.length>0&&this.$58l(Y,W)},vm=oq.prototype;vm.$58l=function(y,G){this.x=y,this.y=G},vm.length=function(){return z(this.x*this.x+this.y*this.y)},vm.$60l=function(e){return this.x*e.x+this.y*e.y};var rb=function(I,x,P,h){var W,L=(h.x-P.x)*(I.y-P.y)-(h.y-P.y)*(I.x-P.x),U=(x.x-I.x)*(I.y-P.y)-(x.y-I.y)*(I.x-P.x),s=(h.y-P.y)*(x.x-I.x)-(h.x-P.x)*(x.y-I.y);if(0!=s){var v=L/s,j=U/s;v>=0&&1>=v&&j>=0&&1>=j?(W=new is(K),W.points.push(new qr(I.x+v*(x.x-I.x),I.y+v*(x.y-I.y)))):W=new is(M)}else W=0==L||0==U?new is("C"):new is("P");return W},Mi=function(u,R,Y,T,P){var q,F,e,j,h,G,X,E=T.min(P),r=T.max(P),k=new is(M);q=R.$55l(-2),e=u.add(q.add(Y)),q=u.$55l(-2),F=R.$55l(2),j=q.add(F),h=new qr(u.x,u.y),X=new oq(T.y-P.y,P.x-T.x),G=T.x*P.y-P.x*T.y;for(var z=new _k(X.$60l(e),X.$60l(j),X.$60l(h)+G).$51l(),t=0;t<z.length;t++){var A=z[t];if(A>=0&&1>=A){var S=u.lerp(R,A),s=R.lerp(Y,A),Q=S.lerp(s,A);T.x==P.x?E.y<=Q.y&&Q.y<=r.y&&(k.$62l=K,k.$56l(Q)):T.y==P.y?E.x<=Q.x&&Q.x<=r.x&&(k.$62l=K,k.$56l(Q)):Q.gte(E)&&Q.lte(r)&&(k.$62l=K,k.$56l(Q))}}return k},gh=function(h,O,S,p,i){var z=p.min(i),u=p.max(i),r=new qr(u.x,z.y),E=new qr(z.x,u.y),H=Mi(h,O,S,z,r),T=Mi(h,O,S,r,u),c=Mi(h,O,S,u,E),_=Mi(h,O,S,E,z),I=new is(M);return I.$57l(H.points),I.$57l(T.points),I.$57l(c.points),I.$57l(_.points),I.points.length>0&&(I.$62l=K),I},mk=function(V,g,T,O,C,Z){var c,z,u,A,L,x,_,H,f,Q,n=C.min(Z),s=C.max(Z),e=new is(M);c=V.$55l(-1),z=g.$55l(3),u=T.$55l(-3),A=c.add(z.add(u.add(O))),L=new oq(A.x,A.y),c=V.$55l(3),z=g.$55l(-6),u=T.$55l(3),A=c.add(z.add(u)),x=new oq(A.x,A.y),c=V.$55l(-3),z=g.$55l(3),u=c.add(z),_=new oq(u.x,u.y),H=new oq(V.x,V.y),Q=new oq(C.y-Z.y,Z.x-C.x),f=C.x*Z.y-Z.x*C.y;for(var j=new _k(Q.$60l(L),Q.$60l(x),Q.$60l(_),Q.$60l(H)+f).$51l(),a=0;a<j.length;a++){var F=j[a];if(F>=0&&1>=F){var q=V.lerp(g,F),m=g.lerp(T,F),N=T.lerp(O,F),E=q.lerp(m,F),W=m.lerp(N,F),$=E.lerp(W,F);C.x==Z.x?n.y<=$.y&&$.y<=s.y&&(e.$62l=K,e.$56l($)):C.y==Z.y?n.x<=$.x&&$.x<=s.x&&(e.$62l=K,e.$56l($)):$.gte(n)&&$.lte(s)&&(e.$62l=K,e.$56l($))}}return e},so=function(s,k,f,p,J,V){var I=J.min(V),C=J.max(V),H=new qr(C.x,I.y),e=new qr(I.x,C.y),y=mk(s,k,f,p,I,H),A=mk(s,k,f,p,H,C),m=mk(s,k,f,p,C,e),F=mk(s,k,f,p,e,I),$=new is(M);return $.$57l(y.points),$.$57l(A.points),$.$57l(m.points),$.$57l(F.points),$.points.length>0&&($.$62l=K),$},Or=function(I,H,N,Q){var D=N.min(Q),J=N.max(Q),y=new qr(J.x,D.y),u=new qr(D.x,J.y),F=rb(D,y,I,H),E=rb(y,J,I,H),$=rb(J,u,I,H),z=rb(u,D,I,H),S=new is(M);return S.$57l(F.points),S.$57l(E.points),S.$57l($.points),S.$57l(z.points),S.points.length>0&&(S.$62l=K),S},Cn=u.XEditInteractor=function(t){var y=this,s=y._view=document.createElement("canvas");s.className="editCanvas",s.style.position="absolute",Cn.superClass.constructor.call(y,t)};g.def(Cn,u.Interactor,{ms_edit:1,setUp:function(){var x=this,j=x.gv,s=j.getView(),G=x._view;Cn.superClass.setUp.call(x),j.setEditInteractor(x),j.$14l=G,j._79O?s.insertBefore(G,j._79O):s.appendChild(G);var P=x.$49l=x.$11l.bind(x);j.dm().md(P),j.sm().ms(P),j.mp(P)},tearDown:function(){var P=this,x=P.gv,k=x.getView(),a=P.$49l;Cn.superClass.tearDown.call(P),x.setEditInteractor(y),x.$14l=y,k.removeChild(P._view),x.dm().umd(a),x.sm().ums(a),x.ump(a)},clear:function(){var X=this,Z=X.gv;delete X._hoverSegmentIndex,delete X._edge,delete X._shape,delete Z._editing,delete X.$10l,delete X.$13l,delete X.$9l,delete X._removePointIndex,delete X._lp,X.$12l="",delete X.$40l,delete X.$67l,delete X.$72l,delete X.$73l,delete X.$75l,delete X.$1l,delete X.$3l,delete X.$2l,delete X.$92l,delete X.$93l,delete X.$94l,X.clearDragging()},handle_keydown:function(u){this.$48l!==u.shiftKey&&(this.$48l=u.shiftKey,this.handle_mousemove(u,V,!0))},handle_keyup:function(M){this.$48l!==M.shiftKey&&(this.$48l=M.shiftKey,this.handle_mousemove(M,V,!0))},handle_touchstart:function(Y){this.handle_mousemove(Y),this.handle_mousedown(Y)},handle_mousedown:function(P){v(P);var S=this,k=S.$13l,T=S.gv,o=T.dm(),R=T.sm(),H=T.getZoom(),A=T.lp(P),l=g.isDoubleClick(P),_=g.isLeftButton(P),M=S.$7l,U=S._shape,e=S._hoverSegmentIndex,q=S._edge,d=S.$87l,L=S.$88l,B=function(){S._68I||d===S.$87l&&L===S.$88l||S.$43l()};if(7!==S.$67l&&(delete S.$87l,delete S.$88l),_&&(U||q)&&e>=0&&l&&(U&&R.contains(U)||q&&R.contains(q))){var J=ed.call(S,U||q,e,A);return S.addShapePoint(U||q,e,J),I(function(){S.handle_mousemove(P)},40),void 0}if(_&&(U||q)&&S._removePointIndex>=0&&l)return S.removeShapePoint(),S.$5l=1,I(function(){S.handle_mousemove(P)},40),void 0;if(!_||!T._editing)return B(),void 0;if(U&&k>=0){var x=U.getPoints().get(k),F=U.p(),K=Dm(F,x.x-F.x,x.y-F.y,-M+U.getRotation());b=Dm(F,A.x-F.x,A.y-F.y,-M),S.$24l={x:b.x-K.x,y:b.y-K.y},S.startDragging(P),o.beginTransaction(),S.fi({kind:"beginEditPoint",event:P,data:U,index:k}),S.$88l=k,S.$87l=U}else if(S.$10l){var z=T.sm().getSelection(),Q=S.$6l,C=S.$1l={},Y=S.$3l={},u=S.$16l[X[S.$10l]],D={x:Q.x,y:Q.y},W={x:Q.x+Q.width/2,y:Q.y+Q.height/2};S.$24l={x:A.x-u.x/H,y:A.y-u.y/H},S.$2l=s(S.$8l),S.$4l=s(Q),z.each(function(U){if(U instanceof n){var f=U.p(),G=U.getWidth(),X=U.getHeight(),A=Dm(W,f.x-W.x,f.y-W.y,-M);C[U.getId()]={x:f.x-G/2,y:f.y-X/2,width:G,height:X},Y[U.getId()]={x:(A.x-D.x)/Q.width,y:(A.y-D.y)/Q.height}}}),S.startDragging(P),o.beginTransaction(),S.fi({kind:"beginEditRect",event:P,direction:S.$10l})}else if(q&&k>=0){var r=Ol(T.getDataUI(q),q.s("edge.points")),x=r.get(k);S.$24l={x:A.x-x.x,y:A.y-x.y},S.startDragging(P),o.beginTransaction(),S.fi({kind:"beginEditPoint",event:P,data:q,index:k}),S.$88l=k,S.$87l=q}else if(S.$40l){var Q=S.$6l,W={x:Q.x+Q.width/2,y:Q.y+Q.height/2},i=s(S.$23l);i.x/=H,i.y/=H;var V=Dm(W,i.x-W.x,i.y-W.y,-M),b=Dm(W,A.x-W.x,A.y-W.y,-M);S.$24l={x:b.x-V.x,y:b.y-V.y},S.startDragging(P),o.beginTransaction(),S.fi({kind:"beginEditRotation",event:P,data:S._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(S.$67l)>=0){var j=S.$67l;(7===j||8===j||9===j)&&o.beginTransaction(),S.startDragging(P)}else if(S.$71l&&l&&S.$79l(S.$71l,A)){var G=R.toSelection();o.beginTransaction(),G.each(function(Z){o.remove(Z)}),o.endTransaction()}B()},$11l:function(){var U=this,i=U.gv;i._editing&&(U.$13l==y||U._shape==y&&U._edge==y)&&(U.$73l==y||1!==U.$67l&&5!==U.$67l&&6!==U.$67l)||(U.$5l=1),U._68I=1},$46l:function(V){var $=this,x=$.gv,j=x.lp(V),e=[];return po(x,function(o){var J=x.getDataUI(o);if(J){var V=J._79o();b(V,j)&&e.push(o)}}),e},$47l:function(Z){var n=this,w=n.$13l,k=n.gv.dm();n.$10l?(n.fi({kind:"endEditRect",event:Z,direction:n.$10l}),k.endTransaction()):n._shape&&w>=0?(n.fi({kind:"endEditPoint",event:Z,data:n._shape,index:w}),k.endTransaction()):n._edge&&w>=0?(n.fi({kind:"endEditPoint",event:Z,data:n._edge,index:w}),k.endTransaction()):n.$23l&&n.$40l&&(n.fi({kind:"endEditRotation",event:Z}),k.endTransaction())},handleWindowTouchEnd:function(n){this.handleWindowMouseUp(n)},handleWindowMouseUp:function(X){var A=this,o=A.gv,I=o.dm(),t=A._shape,L=A._edge,j=A.$13l,B=A.$40l,Q=A.$9l,J=A.$10l,Z=A.$67l;if((t||L)&&j>=0&&Q>=0){var F,z;if(t){var G=t.p(),m=t.getRotation();F=t.getPoints(),z=F.get(Q),zn(t,G,m,j,z,!1)}else if(F=Ol(o.getDataUI(L),L.s("edge.points"),!0),z=F.get(Q),0===j){var D=F.get(0);L.s("edge.source.offset.x",z.x-D.x),L.s("edge.source.offset.y",z.y-D.y)}else if(j===F.size()-1){var v=F.get(F.size()-1);L.s("edge.target.offset.x",z.x-v.x),L.s("edge.target.offset.y",z.y-v.y)}else"points"===L.s("edge.type")&&(F.set(j,z),L.s("edge.points",Vo(F)))}A.$47l(X);var s=A.$73l;1===Z?(I.beginTransaction(),s?o.sm().each(function(e){if(e.setHost&&o.isHelperEditable(e,"host")){e.setHost(s);
var P=A.$75l,l=A.$74l;P&&(e.s("attach.row.index",P.rowIndex),e.s("attach.column.index",P.columnIndex)),l&&(e.s("attach.index",l.attachIndex),e.s("attach.offset",l.attachOffset),e.s("attach.offset.relative",!1),e.s("attach.offset.opposite",!1))}}):o.sm().each(function(G){G.setHost&&o.isHelperEditable(G,"host")&&(G.setHost(y),G.s("attach.row.index",V),G.s("attach.column.index",V),G.s("attach.index",V),G.s("attach.offset",V),G.s("attach.offset.relative",!1),G.s("attach.offset.opposite",!1))}),I.endTransaction()):2===Z?(I.beginTransaction(),s?o.sm().each(function(k){k.setParent&&o.isHelperEditable(k,"parent")&&k.setParent(s)}):o.sm().each(function(Z){Z.setParent&&o.isHelperEditable(Z,"parent")&&Z.setParent(y)}),I.endTransaction()):3===Z?s&&(I.beginTransaction(),o.sm().each(function(O){if(o.isHelperEditable(O,"edge")&&O instanceof n&&s instanceof n){var b=new q.Edge;I.add(b),b.setSource(O),b.setTarget(s),A.onEdgeCreated&&A.onEdgeCreated(X,b)}}),I.endTransaction()):5===Z||6===Z?s&&(I.beginTransaction(),o.sm().each(function(M){M instanceof i&&s instanceof n&&(5===Z&&o.isHelperEditable(M,"source")?M.setSource(s):6===Z&&o.isHelperEditable(M,"source")&&M.setTarget(s))}),I.endTransaction()):(7===Z||8===Z||9===Z)&&I.endTransaction(),(J||B)&&A.$43l(!0),a?(A.clear(),delete A.$64l,A._68I||A.$43l()):(A.handle_mousemove(X,!0),Z&&!A._68I&&A.$43l())},handleWindowTouchMove:function(X){this.handleWindowMouseMove(X)},handleWindowMouseMove:function(H){this._78I(H)},handle_mousemove:function(D,c,s){if(!this._pause){if(!s){var B=a?Ih(D):D;this.$61l={clientX:B.clientX,clientY:B.clientY}}if(c===!0||!T()){var F=this,l=F.gv,n=!1,J=y;F.clear(),l.sm().size()>0&&(J=l.lp(s?F.$61l:D),n=F._79I(D,J)),n&&(l._editing=1),F.$12l!==F.$65l&&(F.$65l=F.$12l,F.setCursor(F.$12l)),F.$40l!==F.$64l&&(F.$64l=F.$40l,F._68I||F.$43l()),F._hoverSegmentIndex!==F.$66l&&(F.$66l=F._hoverSegmentIndex,F._68I||F.$43l())}}},_78I:function(Y){this.autoScroll(Y);var v=this,N=v.gv,w=N.lp(Y),T=N.getZoom(),Q=v.$13l;if((v._shape||v._edge)&&Q>=0){var S,r,m,h=v._shape,R=v._edge,K=v.$24l,C=N.getPointSnapSpacing(),t=function(Y,Q){return C==y||isNaN(C)?{x:Y,y:Q}:{x:d(Y/C)*C,y:d(Q/C)*C}};if(h){S=h.getPoints();var X=h.p(),e=h.getRotation(),x=0;r=Dm(X,w.x-X.x,w.y-X.y,-e),zn(h,X,e,Q,w,!0,K,t),v.fi({kind:"betweenEditPoint",event:Y,data:h,index:Q})}else if(R){S=Ol(N.getDataUI(R),R.s("edge.points"),!0),w.x-=K.x,w.y-=K.y,r=w;var V,O,J=R.s("edge.offset"),q=S.size(),u=q>2;if(0===Q){var k=S.get(0);J&&(k=ke(k,S.get(1),-J,u),w=ke(w,S.get(1),-J,u)),V=w.x-k.x,O=w.y-k.y,m=t(V,O),R.s("edge.source.offset.x",m.x),R.s("edge.source.offset.y",m.y)}else if(Q===q-1){var s=S.get(q-1);J&&(s=ke(s,S.get(q-2),-J,u),w=ke(w,S.get(q-2),-J,u)),V=w.x-s.x,O=w.y-s.y,m=t(V,O),R.s("edge.target.offset.x",m.x),R.s("edge.target.offset.y",m.y)}else"points"===R.s("edge.type")&&(m=t(w.x,w.y),m.e=S.get(Q).e,S.set(Q,m),R.s("edge.points",Vo(S)));v.fi({kind:"betweenEditPoint",event:Y,data:R,index:Q})}if(delete v.$9l,N.isSnapPoint(h)||N.isSnapPoint(R))for(x=0;x<S.size();x++)if(x!==Q){var B=S.get(x);if(H(B,r)<N.getEditPointSize()/T){v.$9l=x;break}}}else if(v.$10l){var K=v.$24l;w.x-=K.x,w.y-=K.y;var b=N.sm().getSelection(),_=v.$1l,W=v.$7l,c=v.$10l,E=v.$4l,M=v.$2l,L=N.getEditRectPadding()/T,$=2*L,D=N.getSnapSpacing(),f=D!=y&&!isNaN(D),p=up(M,w,c,W,2*L,N.getResizeMode(),f,!0),G=v.$6l;if(f){var l=p.width-$,a=p.height-$,U=d(l/D)*D,Yl=d(a/D)*D,yq=U-l,dq=Yl-a;("west"===c||"northwest"===c||"southwest"===c)&&(yq=-yq),("north"===c||"northwest"===c||"northeast"===c)&&(dq=-dq),p=up(M,w,c,W,2*L,N.getResizeMode(),f,!1,yq,dq)}v.$8l=p,G.x=p.x+L,G.y=p.y+L,G.width=p.width-$,G.height=p.height-$;var dc=p.x+p.width/2,Nl=p.y+p.height/2,vk=G.x,bi=G.y,$m=G.width/E.width,id=G.height/E.height;b.each(function(Z){if(Z instanceof n&&N.isEditable(Z)&&N.isRectEditable(Z)){var d=_[Z.getId()],C=v.$3l[Z.getId()],f={x:d.x+d.width/2,y:d.y+d.height/2},k=0,H=0,l=c,Y=180*o(W-Z.getRotation())/F;"northeast"===c?Y>=315||45>Y?(k=d.width*$m+d.x,H=d.height*(1-id)+d.y,l="northeast"):Y>=45&&135>Y?(k=d.width*(1-id)+d.x,H=d.height*(1-$m)+d.y,l="northwest"):Y>=135&&225>Y?(k=d.width*(1-$m)+d.x,H=d.height*id+d.y,l="southwest"):(k=d.width*id+d.x,H=d.height*$m+d.y,l="southeast"):"north"===c?Y>=315||45>Y?(H=d.height*(1-id)+d.y,l="north"):Y>=45&&135>Y?(k=d.width*(1-id)+d.x,l="west"):Y>=135&&225>Y?(H=d.height*id+d.y,l="south"):(k=d.width*id+d.x,l="east"):"northwest"===c?Y>=315||45>Y?(k=d.width*(1-$m)+d.x,H=d.height*(1-id)+d.y,l="northwest"):Y>=45&&135>Y?(k=d.width*(1-id)+d.x,H=d.height*$m+d.y,l="southwest"):Y>=135&&225>Y?(k=d.width*$m+d.x,H=d.height*id+d.y,l="southeast"):(k=d.width*id+d.x,H=d.height*(1-$m)+d.y,l="northeast"):"west"===c?Y>=315||45>Y?(k=d.width*(1-$m)+d.x,l="west"):Y>=45&&135>Y?(H=d.height*$m+d.y,l="south"):Y>=135&&225>Y?(k=d.width*$m+d.x,l="east"):(H=d.height*(1-$m)+d.y,l="north"):"southwest"===c?Y>=315||45>Y?(k=d.width*(1-$m)+d.x,H=d.height*id+d.y,l="southwest"):Y>=45&&135>Y?(k=d.width*id+d.x,H=d.height*$m+d.y,l="southeast"):Y>=135&&225>Y?(k=d.width*$m+d.x,H=d.height*(1-id)+d.y,l="northeast"):(k=d.width*(1-id)+d.x,H=d.height*(1-$m)+d.y,l="northwest"):"east"===c?Y>=315||45>Y?(k=d.width*$m+d.x,l="east"):Y>=45&&135>Y?(H=d.height*(1-$m)+d.y,l="north"):Y>=135&&225>Y?(k=d.width*(1-$m)+d.x,l="west"):(H=d.height*$m+d.y,l="south"):"south"===c?Y>=315||45>Y?(H=d.height*id+d.y,l="south"):Y>=45&&135>Y?(k=d.width*id+d.x,l="east"):Y>=135&&225>Y?(H=d.height*(1-id)+d.y,l="north"):(k=d.width*(1-id)+d.x,l="west"):"southeast"===c&&(Y>=315||45>Y?(k=d.width*$m+d.x,H=d.height*id+d.y,l="southeast"):Y>=45&&135>Y?(k=d.width*id+d.x,H=d.height*(1-$m)+d.y,l="northeast"):Y>=135&&225>Y?(k=d.width*(1-$m)+d.x,H=d.height*(1-id)+d.y,l="northwest"):(k=d.width*(1-id)+d.x,H=d.height*$m+d.y,l="southwest"));var R=Dm(f,k-f.x,H-f.y,Z.getRotation());Zg(Z,d,l,{x:R.x,y:R.y});var M=vk+G.width*C.x,i=bi+G.height*C.y,a={x:M,y:i};a=Dm({x:dc,y:Nl},a.x-dc,a.y-Nl,W),Z.p(a.x,a.y)}}),v.fi({kind:"betweenEditRect",event:Y,direction:c})}else if(v.$23l&&v.$40l){var di=v.$8l,Bk=di.width,ad=di.height,X={x:di.x+Bk/2,y:di.y+ad/2},K=v.$24l,Xe=v.$23l,Be=Xe.x/T-X.x,df=Xe.y/T-X.y,kj=z(Be*Be+df*df),Jq=Math.asin(K.x/kj),vl=N.sm().getSelection(),zf=A+P(w.y-X.y,w.x-X.x)-Jq,_o=N.getSnapAngle(),zf=d(zf/_o)*_o;0>zf&&(zf+=Z);var ch=zf-v.$7l,Cp=[X.x,0,X.y];vl.each(function(u){if(N.isEditable(u)&&N.isRotationEditable(u)&&N.isVisible(u)){var U=Sg(u.p3(),Cp),P=Rf();Um(P,-ch),u.setRotation(u.getRotation()+ch),Bj(U,P),u.p3(Cp[0]+U[0],Cp[1]+U[1],Cp[2]+U[2])}}),v.$7l=zf,v.fi({kind:"betweenEditRotation",event:Y})}else if([1,2,3,5,6].indexOf(v.$67l)>=0)v.$72l=Y,v.$78l||(v.$78l=1,I(function(){g.isDragging()&&v.$43l(),delete v.$78l},12));else if(7===v.$67l){if(v.$87l instanceof j){var h=v.$87l,rj=v.$88l,Zo=g.clone(h.getPoints().get(rj)),ld=w.y-Zo.y;Zo.e||(Zo.e=0),v.$92l||(v.$92l=Zo.e),Zo.e=v.$92l-ld,h.setPoint(rj,Zo)}else if(v.$87l instanceof i){var R=v.$87l,rj=v.$88l,S=Ol(N.getDataUI(R),R.s("edge.points")),Zo=S.get(rj),ld=w.y-Zo.y;Zo.e||(Zo.e=0),v.$92l||(v.$92l=Zo.e),Zo.e=v.$92l-ld,S.set(rj,Zo),R.s("edge.points",Vo(S))}}else if(8===v.$67l){var vl=N.sm().getSelection(),mf=v.$93l;mf||(mf=v.$93l={}),vl.each(function(O){if(O.p3){var c=O.p3(),g=mf[O.getId()];g==y&&(g=mf[O.getId()]=c[1]),O.p3([c[0],g-(w.y-v.$90l.y/T),c[2]])}})}else if(9===v.$67l){var vl=N.sm().getSelection(),Om=v.$94l;Om||(Om=v.$94l={}),vl.each(function(A){if(A.s3){var h=A.s3(),S=Om[A.getId()];S==y&&(S=Om[A.getId()]=h[1]);var l=S-(w.y-v.$91l.y/T);0>l&&(l=.01),A.s3([h[0],l,h[2]])}})}},$79l:function(r,w){var W=this,I=W.gv,l=I.getZoom(),Y=I.getEditHelperSize(),q=r.x/l,N=r.y/l,R=Y/l,K=R/2;return b({x:q-K,y:N-K,width:R,height:R},w)?!0:void 0},getHelperCursor:function(){return"crosshair"},_79I:function(x,W){for(var g=this,F=g.gv,E=F.getZoom(),$=F.getEditPointSize(),G=$/E,J=G/2,H=g.$46l(x),f=0;f<H.length;f++){var u,K,A=H[f],l=F.getDataUI(A);if(l&&l._55O){var D=l._55O;if(D._43O&&A instanceof i){if(u=A.s("edge.points"),u=Ol(l,u),K=A.s("edge.segments"),K&&K.size()||(K=co(u)),g.$42l(A,W,u._as,K,"edge"))return!0;if("points"===A.s("edge.type")&&g.$41l(A,W,u._as,K,"edge"))return}if(D._43O&&A instanceof j&&D.$15l&&D.$15l.length===A.getPoints().size()){if(u=D.$15l,K=A.getSegments(),K&&K.size()||(K=co(u)),g.$42l(A,W,u,K,"shape"))return!0;if(g.$41l(A,W,u,K,"shape"))return}}}if(g.$16l){var u,y=g.$16l,s=y[3].x-y[7].x,P=y[3].y-y[7].y,B=z(s*s+P*P),w=y[1].x-y[5].x,Z=y[1].y-y[5].y,Q=z(w*w+Z*Z),n={x:W.x*E,y:W.y*E};if(g._80I(n,0,y[0],"northwest",B,Q)||g._80I(n,1,y[1],"north",B,Q)||g._80I(n,2,y[2],"northeast",B,Q)||g._80I(n,7,y[7],"west",B,Q)||g._80I(n,3,y[3],"east",B,Q)||g._80I(n,6,y[6],"southwest",B,Q)||g._80I(n,5,y[5],"south",B,Q)||g._80I(n,4,y[4],"southeast",B,Q))return!0}if(g.$23l){var v=g.$23l,L=v.x/E,R=v.y/E;if(b({x:L-J,y:R-J,width:G,height:G},W))return g.$40l=1,g.$12l=g.getHelperCursor("rotation")||"crosshair",!0}return g.$68l&&g.$79l(g.$68l,W)?(g.$67l=1,g.$12l=g.getHelperCursor("host")||"crosshair",!0):g.$69l&&g.$79l(g.$69l,W)?(g.$67l=2,g.$12l=g.getHelperCursor("parent")||"crosshair",!0):g.$70l&&g.$79l(g.$70l,W)?(g.$67l=3,g.$12l=g.getHelperCursor("edge")||"crosshair",!0):g.$71l&&g.$79l(g.$71l,W)?(g.$67l=4,g.$12l=g.getHelperCursor("remove")||"crosshair",!0):g.$82l&&g.$79l(g.$82l,W)?(g.$67l=5,g.$12l=g.getHelperCursor("source")||"crosshair",!0):g.$83l&&g.$79l(g.$83l,W)?(g.$67l=6,g.$12l=g.getHelperCursor("target")||"crosshair",!0):g._pointElevationHelperPoint&&g.$79l(g._pointElevationHelperPoint,W)?(g.$67l=7,g.$12l=g.getHelperCursor("pointElevation")||"crosshair",!0):g.$90l&&g.$79l(g.$90l,W)?(g.$67l=8,g.$12l=g.getHelperCursor("elevation")||"crosshair",!0):g.$91l&&g.$79l(g.$91l,W)?(g.$67l=9,g.$12l=g.getHelperCursor("tall")||"crosshair",!0):!1},_80I:function(Q,v,E,r,N,X){var g=this,$=g.gv,q=$.getEditPointSize(),G=q/2,Z=$.sm(),t=$.isDirectionEditable;if(t&&1===Z.size()){var k=Z.ld();if(t=t.bind($),k instanceof n){if(!t(k,r))return!1;if("east"===r){if(t(k,"northeast")&&t(k,"southeast")&&2*q>=X)return!1}else if("west"===r){if(t(k,"northwest")&&t(k,"southwest")&&2*q>=X)return!1}else if("north"===r){if(t(k,"northwest")&&t(k,"northeast")&&2*q>=N)return!1}else if("south"===r&&t(k,"southwest")&&t(k,"southeast")&&2*q>=N)return!1}}else{if(2*q>=N&&("north"===r||"south"===r))return!1;if(2*q>=X&&("east"===r||"west"===r))return!1}if(b({x:E.x-G,y:E.y-G,width:q,height:q},Q)){if(g.$10l!==r){var H=180*g.$7l/F,l="";H>=337.5||22.5>H?l="north":H>=22.5&&67.5>H?l="northeast":H>=67.5&&112.5>H?l="east":H>=112.5&&157.5>H?l="southeast":H>=157.5&&202.5>H?l="south":H>=202.5&&247.5>H?l="southwest":H>=247.5&&292.5>H?l="west":H>=292.5&&337.5>H&&(l="northwest");var c=qo.indexOf(l),l=qo[v-(1-c)+8];switch(l){case"northwest":g.$12l="nwse-resize";break;case"northeast":g.$12l="nesw-resize";break;case"southwest":g.$12l="nesw-resize";break;case"southeast":g.$12l="nwse-resize";break;case"north":g.$12l="ns-resize";break;case"east":g.$12l="ew-resize";break;case"south":g.$12l="ns-resize";break;case"west":g.$12l="ew-resize"}g.$10l=r}return!0}return!1},$42l:function(g,O,W,t,A){var e,M=this,m=M.gv,j=m.getEditPointSize(),F=j/m.getZoom(),T=-1,v={x:O.x,y:O.y,width:0,height:0},c=function(H){"shape"===A?M._shape=g:M._edge=g,M._removePointIndex=H},J=function(i){"shape"===A?M._shape=g:M._edge=g,M.$13l=i,M.$12l="crosshair"};for(x(v,F/2),T=W.length-1,e=t.size()-1;e>=0;e--){var u=t.get(e);if(1===u||2===u)T-=1;else if(3===u){var h=W[T-1];if(b(v,h))return J(T-1),!0;T-=2}else if(4===u){var S=W[T-1],Y=W[T-2];if(b(v,S))return J(T-1),!0;if(b(v,Y))return J(T-2),!0;T-=3}}for(T=W.length-1,e=t.size()-1;e>=0;e--){var u=t.get(e),k=W[T];if(b(v,k))return c(T),J(T),!0;1===u||2===u?T-=1:3===u?T-=2:4===u&&(T-=3)}return!1},$41l:function(W,s,q,J,h){var t=this,d=t.gv,O=-1,c=0,V={x:s.x,y:s.y,width:0,height:0},H=function(V,J){t._hoverSegmentIndex=J,t._lp=s,"shape"===h?t._shape=W:t._edge=W};for(x(V,d.getSegmentHoverWidth()/2/d.getZoom()),W instanceof j&&W.isClosePath()&&J.indexOf(5)<0&&(J=new D(J._as),J.add(5));c<J.size();c++){var I=J.get(c);if(1===I){var n=q[O],m=q[O+1];if(n){var y=Or(new qr(n.x,n.y),new qr(m.x,m.y),new qr(V.x,V.y),new qr(V.x+V.width,V.y+V.height));if(y.$62l===K&&y.points.length>0)return H(y,c),!0}O+=1}else if(2===I){var n=q[O],m=q[O+1],y=Or(new qr(n.x,n.y),new qr(m.x,m.y),new qr(V.x,V.y),new qr(V.x+V.width,V.y+V.height));if(y.$62l===K&&y.points.length>0)return H(y,c),!0;O+=1}else if(3===I){var n=q[O],T=q[O+1],L=q[O+2],y=gh(new qr(n.x,n.y),new qr(T.x,T.y),new qr(L.x,L.y),new qr(V.x,V.y),new qr(V.x+V.width,V.y+V.height));if(y.$62l===K)return H(y,c),!0;O+=2}else if(4===I){var n=q[O],$=q[O+1],z=q[O+2],L=q[O+3],y=so(new qr(n.x,n.y),new qr($.x,$.y),new qr(z.x,z.y),new qr(L.x,L.y),new qr(V.x,V.y),new qr(V.x+V.width,V.y+V.height));if(y.$62l===K)return H(y,c),!0;O+=3}else if(5===I){var n=q[O],m=q[0];if(n){var y=Or(new qr(n.x,n.y),new qr(m.x,m.y),new qr(V.x,V.y),new qr(V.x+V.width,V.y+V.height));if(y.$62l===K&&y.points.length>0)return H(y,c),!0}}}return!1},addShapePoint:function(R,_,z){var p=this,v=p.gv,f=v.dm();if(f.beginTransaction(),0===arguments.length&&(R=p._shape||p._edge,_=p._hoverSegmentIndex,z=p._lp),R instanceof j||R instanceof i){var X=Ec(R,v.getDataUI(R),_);if(!isNaN(_)&&z&&!isNaN(X)){var k=z;if(R instanceof j){var n=R.p(),e=R.getRotation(),Z=R.toSegments();Z&&Z.size()||(Z=co(R.getPoints())),R.isClosePath()&&Z.indexOf(5)<0&&(Z=new D(Z._as),Z.add(5));var O=Z.get(_),Q="addPoint",w="removePointAt";if(2===O||1===O){var H={x:k.x,y:k.y};Z.add(O,_),H=Dm(n,H.x-n.x,H.y-n.y,-e),R[Q](H,X+1)}else if(3===O){var N=R.getPoints(),c=N.get(X),l=N.get(X+2),H={x:k.x,y:k.y};H=Dm(n,H.x-n.x,H.y-n.y,-e);var C=Qo(c,H),T=Qo(H,l);Z.removeAt(_),Z.add(3,_),Z.add(3,_),R.setPoint(X+1,H),R[Q](T,X+2),R[Q](C,X+1)}else if(4===O){var N=R.getPoints(),c=N.get(X),l=N.get(X+3),H={x:k.x,y:k.y};H=Dm(n,H.x-n.x,H.y-n.y,-e);var C=Il(c,H),T=xd(c,H),b=Il(H,l),G=xd(H,l);Z.removeAt(_),Z.add(4,_),Z.add(4,_),R[w](X+1),R[w](X+1),R[Q](H,X+1),R[Q](G,X+2),R[Q](b,X+2),R[Q](T,X+1),R[Q](C,X+1)}else if(5===O){var H={x:k.x,y:k.y};Z.add(2,_),H=Dm(n,H.x-n.x,H.y-n.y,-e),R[Q](H,X+1)}R.isClosePath()&&Z.remove(5),R.setSegments(Z);var g=R.getWidth(),K=R.getHeight(),P=R.p().x-g/2,S=R.p().y-K/2;P-=n.x,S-=n.y;var u=Cg(R,{x:P,y:S,width:g,height:K},e,n);R.p(u.x,u.y)}else if(R instanceof i){if("points"!==R.s("edge.type"))return f.endTransaction(),void 0;var N=R.s("edge.points");Z=R.s("edge.segments"),N=Ol(v.getDataUI(R),N),Z&&Z.size()||(Z=co(N)),Z=new D(Z._as.slice(0)),N=new D(N._as.slice(0));var O=Z.get(_);if(2===O||1===O){var H={x:k.x,y:k.y};Z.add(O,_),N.add(H,X+1)}else if(3===O){var c=N.get(X),l=N.get(X+2),H={x:k.x,y:k.y},C=Qo(c,H),T=Qo(H,l);Z.removeAt(_),Z.add(3,_),Z.add(3,_),N.set(X+1,H),N.add(T,X+2),N.add(C,X+1)}else if(4===O){var c=N.get(X),l=N.get(X+3),H={x:k.x,y:k.y},C=Il(c,H),T=xd(c,H),b=Il(H,l),G=xd(H,l);Z.removeAt(_),Z.add(4,_),Z.add(4,_),N.removeAt(X+1),N.removeAt(X+1),N.add(H,X+1),N.add(G,X+2),N.add(b,X+2),N.add(T,X+1),N.add(C,X+1)}R.s("edge.points",Vo(N)),R.s("edge.segments",Z)}}}f.endTransaction()},removeShapePoint:function(I,z){var O=this,U="removeAt",G=O.gv,L=G.dm();if(L.beginTransaction(),0===arguments.length&&(I=O._shape||O._edge,z=O._removePointIndex),z>=0&&(I instanceof j||I instanceof i)){var X=Hb(I,O.gv.getDataUI(I),z),E=z;if(I instanceof j){var g=I.p(),S=I.toSegments();S&&S.size()||(S=co(I.getPoints()));var W=S.get(X),r="removePointAt";if(1===W&&0===E)if(I.getPoints().size()>1){var n=S.get(X+1);S[U](X+1),3===n?I[r](E+1):4===n&&(I[r](E+2),I[r](E+1)),I[r](E)}else I.dm().remove(I);else 2===W||1===W?(S[U](X),I[r](E)):3===W?(S[U](X),I[r](E),I[r](E-1)):4===W&&(S[U](X),I[r](E),I[r](E-1),I[r](E-2));I.setSegments(S);var k=I.getWidth(),m=I.getHeight(),x=I.p().x-k/2,a=I.p().y-m/2;x-=g.x,a-=g.y;var q=Cg(I,{x:x,y:a,width:k,height:m},I.getRotation(),g);I.p(q.x,q.y)}else if(I instanceof i){if("points"!==I.s("edge.type"))return L.endTransaction(),void 0;var N=I.s("edge.points");if(S=I.s("edge.segments"),N&&(N=Ol(O.gv.getDataUI(I),N),S&&S.size()||(S=co(N))),0===z||z===N.size()-1)return L.endTransaction(),void 0;S=new D(S._as.slice(0)),N=new D(N._as.slice(0));var W=S.get(X);2===W||1===W?(S[U](X),N[U](E)):3===W?(S[U](X),N[U](E),N[U](E-1)):4===W&&(S[U](X),N[U](E),N[U](E-1),N[U](E-2)),I.s("edge.segments",S),I.s("edge.points",Vo(N))}}L.endTransaction()},changeShapeSegment:function(h,p,d){var C=this,a=C.gv,t=a.dm();if(t.beginTransaction(),1!==arguments.length||isNaN(h)||(d=h,h=C._shape||C._edge,p=C._hoverSegmentIndex),h instanceof j||h instanceof i){var G=Ec(h,C.gv.getDataUI(h),p);if(!isNaN(p)&&!isNaN(G))if(h instanceof j){var S=h.p(),o=h.toSegments();o&&o.size()||(o=co(h.getPoints()));var M=o.get(p),s=h.toPoints();if(1===d||2===d)1===M||2===M?o.set(p,d):3===M?(o.set(p,d),s.removeAt(G+1)):4===M&&(o.set(p,d),s.removeAt(G+1),s.removeAt(G+1));else if(3===d){var R=function(){var W=s.get(G),v=s.get(G+1),J=Qo(W,v);o.set(p,3),s.add(J,G+1)};2===M||1===M?R():4===M&&(s.removeAt(G+1),s.removeAt(G+1),R())}else if(4===d){var v=function(){var B=s.get(G),m=s.get(G+1),K=Il(B,m),S=xd(B,m);o.set(p,4),s.add(K,G+1),s.add(S,G+2)};2===M||1===M?v():3===M&&(s.removeAt(G+1),v())}h.setSegments(o),h.setPoints(s);var r=h.getWidth(),U=h.getHeight(),f=h.p().x-r/2,J=h.p().y-U/2;f-=S.x,J-=S.y;var W=new Cg(h,{x:f,y:J,width:r,height:U},h.getRotation(),S);h.p(W.x,W.y)}else if(h instanceof i){if("points"!==h.s("edge.type"))return t.endTransaction(),void 0;var s=h.s("edge.points");o=h.s("edge.segments"),s&&(s=Ol(C.gv.getDataUI(h),s),o&&o.size()||(o=co(s))),o=new D(o._as.slice(0)),s=new D(s._as.slice(0));var M=o.get(p);if(1===d||2===d)1===M||2===M?o.set(p,d):3===M?(o.set(p,d),s.removeAt(G+1)):4===M&&(o.set(p,d),s.removeAt(G+1),s.removeAt(G+1));else if(3===d){var R=function(){var x=s.get(G),h=s.get(G+1),d=Qo(x,h);o.set(p,3),s.add(d,G+1)};2===M||1===M?R():4===M&&(s.removeAt(G+1),s.removeAt(G+1),R())}else if(4===d){var v=function(){var J=s.get(G),M=s.get(G+1),Q=Il(J,M),y=xd(J,M);o.set(p,4),s.add(Q,G+1),s.add(y,G+2)};2===M||1===M?v():3===M&&(s.removeAt(G+1),v())}h.s("edge.points",Vo(s)),h.s("edge.segments",o)}}t.endTransaction()},getDefaultSegments:function(c){var D=this.gv,o=D.getDataUI(c);if(c instanceof i){var L=c.s("edge.points");return L=Ol(o,L),co(L)}if(c instanceof j){var L=c.getPoints(),z=c.getSegments();return z&&z.size()>0?z:co(L)}},$43l:function(B){var C=this;B&&(C.$5l=1),C._68I=1,C._42()},_42:function(){var S=this;if(S._68I){delete S._68I;var e=S.gv,o=S.$5l,p=e.getZoom(),M=e.getEditPointSize(),b=M/2,d=new D,f=S._view,F=S._edge,T=S._shape,C=f.getContext("2d"),P=e.tx(),A=e.ty(),k=y,J=e.getEditPointBackground(),w=e.getControlPointBackground(),m=e.getControlPointBorderColor(),K=e.getEditPointBorderColor(),a=e.getEditRectBorderColor(),v=e.getDirectionLineColor(),U=e.getSegmentHoverColor(),I=e.getSnapPointBorderColor(),u=e.getJoinPointBackground(),W=e.getJoinPointBorderColor(),X=e.getSegmentHoverWidth(),H=[5,5],$=e.getEditRectBorderStyle();gi(e,function(x){e.isSelected(x)&&e.isVisible(x)&&d.add(x)}),C.clearRect(0,0,t(f.width),t(f.height)),C.save(),G.translateAndScale(C,P,A,1);var V=y,B={x:0,y:0,width:0,height:0},Y=0,O=0,R=0,_=0,c=0,l=0,hi=0,Hc=0,ic=0,Po=0,$e=[];if(o?(delete S.$6l,delete S.$8l,delete S.$7l,delete S.$16l,delete S.$23l):(V=S.$6l,k=S.$7l),delete S.$68l,delete S.$69l,delete S.$71l,delete S.$70l,delete S.$82l,delete S.$83l,delete S._pointElevationHelperPoint,delete S.$90l,delete S.$91l,delete S.$75l,delete S.$74l,d.each(function(S){var t=e.getDataUI(S);if(t){var F=t._55O;if(e.isEditable(S))F._56O&&S instanceof n&&O++,$e.push(S),F._42O&&S instanceof n&&Y++,e.isHelperEditable(S,"host")&&_++,e.isHelperEditable(S,"parent")&&R++,e.isHelperEditable(S,"remove")&&c++,e.isHelperEditable(S,"edge")&&l++,e.isHelperEditable(S,"source")&&hi++,e.isHelperEditable(S,"target")&&Hc++,e.isHelperEditable(S,"elevation")&&ic++,e.isHelperEditable(S,"tall")&&Po++;else if(S instanceof N&&S.isExpanded()){var x=!0,I=e.getEditableFunc();I&&(x=I(S)),x&&(e.isHelperEditable(S,"host")&&_++,e.isHelperEditable(S,"parent")&&R++,e.isHelperEditable(S,"remove")&&c++,e.isHelperEditable(S,"edge")&&l++,e.isHelperEditable(S,"source")&&hi++,e.isHelperEditable(S,"target")&&Hc++,e.isHelperEditable(S,"elevation")&&ic++,e.isHelperEditable(S,"tall")&&Po++,$e.push(S))}}}),C.beginPath(),C.lineWidth=1,C.strokeStyle=e.getNodeBorderColor(),$e.forEach(function(g){var K=e.getDataUI(g),q=K._55O;if(o)if(k==y&&(k=g instanceof i?0:g instanceof N&&g.isExpanded()?0:g.getRotation(),S.$7l=k),V==y){var v,L,s;if(g instanceof N&&g.isExpanded()||g instanceof i){var l=e.getDataUIBounds(g);L=l.width,s=l.height,v={x:l.x+L/2,y:l.y+s/2}}else v=g.p(),L=g.getWidth(),s=g.getHeight();V={x:v.x,y:v.y,width:0,height:0},B.x=v.x-L/2,B.y=v.y-s/2,B.width=L,B.height=s,V=Q(V,B)}else{var v,L,s,D,M=V.x+V.width/2,z=V.y+V.height/2,w={x:M,y:z};if(g instanceof N&&g.isExpanded()||g instanceof i){D=0;var l=e.getDataUIBounds(g);L=l.width,s=l.height,v={x:l.x+L/2,y:l.y+s/2}}else v=g.p(),L=g.getWidth(),s=g.getHeight(),D=g.getRotation();var b={x:v.x-L/2,y:v.y-s/2,width:L,height:s},a={x:b.x,y:b.y},u={x:b.x+b.width,y:b.y},X={x:b.x,y:b.y+b.height},_={x:b.x+b.width,y:b.y+b.height},a=Dm(v,a.x-v.x,a.y-v.y,D),X=Dm(v,X.x-v.x,X.y-v.y,D),_=Dm(v,_.x-v.x,_.y-v.y,D),u=Dm(v,u.x-v.x,u.y-v.y,D),x=-k,H=Dm(w,a.x-w.x,a.y-w.y,x),j=Dm(w,u.x-w.x,u.y-w.y,x),t=Dm(w,X.x-w.x,X.y-w.y,x),E=Dm(w,_.x-w.x,_.y-w.y,x),c=h([H,j,t,E]);V=Q(V,c),V.x-=M,V.y-=z;var m=Cg(y,V,k,w);V.x=m.x-V.width/2,V.y=m.y-V.height/2}if(Y>1&&e.isEditable(g)&&e.isRectEditable(g)&&g instanceof n){var O=g.getRect(),W=q.$45l,J=Em(W[0],p),I=Em(W[2],p),f=Em(W[4],p),d=Em(W[6],p);g.getRotation()?(C.moveTo(J.x,J.y),C.lineTo(I.x,I.y),C.lineTo(f.x,f.y),C.lineTo(d.x,d.y),C.lineTo(J.x,J.y)):C.rect(O.x*p,O.y*p,O.width*p,O.height*p)}}),C.stroke(),V){S.$6l=s(V),x(V,e.getEditRectPadding()/p);var gd={x:V.x+V.width/2,y:V.y+V.height/2},qk=Be(gd,V.width,V.height,k),Oe=qk[0],qf=qk[1],qg=qk[2],Hj=qk[3],Ng=qk[4],Io=qk[5],Sm=qk[6],Yp=qk[7];if(Oe=Em(qk[0],p),qf=Em(qk[1],p),qg=Em(qk[2],p),Hj=Em(qk[3],p),Ng=Em(qk[4],p),Io=Em(qk[5],p),Sm=Em(qk[6],p),Yp=Em(qk[7],p),S.$8l=V,Y>0&&(S.$16l=[Oe,Ng,qf,Io,Hj,Sm,qg,Yp],C.beginPath(),C.lineWidth=1,C.strokeStyle=a,"dashed"===$&&C.setLineDash&&C.setLineDash(H),C.moveTo(Oe.x,Oe.y),C.lineTo(qf.x,qf.y),C.lineTo(Hj.x,Hj.y),C.lineTo(qg.x,qg.y),C.lineTo(Oe.x,Oe.y),C.stroke(),"dashed"===$&&C.setLineDash&&C.setLineDash([])),C.beginPath(),C.lineWidth=1,C.fillStyle=J,C.strokeStyle=K,Y>0){var Ul=Io.x-Yp.x,Xi=Io.y-Yp.y,Uc=z(Ul*Ul+Xi*Xi),vg=Ng.x-Sm.x,Cr=Ng.y-Sm.y,hc=z(vg*vg+Cr*Cr),ng=2*M;if(e.isDirectionEditable&&1===$e.length){var tr=$e[0],xf=e.getDataUI(tr),sd=xf._55O,lj=e.isDirectionEditable.bind(e);if(sd._42O){var rk,Xm,tb,xl;lj(tr,"northwest")&&(rk=!0,C.rect(Oe.x-b,Oe.y-b,M,M)),lj(tr,"northeast")&&(Xm=!0,C.rect(qf.x-b,qf.y-b,M,M)),lj(tr,"southwest")&&(tb=!0,C.rect(qg.x-b,qg.y-b,M,M)),lj(tr,"southeast")&&(xl=!0,C.rect(Hj.x-b,Hj.y-b,M,M)),lj(tr,"north")&&(rk&&Xm?Uc>ng&&C.rect(Ng.x-b,Ng.y-b,M,M):C.rect(Ng.x-b,Ng.y-b,M,M)),lj(tr,"south")&&(xl&&tb?Uc>ng&&C.rect(Sm.x-b,Sm.y-b,M,M):C.rect(Sm.x-b,Sm.y-b,M,M)),lj(tr,"west")&&(tb&&rk?hc>ng&&C.rect(Yp.x-b,Yp.y-b,M,M):C.rect(Yp.x-b,Yp.y-b,M,M)),lj(tr,"east")&&(xl&&Xm?hc>ng&&C.rect(Io.x-b,Io.y-b,M,M):C.rect(Io.x-b,Io.y-b,M,M))}}else Uc>ng&&(C.rect(Ng.x-b,Ng.y-b,M,M),C.rect(Sm.x-b,Sm.y-b,M,M)),hc>ng&&(C.rect(Io.x-b,Io.y-b,M,M),C.rect(Yp.x-b,Yp.y-b,M,M)),C.rect(Oe.x-b,Oe.y-b,M,M),C.rect(qf.x-b,qf.y-b,M,M),C.rect(qg.x-b,qg.y-b,M,M),C.rect(Hj.x-b,Hj.y-b,M,M)}if(O>0){var od=S.$23l=Dm(Ng,0,2*-M,k);C.moveTo(od.x+b,od.y),C.arc(od.x,od.y,b,0,Z,!1)}C.fill(),C.stroke(),S.$40l&&S.$44l(C,V,k);var gh,oj,ol=e.getLeftTopHelpers(),cd=e.getRightTopHelpers(),Sg=e.getLeftBottomHelpers(),Pr=e.getRightBottomHelpers(),Xo=e.getEdgeHelpers(),gl=e.getEditHelperSize(),se=gl/2,Vk=function(h,U,j,T){"leftTop"===U?(gh=V.x*p-gl-b-("h"===T?j*(gl+b):0)-1,oj=V.y*p-gl-b-("v"===T?j*(gl+b):0)-1):"rightTop"===U?(gh=(V.x+V.width)*p+b+("h"===T?j*(gl+b):0)+1,oj=V.y*p-gl-b-("v"===T?j*(gl+b):0)-1):"leftBottom"===U?(gh=V.x*p-gl-b-("h"===T?j*(gl+b):0)-1,oj=(V.y+V.height)*p+b+("v"===T?j*(gl+b):0)+1):"rightBottom"===U&&(gh=(V.x+V.width)*p+b+("h"===T?j*(gl+b):0)+1,oj=(V.y+V.height)*p+b+("v"===T?j*(gl+b):0)+1);var Y=gh+se,a=oj+se,s=(V.x+V.width/2)*p,O=(V.y+V.height/2)*p,v=Dm({x:s,y:O},Y-s,a-O,k);if("host"===h){if(_>0)return S.$77l(C,k,v),!0}else if("edge"===h){if(l>0)return S.$80l(C,k,v),!0}else if("remove"===h){if(c>0)return $e&&1===$e.length&&$e[0]instanceof i?S.$81l(C,k,{x:s+gl/2+5,y:O}):S.$81l(C,k,v),!0}else if("parent"===h){if(R>0)return $e&&1===$e.length&&$e[0]instanceof i?S.$76l(C,k,{x:s-gl/2-5,y:O}):S.$76l(C,k,v),!0}else if("elevation"===h){if(ic>0)return S.$85l(C,k,v),!0}else if("tall"===h){if(Po>0)return S.$86l(C,k,v),!0}else if("source"===h||"target"===h){var Q=$e[0],N=e.getDataUI(Q),W=tn(N,!0),H=W[0],y=W[1];if(hi&&"source"===h)return S.$84l(C,V,H,!0,Q.isLooped(),U,j,T),!0;if(Hc&&"target"===h)return S.$84l(C,V,y,!1,Q.isLooped(),U,j,T),!0}};if(ol&&ol.length>0){var ms=0;ol.forEach(function($){Vk($,"leftTop",ms,e.getLeftTopHelpersAlign()||"h")&&ms++})}if(cd&&cd.length>0){var ms=0;cd.forEach(function(L){Vk(L,"rightTop",ms,e.getRightTopHelpersAlign()||"h")&&ms++})}if(Sg&&Sg.length>0){var ms=0;Sg.forEach(function(l){Vk(l,"leftBottom",ms,e.getLeftBottomHelpersAlign()||"h")&&ms++})}if(Pr&&Pr.length>0){var ms=0;Pr.forEach(function(z){Vk(z,"rightBottom",ms,e.getRightBottomHelpersAlign()||"h")&&ms++})}if(Xo&&Xo.length>0&&((hi||Hc)&&$e&&1===$e.length&&$e[0]instanceof i?!0:!1)){var ms=0;Xo.forEach(function(A){Vk(A,"edge",ms,"h")&&ms++})}if(S.$72l){var Uh,Zc=S.$67l,Nf=S.$68l,ds=S.$69l,cn=(S.$71l,S.$70l),kk=S.$82l,Sj=S.$83l;if(1===Zc?Uh=Nf:2===Zc?Uh=ds:3===Zc?Uh=cn:5===Zc?Uh=kk:6===Zc&&(Uh=Sj),Uh){var Lg=e.lp(S.$72l),nq=e.getDataAt(S.$72l);if(nq&&nq instanceof n){var Rj,Pj,xh;if(S.$73l=nq,1===Zc)if(nq instanceof q.Grid)Rj=S.$75l=rq(nq,Lg);else if(nq instanceof q.Shape){xh=S.$74l=Op(nq,Lg);var mj=nq.getPoints();if(xh){var qp=xh.attachIndex,Yk=Ec(nq,e.getDataUI(nq),qp)+1,yl=Yk+1>=mj.size()?0:Yk+1,zc=mj.get(Yk),ub=mj.get(yl),kd=nq.p(),Qe=nq.getRotation();zc=Dm(kd,zc.x-kd.x,zc.y-kd.y,Qe),ub=Dm(kd,ub.x-kd.x,ub.y-kd.y,Qe),C.beginPath(),C.strokeStyle=U,C.lineWidth=X,C.moveTo(zc.x*p,zc.y*p),C.lineTo(ub.x*p,ub.y*p),C.stroke()}}Rj?Pj=Rj.rect:(Pj=g.clone(e.getDataUIBounds(nq)),g.grow(Pj,2)),C.beginPath(),C.rect(Pj.x*p,Pj.y*p,Pj.width*p,Pj.height*p),C.strokeStyle=1===Zc||4===Zc||6===Zc?r:E,C.lineWidth=2,C.setLineDash&&C.setLineDash([8,8]),C.stroke()}else delete S.$73l;Lg.x=Lg.x*p,Lg.y=Lg.y*p;var dj=Lj(Uh.x,Uh.y,Lg.x,Lg.y),oc=Dm(Uh,Lg.x-Uh.x,Lg.y-Uh.y,-dj),Zf=oc.x-Uh.x;C.save(),C.translate(Uh.x,Uh.y),C.rotate(dj),L.width=Zf,L.height=40;var jr=E;(1===Zc||4===Zc||6===Zc)&&(jr=r),L.comps[0].gradientColor=jr,g.drawImage(C,L,0,-20,Zf,40),C.restore()}}}if(d.each(function(L){var J=e.getDataUI(L);if(J){var K,P,f=J._55O,q=J._78o;if(f&&f._43O&&L instanceof j?(K=f.$15l,P=L.getSegments(),P&&P.size()||(P=co(K)),L.isClosePath()&&P.indexOf(5)<0&&(P=new D(P._as),P.add(5))):f&&q&&f._43O&&(K=L.s("edge.points"),P=L.s("edge.segments"),K=Ol(J,K),P&&P.size()||(P=co(K)),K&&(K=K._as)),K&&P){var M=0,n=P.size(),k=S._hoverSegmentIndex;K=K.slice(0);for(var d=0;d<K.length;d++)K[d]=Em(K[d],p);C.beginPath(),C.strokeStyle=v,C.lineWidth=1,M=0;for(var d=0;n>d;d++){var s=P.get(d);if(1===s||2===s)M++;else if(3===s){var V=K[M-1],N=K[M],z=K[M+1];C.moveTo(V.x,V.y),C.lineTo(N.x,N.y),C.lineTo(z.x,z.y),M+=2}else if(4===s){var V=K[M-1],G=K[M],i=K[M+1],z=K[M+2];C.moveTo(V.x,V.y),C.lineTo(G.x,G.y),C.moveTo(i.x,i.y),C.lineTo(z.x,z.y),M+=3}}if(C.stroke(),T===L||F===L&&"points"===F.s("edge.type")){C.beginPath(),M=0,C.strokeStyle=U,C.lineWidth=X;for(var d=0;n>d;d++){var s=P.get(d);if(1===s||2===s){if(k===d){var V=K[M-1],z=K[M];C.moveTo(V.x,V.y),C.lineTo(z.x,z.y);break}M++}else if(3===s){if(k===d){var V=K[M-1],N=K[M],z=K[M+1];C.moveTo(V.x,V.y),C.quadraticCurveTo(N.x,N.y,z.x,z.y);break}M+=2}else if(4===s){if(k===d){var V=K[M-1],G=K[M],i=K[M+1],z=K[M+2];C.moveTo(V.x,V.y),C.bezierCurveTo(G.x,G.y,i.x,i.y,z.x,z.y);break}M+=3}else if(5===s&&k===d){var V=K[M-1],z=K[0];C.moveTo(V.x,V.y),C.lineTo(z.x,z.y);break}}C.stroke()}C.beginPath(),M=0,C.strokeStyle=W,C.lineWidth=1,C.fillStyle=u;for(var d=0;n>d;d++){var s=P.get(d);if(1===s||2===s){var z=K[M];C.moveTo(z.x+b,z.y),C.arc(z.x,z.y,b,0,Z,!0),M++}else if(3===s){var z=K[M+1];C.moveTo(z.x+b,z.y),C.arc(z.x,z.y,b,0,Z,!0),M+=2}else if(4===s){var z=K[M+2];C.moveTo(z.x+b,z.y),C.arc(z.x,z.y,b,0,Z,!0),M+=3}}C.fill(),C.stroke(),C.beginPath(),M=0,C.strokeStyle=m,C.lineWidth=1,C.fillStyle=w;for(var d=0;n>d;d++){var s=P.get(d);if(1===s||2===s)M++;else if(3===s){var N=K[M];C.moveTo(N.x+b,N.y),C.arc(N.x,N.y,b,0,Z,!0),M+=2}else if(4===s){var G=K[M],i=K[M+1];C.moveTo(G.x+b,G.y),C.arc(G.x,G.y,b,0,Z,!0),C.moveTo(i.x+b,i.y),C.arc(i.x,i.y,b,0,Z,!0),M+=3}}if(C.fill(),C.stroke(),C.beginPath(),M=0,C.strokeStyle=I,C.lineWidth=2,(T===L||F===L)&&S.$9l!=y){var z=K[S.$9l];C.moveTo(z.x+b,z.y),C.arc(z.x,z.y,b,0,Z,!0),C.stroke()}}}}),S.$87l&&e.sm().contains(S.$87l)){var ib,bf=S.$87l,gg=S.$88l,gl=e.getEditHelperSize(),se=gl/2;if(e.isHelperEditable(bf,"pointElevation"))if(bf instanceof j){var Np=bf.getPosition();ib=g.clone(bf.getPoints().get(gg)),ib=Dm({x:Np.x,y:Np.y},ib.x-Np.x,ib.y-Np.y,bf.getRotation()),ib.x*=p,ib.y*=p,C.translate(ib.x,ib.y),g.drawImage(C,g.getImage("xeditinteractor_elevationIcon"),se,-se,gl,gl),C.translate(-ib.x,-ib.y),S._pointElevationHelperPoint={x:ib.x+gl,y:ib.y}}else if(bf instanceof i){var zn=Ol(e.getDataUI(bf),bf.s("edge.points")),ib=g.clone(zn.get(gg));ib.x*=p,ib.y*=p,C.translate(ib.x,ib.y),g.drawImage(C,g.getImage("xeditinteractor_elevationIcon"),se,-se,gl,gl),C.translate(-ib.x,-ib.y),S._pointElevationHelperPoint={x:ib.x+gl,y:ib.y}}}C.restore(),S.$5l=0}},$89l:function(r,G,u,b){r.save();var F=this,_=F.gv,X=_.getEditHelperSize(),A=X/2;r.beginPath(),r.translate(u.x,u.y),r.rotate(G),g.drawImage(r,b,-A,-A,X,X),r.restore()},$85l:function(v,P,L){var z=this;z.$90l=L,z.$89l(v,P,L,g.getImage("xeditinteractor_elevationIcon"))},$86l:function(J,j,$){var S=this;S.$91l=$,S.$89l(J,j,$,g.getImage("xeditinteractor_tallIcon"))},$77l:function(r,t,Z){var x=this;x.$68l=Z,x.$89l(r,t,Z,g.getImage("xeditinteractor_hostIcon"))},$80l:function(u,Z,q){var p=this;p.$70l=q,p.$89l(u,Z,q,g.getImage("xeditinteractor_edgeIcon"))},$81l:function(C,c,v){var u=this;u.$71l=v,u.$89l(C,c,v,g.getImage("xeditinteractor_removeIcon"))},$76l:function(J,_,h){var Y=this;Y.$69l=h,Y.$89l(J,_,h,g.getImage("xeditinteractor_parentIcon"))},$84l:function(r,e,v,G,n){var R,y=this,j=y.gv,B=j.getZoom(),z=j.getEditHelperSize(),F=z/2;v.x*=B,v.y*=B,n&&(G?v.x-=F+5:v.x+=F+5),v.y-=z-2,G?(y.$82l=v,R=g.getImage("xeditinteractor_sourceIcon")):(y.$83l=v,R=g.getImage("xeditinteractor_targetIcon")),r.beginPath(),r.translate(v.x,v.y),g.drawImage(r,R,-F,-F,z,z),r.translate(-v.x,-v.y)},$44l:function(p,c,O){p.save();var t=this.gv.getZoom(),U=z(e(c.width,2)+e(c.height,2))/2*t+10,k=U,s=k+8,x=k+18,h=O,r=c.x+c.width/2,B=c.y+c.height/2;p.translate(r*t,B*t),p.beginPath(),p.strokeStyle="rgb(150, 150, 150)";for(var R=0,n=0,W=0,Y=0,P=0,Z=0;360>Z;Z++)R=Z*F/180,0===Z%5&&(n=f(R)*k,W=J(R)*k,Y=f(R)*s,P=J(R)*s,p.moveTo(n,W),p.lineTo(Y,P)),0===Z%45&&(n=f(R)*k,W=J(R)*k,Y=f(R)*x,P=J(R)*x,p.moveTo(n,W),p.lineTo(Y,P));p.stroke(),p.beginPath(),p.rotate(-A),p.beginPath(),p.fillStyle="rgba(255, 0, 0, 0.1)",p.strokeStyle="rgb(157, 157, 157)",p.moveTo(0,0),p.arc(0,0,x,0,O,!1),p.fill(),p.beginPath(),p.moveTo(0+x,0),p.arc(0,0,x,0,O,!1),p.stroke(),p.rotate(A),p.font="bold 12px Verdana, Arial";var M=20*J(h),I=20*f(h),Q=d(180*h/F)+"°";p.textAlign="center",p.textBaseline="middle",p.beginPath();var T=p.measureText("365.°").width;p.fillStyle="white",p.rect(M-T/2,-I-10,T,20),p.fill(),p.beginPath(),p.fillStyle="rgb(79,79,79)",p.fillText(Q,M,-I),p.restore()}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);