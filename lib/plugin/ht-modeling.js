!function(q,U,b){"use strict";var o="ht",r=q[o],a=null,N=Math,_=N.PI,h=N.cos,l=N.sin,m=N.abs,H=N.max,w=N.sqrt,n=1e-5,c=r.Default,Z=c.def,g=c.startAnim,K=c.createMatrix,s=c.transformVec,Y=c.getInternal(),B=Y.addMethod,t=Y.superCall,E=Y.toPointsArray,I=Y.createNormals,M=Y.toFloatArray,J=Y.glMV,V=Y.batchShape,G=Y.createNodeMatrix,T=Y.getFaceInfo,R=Y.transformAppend,S=Y.drawFaceInfo,O=Y.createAnim,F=Y.cube(),z=F.is,C=F.vs,j=F.uv,D=Y.ui(),u=r.Node,x=r.Shape,k="h",e="v",v="front",Q="back",W="left",A="right",P="top",L="bottom",$="dw.expanded",f=".expanded",d="dw.angle",p=".angle",y=function(c,S,r){Z(o+"."+c,S,r)},X=function(x,C,l){l?x.push(C.x,C.y):x.push(C.x,C.y,C.z)},i=[1,0,0],Og=function(f,I,e,q){var P,F,b,o,V=0,y=[];if(q)for(P=q.length;P>V;V+=3)F=q[V],b=q[V+1],o=q[V+2],y.push(new xh([new Bq([I[3*F],I[3*F+1],I[3*F+2]],i,e?[e[2*F],e[2*F+1],0]:a),new Bq([I[3*b],I[3*b+1],I[3*b+2]],i,e?[e[2*b],e[2*b+1],0]:a),new Bq([I[3*o],I[3*o+1],I[3*o+2]],i,e?[e[2*o],e[2*o+1],0]:a)],f));else for(P=I.length;P>V;V+=3)F=V,b=V+1,o=V+2,y.push(new xh([new Bq([I[3*F],I[3*F+1],I[3*F+2]],i,e?[e[2*F],e[2*F+1],0]:a),new Bq([I[3*b],I[3*b+1],I[3*b+2]],i,e?[e[2*b],e[2*b+1],0]:a),new Bq([I[3*o],I[3*o+1],I[3*o+2]],i,e?[e[2*o],e[2*o+1],0]:a)],f));return y},_m=[W,v,A,Q,P,L],Jk=_m.concat("csg"),ri=[0,6,12,18,24,30],Cg=function(x,n,q){for(var H=G(x),Z=[],t=0;6>t;t++)for(var A=_m[t],T=ri[t],M=q?n.getFaceUv(x,A):a,V=q?n.getFaceUvScale(x,A):a,S=q?n.getFaceUvOffset(x,A):a,X=0;2>X;X++){var F,h,D,p=z[T+3*X],f=z[T+3*X+1],$=z[T+3*X+2];if(q){if(M){var P=8*t;F=[M[2*p-P],M[2*p+1-P],0],h=[M[2*f-P],M[2*f+1-P],0],D=[M[2*$-P],M[2*$+1-P],0]}else F=[j[2*p],j[2*p+1],0],h=[j[2*f],j[2*f+1],0],D=[j[2*$],j[2*$+1],0];V&&(F[0]*=V[0],F[1]*=V[1],h[0]*=V[0],h[1]*=V[1],D[0]*=V[0],D[1]*=V[1]),S&&(F[0]+=S[0],F[1]+=S[1],h[0]+=S[0],h[1]+=S[1],D[0]+=S[0],D[1]+=S[1])}Z.push(new xh([new Bq(s([C[3*p],C[3*p+1],C[3*p+2]],H),i,F),new Bq(s([C[3*f],C[3*f+1],C[3*f+2]],H),i,h),new Bq(s([C[3*$],C[3*$+1],C[3*$+2]],H),i,D)],x))}return jo.$15n(Z)},Yi=function(Y,y){var f,b=Y.data.getAttaches();if(b&&b.each(function(F){F instanceof Yr&&F.s("attach.operation")&&(f||(f=[]),f.push(F))}),f){var A;_m.forEach(function(t){var b=Og(t,Y[t].vs,Y[t].tuv);A=A?A.concat(b):b}),A=jo.$15n(A),f.forEach(function(f){var m=f.s("attach.operation");A[m]&&(A=A[m](Cg(f,Y.gv,Y.csg.tuv)))}),_m.forEach(function(N){N=Y[N],N.vs=[],N.tuv&&(N.tuv=[])}),A.$19n().forEach(function(p){var b=p.$10n;if(b instanceof Yr){if(b.s("attach.cull"))return;b="csg"}for(var G=Y[b],N=G.vs,S=G.tuv,z=p.$9n,s=2;s<z.length;s++)X(N,z[0].$24n),X(N,z[s-1].$24n),X(N,z[s].$24n),S&&(X(S,z[0].uv,!0),X(S,z[s-1].uv,!0),X(S,z[s].uv,!0))})}Jk.forEach(function(B){var G=Y[B];G.visible&&G.vs.length?(G.ns=I(G.vs),M(G,"vs"),M(G,"tuv")):delete Y[B]}),y&&(V(Y,a,y),Y.clear())};B(c,{createFrameModel:function(n,s,w,u){n=n==a?.07:n,s=s==a?n:s,w=w==a?n:w,u=u?u:{};var S=u.top,v=u.bottom,z=u.left,E=u.right,$=u.front,A=u.back,J=[],_=[];return $===!0?(J.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),_.push(0,0,0,1,1,1,1,1,1,0,0,0)):$===!1||(J.push(-.5,.5,.5,-.5,-.5,.5,-.5+n,-.5,.5,-.5+n,-.5,.5,-.5+n,.5,.5,-.5,.5,.5,.5-n,.5,.5,.5-n,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-n,.5,.5,-.5+n,.5,.5,-.5+n,.5-s,.5,.5-n,.5-s,.5,.5-n,.5-s,.5,.5-n,.5,.5,-.5+n,.5,.5,-.5+n,-.5+s,.5,-.5+n,-.5,.5,.5-n,-.5,.5,.5-n,-.5,.5,.5-n,-.5+s,.5,-.5+n,-.5+s,.5),_.push(0,0,0,1,n,1,n,1,n,0,0,0,1-n,0,1-n,1,1,1,1,1,1,0,1-n,0,n,0,n,s,1-n,s,1-n,s,1-n,0,n,0,n,1-s,n,1,1-n,1,1-n,1,1-n,1-s,n,1-s)),A===!0?(J.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),_.push(1,0,0,1,1,1,0,1,1,0,0,0)):A===!1||(J.push(-.5,.5,-.5,-.5+n,-.5,-.5,-.5,-.5,-.5,-.5+n,-.5,-.5,-.5,.5,-.5,-.5+n,.5,-.5,.5-n,.5,-.5,.5,-.5,-.5,.5-n,-.5,-.5,.5,-.5,-.5,.5-n,.5,-.5,.5,.5,-.5,-.5+n,.5,-.5,.5-n,.5-s,-.5,-.5+n,.5-s,-.5,.5-n,.5-s,-.5,-.5+n,.5,-.5,.5-n,.5,-.5,-.5+n,-.5+s,-.5,.5-n,-.5,-.5,-.5+n,-.5,-.5,.5-n,-.5,-.5,-.5+n,-.5+s,-.5,.5-n,-.5+s,-.5),_.push(1,0,1-n,1,1,1,1-n,1,1,0,1-n,0,n,0,0,1,n,1,0,1,n,0,0,0,1-n,0,n,s,1-n,s,n,s,1-n,0,n,0,1-n,1-s,n,1,1-n,1,n,1,1-n,1-s,n,1-s)),z===!0?(J.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),_.push(0,0,0,1,1,1,1,1,1,0,0,0)):z===!1||(J.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+w,-.5,-.5,-.5+w,-.5,.5,-.5+w,-.5,.5,-.5,-.5,.5,.5-w,-.5,-.5,.5-w,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-w,-.5,.5,-.5+w,-.5,.5-s,-.5+w,-.5,.5-s,.5-w,-.5,.5-s,.5-w,-.5,.5,.5-w,-.5,.5,-.5+w,-.5,-.5+s,-.5+w,-.5,-.5,-.5+w,-.5,-.5,.5-w,-.5,-.5,.5-w,-.5,-.5+s,.5-w,-.5,-.5+s,-.5+w),_.push(0,0,0,1,w,1,w,1,w,0,0,0,1-w,0,1-w,1,1,1,1,1,1,0,1-w,0,w,0,w,s,1-w,s,1-w,s,1-w,0,w,0,w,1-s,w,1,1-w,1,1-w,1,1-w,1-s,w,1-s)),E===!0?(J.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),_.push(1,0,0,1,1,1,0,1,1,0,0,0)):E===!1||(J.push(.5,.5,-.5,.5,-.5,-.5+w,.5,-.5,-.5,.5,-.5,-.5+w,.5,.5,-.5,.5,.5,-.5+w,.5,.5,.5-w,.5,-.5,.5,.5,-.5,.5-w,.5,-.5,.5,.5,.5,.5-w,.5,.5,.5,.5,.5,-.5+w,.5,.5-s,.5-w,.5,.5-s,-.5+w,.5,.5-s,.5-w,.5,.5,-.5+w,.5,.5,.5-w,.5,-.5+s,-.5+w,.5,-.5,.5-w,.5,-.5,-.5+w,.5,-.5,.5-w,.5,-.5+s,-.5+w,.5,-.5+s,.5-w),_.push(1,0,1-w,1,1,1,1-w,1,1,0,1-w,0,w,0,0,1,w,1,0,1,w,0,0,0,1-w,0,w,s,1-w,s,w,s,1-w,0,w,0,1-w,1-s,w,1,1-w,1,w,1,1-w,1-s,w,1-s)),S===!0?(J.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),_.push(1,1,1,0,0,0,0,0,0,1,1,1)):S===!1||(J.push(.5,.5,.5,.5,.5,-.5,.5-n,.5,-.5,.5-n,.5,-.5,.5-n,.5,.5,.5,.5,.5,-.5+n,.5,.5,-.5+n,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+n,.5,.5,.5-n,.5,.5,.5-n,.5,.5-w,-.5+n,.5,.5-w,-.5+n,.5,.5-w,-.5+n,.5,.5,.5-n,.5,.5,.5-n,.5,-.5+w,.5-n,.5,-.5,-.5+n,.5,-.5,-.5+n,.5,-.5,-.5+n,.5,-.5+w,.5-n,.5,-.5+w),_.push(1,1,1,0,1-n,0,1-n,0,1-n,1,1,1,n,1,n,0,0,0,0,0,0,1,n,1,1-n,1,1-n,1-w,n,1-w,n,1-w,n,1,1-n,1,1-n,w,1-n,0,n,0,n,0,n,w,1-n,w)),v===!0?(J.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),_.push(1,0,0,1,1,1,0,1,1,0,0,0)):v===!1||(J.push(.5,-.5,.5,.5-n,-.5,-.5,.5,-.5,-.5,.5-n,-.5,-.5,.5,-.5,.5,.5-n,-.5,.5,-.5+n,-.5,.5,-.5,-.5,-.5,-.5+n,-.5,-.5,-.5,-.5,-.5,-.5+n,-.5,.5,-.5,-.5,.5,.5-n,-.5,.5,-.5+n,-.5,.5-w,.5-n,-.5,.5-w,-.5+n,-.5,.5-w,.5-n,-.5,.5,-.5+n,-.5,.5,.5-n,-.5,-.5+w,-.5+n,-.5,-.5,.5-n,-.5,-.5,-.5+n,-.5,-.5,.5-n,-.5,-.5+w,-.5+n,-.5,-.5+w),_.push(1,0,1-n,1,1,1,1-n,1,1,0,1-n,0,n,0,0,1,n,1,0,1,n,0,0,0,1-n,0,n,w,1-n,w,n,w,1-n,0,n,0,1-n,1-w,n,1,1-n,1,n,1,1-n,1-w,n,1-w)),{vs:J,uv:_}}}),B(r.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":b,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":_/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),_m.forEach(function(A){var $={};$[A+f]=!1,$[A+".toggleable"]=!1,$[A+".axis"]=W,$[A+".start"]=0,$[A+".end"]=_/2,$[A+p]=0,B(r.Style,$,!0)});var jo=function(){this.$4n=[]};jo.$15n=function(A){var J=new jo;return J.$4n=A,J},jo.prototype={clone:function(){var h=new jo;return h.$4n=this.$4n.map(function(B){return B.clone()}),h},$19n:function(){return this.$4n},union:function(R){var t=new po(this.clone().$4n),L=new po(R.clone().$4n);return t.$3n(L),L.$3n(t),L.$6n(),L.$3n(t),L.$6n(),t.$7n(L.$2n()),jo.$15n(t.$2n())},subtract:function(M){var n=new po(this.clone().$4n),Z=new po(M.clone().$4n);return n.$6n(),n.$3n(Z),Z.$3n(n),Z.$6n(),Z.$3n(n),Z.$6n(),n.$7n(Z.$2n()),n.$6n(),jo.$15n(n.$2n())},intersect:function(L){var n=new po(this.clone().$4n),z=new po(L.clone().$4n);return n.$6n(),z.$3n(n),z.$6n(),n.$3n(z),z.$3n(n),n.$7n(z.$2n()),n.$6n(),jo.$15n(n.$2n())},inverse:function(){var X=this.clone();return X.$4n.map(function(w){w.flip()}),X}},jo.cube=function(P){P=P||{};var T=new un(P.center||[0,0,0]),f=P.radius?P.radius.length?P.radius:[P.radius,P.radius,P.radius]:[1,1,1];return jo.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(y){return new xh(y[0].map(function(x){var I=new un(T.x+f[0]*(2*!!(1&x)-1),T.y+f[1]*(2*!!(2&x)-1),T.z+f[2]*(2*!!(4&x)-1));return new Bq(I,new un(y[1]))}))}))},jo.sphere=function(i){function n(Y,Z){Y*=2*_,Z*=_;var i=new un(h(Y)*l(Z),h(Z),l(Y)*l(Z));r.push(new Bq(C.$20n(i.$21n(Q)),i))}i=i||{};for(var r,C=new un(i.center||[0,0,0]),Q=i.radius||1,U=i.slices||16,V=i.stacks||8,O=[],T=0;U>T;T++)for(var x=0;V>x;x++)r=[],n(T/U,x/V),x>0&&n((T+1)/U,x/V),V-1>x&&n((T+1)/U,(x+1)/V),n(T/U,(x+1)/V),O.push(new xh(r));return jo.$15n(O)},jo.cylinder=function(r){function N(f,i,N){var O=2*i*_,H=I.$21n(h(O)).$20n(Z.$21n(l(O))),b=j.$20n(X.$21n(f)).$20n(H.$21n(L)),P=H.$21n(1-m(N)).$20n(e.$21n(N));return new Bq(b,P)}r=r||{};for(var j=new un(r.start||[0,-1,0]),V=new un(r.end||[0,1,0]),X=V.$13n(j),L=r.radius||1,v=r.slices||16,e=X.$14n(),O=m(e.y)>.5,I=new un(O,!O,0).$12n(e).$14n(),Z=I.$12n(e).$14n(),f=new Bq(j,e.$11n()),b=new Bq(V,e.$14n()),R=[],n=0;v>n;n++){var z=n/v,Y=(n+1)/v;R.push(new xh([f,N(0,z,-1),N(0,Y,-1)])),R.push(new xh([N(0,Y,0),N(0,z,0),N(1,z,0),N(1,Y,0)])),R.push(new xh([b,N(1,Y,1),N(1,z,1)]))}return jo.$15n(R)};var un=function(S,F,s){var A=this;3==arguments.length?(A.x=S,A.y=F,A.z=s):"x"in S?(A.x=S.x,A.y=S.y,A.z=S.z):(A.x=S[0],A.y=S[1],A.z=S[2])};un.prototype={clone:function(){return new un(this.x,this.y,this.z)},$11n:function(){return new un(-this.x,-this.y,-this.z)},$20n:function(f){return new un(this.x+f.x,this.y+f.y,this.z+f.z)},$13n:function(P){return new un(this.x-P.x,this.y-P.y,this.z-P.z)},$21n:function(T){return new un(this.x*T,this.y*T,this.z*T)},$16n:function(X){return new un(this.x/X,this.y/X,this.z/X)},$23n:function(C){return this.x*C.x+this.y*C.y+this.z*C.z},lerp:function(K,B){return this.$20n(K.$13n(this).$21n(B))},length:function(){return w(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(i){var M=this;return new un(M.y*i.z-M.z*i.y,M.z*i.x-M.x*i.z,M.x*i.y-M.y*i.x)}};var Bq=function(b,Y,U){var x=this;x.$24n=new un(b),x.$22n=new un(Y),x.uv=U?new un(U):null};Bq.prototype={clone:function(){var v=this;return new Bq(v.$24n.clone(),v.$22n.clone(),v.uv?v.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(D,z){var x=this;return new Bq(x.$24n.lerp(D.$24n,z),x.$22n.lerp(D.$22n,z),x.uv?x.uv.lerp(D.uv,z):null)}};var Kk=function(t,b){this.$22n=t,this.w=b};Kk.$17n=function(l,N,A){var z=N.$13n(l).$12n(A.$13n(l)).$14n();return new Kk(z,z.$23n(l))},Kk.prototype={clone:function(){return new Kk(this.$22n.clone(),this.w)},flip:function(){var l=this;l.$22n=l.$22n.$11n(),l.w=-l.w},$5n:function(N,r,Z,g,P){for(var K=this,W=0,F=1,l=2,U=3,B=0,k=[],i=0;i<N.$9n.length;i++){var V=K.$22n.$23n(N.$9n[i].$24n)-K.w,c=-n>V?l:V>n?F:W;B|=c,k.push(c)}switch(B){case W:(K.$22n.$23n(N.$8n.$22n)>0?r:Z).push(N);break;case F:g.push(N);break;case l:P.push(N);break;case U:for(var z=[],$=[],i=0;i<N.$9n.length;i++){var A=(i+1)%N.$9n.length,f=k[i],H=k[A],X=N.$9n[i],E=N.$9n[A];if(f!=l&&z.push(X),f!=F&&$.push(f!=l?X.clone():X),(f|H)==U){var V=(K.w-this.$22n.$23n(X.$24n))/K.$22n.$23n(E.$24n.$13n(X.$24n)),O=X.$18n(E,V);z.push(O),$.push(O.clone())}}z.length>=3&&g.push(new xh(z,N.$10n)),$.length>=3&&P.push(new xh($,N.$10n))}}};var xh=function(E,A){var f=this;f.$9n=E,f.$10n=A,f.$8n=Kk.$17n(E[0].$24n,E[1].$24n,E[2].$24n)};xh.prototype={clone:function(){var B=this.$9n.map(function(L){return L.clone()});return new xh(B,this.$10n)},flip:function(){this.$9n.reverse().map(function(q){q.flip()}),this.$8n.flip()}};var po=function(R){var A=this;A.$8n=null,A.front=null,A.back=null,A.$4n=[],R&&A.$7n(R)};po.prototype={clone:function(){var B=this,I=new po;return I.$8n=B.$8n&&B.$8n.clone(),I.front=B.front&&B.front.clone(),I.back=B.back&&B.back.clone(),I.$4n=B.$4n.map(function(k){return k.clone()}),I},$6n:function(){for(var s=this,V=0;V<s.$4n.length;V++)s.$4n[V].flip();s.$8n.flip(),s.front&&s.front.$6n(),s.back&&s.back.$6n();var S=s.front;s.front=s.back,s.back=S},$1n:function(U){var F=this;if(!F.$8n)return U.slice();for(var x=[],A=[],f=0;f<U.length;f++)F.$8n.$5n(U[f],x,A,x,A);return F.front&&(x=F.front.$1n(x)),A=F.back?F.back.$1n(A):[],x.concat(A)},$3n:function(b){var q=this;q.$4n=b.$1n(q.$4n),q.front&&q.front.$3n(b),q.back&&q.back.$3n(b)},$2n:function(){var J=this,R=J.$4n.slice();return J.front&&(R=R.concat(J.front.$2n())),J.back&&(R=R.concat(J.back.$2n())),R},$7n:function(r){var i=this;if(r.length){i.$8n||(i.$8n=r[0].$8n.clone());for(var L=[],V=[],t=0;t<r.length;t++)this.$8n.$5n(r[t],i.$4n,i.$4n,L,V);L.length&&(i.front||(i.front=new po),this.front.$7n(L)),V.length&&(i.back||(i.back=new po),i.back.$7n(V))}}};var _d="symbol",Pq=r.Symbol=function(V,f,o){var v=this;t(Pq,v),v.s3(20,20,20),v.s({"all.visible":!1,shape:"rect"}),v.setIcon(V,f,o)};y("Symbol",u,{setIcon:function(L,B,Z){var o,m=this;return Pq.superClass.setIcon.call(m,L),L?(o={for3d:!0,face:"center",position:44,names:[L]},Z&&(o.transaprent=!0),B&&(o.autorotate=B),m.addStyleIcon(_d,o)):m.removeStyleIcon(_d),m.setWidth(Y.getImageWidth(c.getImage(L),m)||20),o}});var Yr=r.CSGNode=function(){t(Yr,this),this.s({shape:"rect","attach.thickness":1.001})},ll={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};y("CSGNode",u,{_22Q:function(){return vg},onPropertyChanged:function(A){var q=this,C=q.getHost();Yr.superClass.onPropertyChanged.call(q,A),ll[A.property]&&(C instanceof to||C instanceof Yr)&&C.fp("csgNodeChange",!0,!1)}});var vg=function(g,C){t(vg,this,[g,C])};Z(vg,D.Node3dUI,{_80o:function(o,A,U){var Q=this;Q._shape3d?vg.superClass._80o.call(Q,o,A,U):(J(Q.gv),Jk.forEach(function(p){S(Q,o,A,Q[p],U)}))},validate:function(d,S){var i=this,m=i.gv,M=i.data;if(M.s("shape3d"))return vg.superClass.validate.call(i,d,S),i._shape3d=!0,void 0;i._shape3d=!1;var r=G(M,m.getMat(M)),B=d&&d.uv;i.vf2("csg",B);for(var l=0;6>l;l++)for(var a=_m[l],L=ri[l],W=i.vf2(a,B,S),v=W.mat||r,P=W.vs,D=W.uv,U=W.tuv,N=0;2>N;N++){var _=z[L+3*N],y=z[L+3*N+1],O=z[L+3*N+2];if(R(P,v,[C[3*_],C[3*_+1],C[3*_+2]]),R(P,v,[C[3*y],C[3*y+1],C[3*y+2]]),R(P,v,[C[3*O],C[3*O+1],C[3*O+2]]),U)if(D){var V=8*l;U.push(D[2*_-V],D[2*_+1-V],D[2*y-V],D[2*y+1-V],D[2*O-V],D[2*O+1-V])}else U.push(j[2*_],j[2*_+1],j[2*y],j[2*y+1],j[2*O],j[2*O+1])}Yi(i,d,S)},vf2:function(V,$,c){var Z,P=this,v=P.gv.getFaceVisible(P.data,V);return Z=T(P,V,c),Z.vs=[],Z.tuv=v&&(Z.texture||$)?[]:a,Z.visible=v,Z}});var to=r.CSGShape=function(){var h=this;t(to,h),h.s({"shape.background":a,"shape.border.width":8}),h.setTall(240),h.setElevation(120),h.setThickness(14)};y("CSGShape",x,{IRotatable:!1,_22Q:function(){return qn},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var qn=function(C,J){t(qn,this,[C,J])};Z(qn,D.Shape3dUI,{_80o:function(i,M,K){var U=this;U.undrawable||(J(U.gv),Jk.forEach(function(T){S(U,i,M,U[T],K)}))},validate:function(l,Y){var s=this,N=s.data,c=N.getPoints();if(s.undrawable=c.size()<2)return s.clear(),void 0;var m=N.isClosePath(),y=H(N._thickness/2,n),P=E(c,a,a,m);Jk.forEach(function(b){s.vf(b,l&&l.uv,!0,Y)}),m&&(s.left.visible=!1,s.right.visible=!1),s._12O(P,y),s._20Q(P),Yi(s,l,Y)}});var cj=r.DoorWindow=function(){var J=this;t(cj,J),J.setElevation(100),J.s3(100,200,14)};y("DoorWindow",Yr,{IDoorWindow:!0,toggle:function(B){this.setExpanded(!this.s($),B)},isExpanded:function(){return this.s($)},setExpanded:function(q,V){var k=this,s=k.$25n,l=k.getDataModel(),X=k.s($);if(s&&(s.stop(!0),delete k.$25n),X!==q){l&&l.beginTransaction();var w=q?k.s("dw.end"):k.s("dw.start");k.s($,q),V=O(V),V?(X=k.s(d),V.action=function(u){k.s(d,X+(w-X)*u)},V.finishFunc=function(){l&&l.endTransaction()},k.$25n=g(V)):(k.s(d,w),l&&l.endTransaction())}},getMat:function(){var O=this,f=O.s("dw.s3"),H=O.s("dw.t3"),q=O.s("dw.flip"),j=O.s(d);if(f||j||H||q){var R=[];if(q&&R.push({r3:[0,_,0]}),f&&R.push({s3:f}),j){f=O.s3();var i=O.s("dw.axis"),o=f[0]/2,Y=f[1]/2;f[2]/2,i===W?R.push({t3:[o,0,0]},{r3:[0,-j,0]},{t3:[-o,0,0]}):i===A?R.push({t3:[-o,0,0]},{r3:[0,j,0]},{t3:[o,0,0]}):i===P?R.push({t3:[0,-Y,0]},{r3:[-j,0,0]},{t3:[0,Y,0]}):i===L?R.push({t3:[0,Y,0]},{r3:[j,0,0]},{t3:[0,-Y,0]}):i===e?R.push({r3:[0,j,0]}):i===k&&R.push({r3:[j,0,0]})}return H&&R.push({t3:H}),K(R)}return a}});var Gp=r.CSGBox=function(){var L=this;t(Gp,L),L.setElevation(100),L.s3(100,200,100)};y("CSGBox",Yr,{ICSGBox:!0,toggleFace:function(P,k){this.setFaceExpanded(P,!this.s(P+f),k)},isFaceExpanded:function(M){return this.s(M+f)},setFaceExpanded:function(L,h,y){var Q=this,S=Q.$25n,B=Q.s(L+f);if(S&&(S.stop(!0),delete Q.$25n),B!==h){var e=h?Q.s(L+".end"):Q.s(L+".start");Q.s(L+f,h),y=O(y),y?(B=Q.s(L+p),y.action=function(t){Q.s(L+p,B+(e-B)*t)},Q.$25n=g(y)):Q.s(L+p,e)}},getFaceMat:function(F){var D=this,r=D.s(F+p);if(!r)return a;var C=D.s(F+".axis"),_=D.s3(),U=_[0]/2,y=_[1]/2,I=_[2]/2,n=[];return F===v&&(C===W?n.push({t3:[U,0,-I]},{r3:[0,-r,0]},{t3:[-U,0,I]}):C===A?n.push({t3:[-U,0,-I]},{r3:[0,r,0]},{t3:[U,0,I]}):C===P?n.push({t3:[0,-y,-I]},{r3:[-r,0,0]},{t3:[0,y,I]}):C===L?n.push({t3:[0,y,-I]},{r3:[r,0,0]},{t3:[0,-y,I]}):C===e?n.push({t3:[0,0,-I]},{r3:[0,r,0]},{t3:[0,0,I]}):C===k&&n.push({t3:[0,0,-I]},{r3:[r,0,0]},{t3:[0,0,I]})),F===Q&&(C===W?n.push({t3:[-U,0,I]},{r3:[0,-r,0]},{t3:[U,0,-I]}):C===A?n.push({t3:[U,0,I]},{r3:[0,r,0]},{t3:[-U,0,-I]}):C===P?n.push({t3:[0,-y,I]},{r3:[r,0,0]},{t3:[0,y,-I]}):C===L?n.push({t3:[0,y,I]},{r3:[-r,0,0]},{t3:[0,-y,-I]}):C===e?n.push({t3:[0,0,I]},{r3:[0,r,0]},{t3:[0,0,-I]}):C===k&&n.push({t3:[0,0,I]},{r3:[r,0,0]},{t3:[0,0,-I]})),F===W&&(C===W?n.push({t3:[U,0,I]},{r3:[0,-r,0]},{t3:[-U,0,-I]}):C===A?n.push({t3:[U,0,-I]},{r3:[0,r,0]},{t3:[-U,0,I]}):C===P?n.push({t3:[U,-y,0]},{r3:[0,0,-r]},{t3:[-U,y,0]}):C===L?n.push({t3:[U,y,0]},{r3:[0,0,r]},{t3:[-U,-y,0]}):C===e?n.push({t3:[U,0,0]},{r3:[0,r,0]},{t3:[-U,0,0]}):C===k&&n.push({t3:[U,0,0]},{r3:[0,0,r]},{t3:[-U,0,0]})),F===A&&(C===W?n.push({t3:[-U,0,-I]},{r3:[0,-r,0]},{t3:[U,0,I]}):C===A?n.push({t3:[-U,0,I]},{r3:[0,r,0]},{t3:[U,0,-I]}):C===P?n.push({t3:[-U,-y,0]},{r3:[0,0,r]},{t3:[U,y,0]}):C===L?n.push({t3:[-U,y,0]},{r3:[0,0,-r]},{t3:[U,-y,0]}):C===e?n.push({t3:[-U,0,0]},{r3:[0,r,0]},{t3:[U,0,0]}):C===k&&n.push({t3:[-U,0,0]},{r3:[0,0,r]},{t3:[U,0,0]})),F===P&&(C===W?n.push({t3:[U,-y,0]},{r3:[0,0,r]},{t3:[-U,y,0]}):C===A?n.push({t3:[-U,-y,0]},{r3:[0,0,-r]},{t3:[U,y,0]}):C===P?n.push({t3:[0,-y,I]},{r3:[-r,0,0]},{t3:[0,y,-I]}):C===L?n.push({t3:[0,-y,-I]},{r3:[r,0,0]},{t3:[0,y,I]}):C===e?n.push({t3:[0,-y,0]},{r3:[0,0,r]},{t3:[0,y,0]}):C===k&&n.push({t3:[0,-y,0]},{r3:[r,0,0]},{t3:[0,y,0]})),F===L&&(C===W?n.push({t3:[U,y,0]},{r3:[0,0,-r]},{t3:[-U,-y,0]}):C===A?n.push({t3:[-U,y,0]},{r3:[0,0,r]},{t3:[U,-y,0]}):C===P?n.push({t3:[0,y,-I]},{r3:[-r,0,0]},{t3:[0,-y,I]}):C===L?n.push({t3:[0,y,I]},{r3:[r,0,0]},{t3:[0,-y,-I]}):C===e?n.push({t3:[0,y,0]},{r3:[0,0,r]},{t3:[0,-y,0]}):C===k&&n.push({t3:[0,y,0]},{r3:[r,0,0]},{t3:[0,-y,0]})),K(n)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);