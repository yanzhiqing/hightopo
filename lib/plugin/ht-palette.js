!function(u,y,z){"use strict";var G="px",W="0",O="innerHTML",m="className",Z=ht.Default,F=ht.Color,N=ht.Node,q="position",L="top",E="left",S=Z.animate,k=Z.getInternal(),h="width",W="0",U="none",l="max-height",r="font",I="background",D="border-box",T="user-select",Y="box-sizing",v="overflow",b=Z.isTouchable,k=Z.getInternal(),e=F.titleIconBackground,t=Z.scrollBarInteractiveSize,V=/msie 9/.test(u.navigator?u.navigator.userAgent.toLowerCase():""),i=null,P=function(){return document},$=function(H){return P().createElement(H)},w=function(){return $("div")},f=function(){var m=w(),V=m.style;return V.msTouchAction=U,V.cursor="default",b&&V.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",i),V.position="absolute",V.left=W,V.top=W,m},j=function(){return $("canvas")},p=function(){return document.body},d=function(P,F,p){P.style.setProperty(F,p,i)},X=function(e,p){e.style.removeProperty(p)},K=function(M,u,v){Z.def(ht.widget[M],u,v)},B=function(d,i){d.appendChild(i)},s=function(w,y){w.removeChild(y)},H=Z.eventListenerOptionsFalse,Q=(Z.eventListenerOptionsTrue,function(e,h,a,k){e.addEventListener(h,a,k?H:H)});k.addMethod(Z,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:e,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:e}]},paletteTitleLabelColor:Z.labelSelectColor,paletteTitleLabelFont:Z.labelFont,paletteContentLabelFont:Z.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:Z.widgetTitleHeight,paletteTitleBackground:F.titleBackground,paletteTitleHoverBackground:F.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:z,paletteItemHoverBorderColor:F.highlight,paletteItemSelectBackground:F.highlight},!0);var C=".palette-item:hover{border: 1px solid "+Z.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+Z.paletteTitleHoverBackground+" !important}",M=document.createElement("style");b||(M.styleSheet?M.styleSheet.cssText=C:M.appendChild(P().createTextNode(C))),P().getElementsByTagName("head")[0].appendChild(M);var g=function(g){var r=this;r.$22h=g,r.addListeners()};Z.def(g,y,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var n=this;n.$36h&&p().removeChild(n.$36h),n.$23h=n.$24h=n.$25h=n.$35h=n.$36h=i},handle_touchstart:function(c){for(var z,f=this,p=f.$22h,S=c.target,X=p.sm(),V=p.dm(),O="palette-header",D="palette-header-tool",U="palette-item",R=!1,d=!1,h=!1;S&&(S[m]||"").indexOf(O)<0&&(S[m]||"").indexOf(U)<0;)S=S.parentNode;if(S&&S[m].indexOf(D)>=0?R=!0:S&&S[m].indexOf(O)>=0?h=!0:S&&S[m].indexOf(U)>=0&&(d=!0),Z.isLeftButton(c))if(f.$27h(c))f.$24h=Z.getClientPoint(c),f.$25h=p.ty();else if(R){Z.preventDefault(c),z=S.parentNode.$11h;var a=V.getDataById(z),M=a.s("tools")[S.toolIndex];M.action&&M.action.call(p)}else if(h){Z.preventDefault(c),z=S.$11h;var a=V.getDataById(z);a.isExpanded()?a.setExpanded(!1):a.setExpanded(!0)}else if(d){z=S.$11h;var s=V.getDataById(z);X.ss(s),p.handleDragAndDrop&&(Z.preventDefault(c),s.s("draggable")&&(p.handleDragAndDrop(c,"prepare"),f.$35h=0)),s.s("draggable")||(Z.preventDefault(c),f.$24h=Z.getClientPoint(c),f.$25h=p.ty())}else Z.preventDefault(c),f.$24h=Z.getClientPoint(c),f.$25h=p.ty();else f.$26h(c)},handle_mousedown:function($){this.handle_touchstart($)},handle_mousewheel:function(s){this.handleScroll(s,s.wheelDelta/40,s.wheelDelta!==s.wheelDeltaX)},handle_DOMMouseScroll:function(e){this.handleScroll(e,-e.detail,1)},handleScroll:function(V,L,y){var U=this.$22h;Z.preventDefault(V),y&&U._41o()&&U.ty(U.ty()+20*L)},handle_mouseup:function(A){this.handle_touchend(A)},handle_touchend:function(B){var d=this;d.$37h(B),d.$26h(B)},handleWindowMouseUp:function(h){this.handleWindowTouchEnd(h)},handleWindowTouchEnd:function(o){var O=this;O.$37h(o),O.$26h(o)},$37h:function(R){var $=this,x=$.$22h;2===$.$35h&&($.$35h=3,x.handleDragAndDrop(R,"end"))},handleWindowMouseMove:function(p){this.handleWindowTouchMove(p)},handleWindowTouchMove:function(_){var s=this,g=s.$22h,t=s.$23h,W=s.$24h,y=s.$25h,T=Z.getClientPoint(_),N=g._29I,q=s.$36h;if(1===s.$35h||2===s.$35h){if(s.$35h=2,g.handleDragAndDrop(_,"between"),b){var X=_.touches[0];_=X?X:_.changedTouches[0]}q.style.left=_.pageX-parseInt(q.width)/2+G,q.style.top=_.pageY-parseInt(q.height)/2+G}else"p"===t?g.ty(y+T.y-W.y):"v"===t&&g.ty(y+(W.y-T.y)/N.height*g._59I)},handle_mousemove:function(j){this.handle_touchmove(j)},handle_touchmove:function(h){if(!Z.isDragging()&&Z.isLeftButton(h)){var x=this,m=x.$22h,g=x.$27h(h);if(x.$24h){if(!x.$23h){if(Z.getDistance(Z.getClientPoint(h),x.$24h)<2)return;x.$23h=g?"v":"p",Z.startDragging(x)}}else if(g)m._43o();else if(0===x.$35h){if(x.$35h=1,m.handleDragAndDrop(h,"begin"),b){var C=h.touches[0];h=C?C:h.changedTouches[0]}var $=x.$36h=new Image,z=m.$10h[m.sm().ld().getId()].querySelector(".image-box"),J=parseInt(z.style.width),N=parseInt(z.style.height);$.draggable=!1,$.src=z.toDataURL(),$.width=J,$.height=N,$.style.position="absolute",$.style.left=h.pageX-J/2+G,$.style.top=h.pageY-N/2+G,p().appendChild($),Z.startDragging(x)}}},$27h:function(R){var F=this.$22h,p=F.getView(),m=p.getBoundingClientRect(),C=F._29I,D=R.clientX-m.left+p.scrollLeft;return F._41o()&&C.x+C.width-D<t}}),ht.widget.Palette=function(H){var h=this,V=h._view=k.createView(null,h);h.$9h={},h.$10h={},h.$4h={},h._29I={x:0,y:0,width:0,height:0},h._59I=0,h.dm(H?H:new ht.DataModel),V[m]="ht-widget-palette",h.$29h=new g(h),d(V,I,Z.paletteContentBackground),d(V,v,"auto"),d(V,Y,D),d(V,"-moz-"+Y,D),d(V,"-webkit-"+T,U),d(V,"-moz-"+T,U),d(V,"-ms-"+T,U),d(V,T,U),d(V,"position","absolute"),d(V,"overflow","hidden"),B(V,h._79O=f()),Q(V,"dragstart",function(A){A.dataTransfer&&(A.dataTransfer.setData("Text","nodeid:"+A.target.$11h),A.dataTransfer.effectAllowed="all",h.$29h.$26h())})},K("Palette",y,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:Z.autoHideScrollBar,_scrollBarSize:Z.scrollBarSize,_scrollBarColor:Z.scrollBarColor,getViewRect:function(){return this._29I},ty:function(d){return d==i?this.getTranslateY():(this.setTranslateY(d),void 0)},setTranslateY:function(h){if(this.$32h==i){var N=this,f=N.$33h(h),Y=N.$30h;N.$30h=f,N.fp("translateY",Y,f)}},getTranslateY:function(){return this.$30h},setLayout:function(B){var g,F,Y=this,G=Y._layout;Y._layout=B,"smallicons"===B?g=F=20:"iconsonly"===B?g=F=50:(g=70,F=50),Y.setItemImageWidth(g),Y.setItemImageHeight(F),Y.setItemImagePadding(4),Y.fp("layout",G,B)},getDataAt:function(Z){for(var P=Z.target;P&&P.$11h==i;)P=P.parentNode;return P&&P.$11h!=i?this.getDataModel().getDataById(P.$11h):void 0},$20h:function(){var P=16;return b&&(P*=1.2),P},$19h:function(){return Z.paletteTitleHeight},$18h:function(){var b=Z.paletteSeparatorWidth,M=Z.paletteTitleBackground,w=Z.paletteSeparatorColor||Z.brighter(M);return b+G+" solid "+w},$17h:function(R){d(R,"cursor","pointer"),d(R,"display","inline-block"),d(R,"margin-right",(b?8:4)+G),d(R,"vertical-align",L)},$1h:function(M){var U=this,A=w(),g=w(),s=$("span");A[m]="palette-header",d(A,q,"relative"),d(A,I,Z.paletteTitleBackground),d(A,"color",Z.paletteTitleLabelColor),d(A,L,W),d(A,Y,D),d(A,"-moz-"+Y,D),d(A,"padding","0 5px 0 0"),d(A,"border-top",U.$18h()),d(A,h,"100%"),d(A,"cursor","pointer"),d(A,"white-space","nowrap"),d(A,v,"hidden"),d(A,r,Z.paletteTitleLabelFont),d(A,"line-height",U.$19h()+G),A.$11h=M.getId();var E=j(),e=U.$19h(),x=U.$20h();U.$17h(E),k.setCanvas(E,x,e),B(A,E);var F=M.s("tools");if(F)for(var n=0;n<F.length;n++){var V=j();U.$17h(V),k.setCanvas(V,x,e),V[m]="palette-header-tool palette-header-tool"+M.getId()+"-"+n,V.style.position="absolute",V.style.right=(x+10)*n+"px",V.toolIndex=n,B(A,V)}return E[m]="palette-toggle-icon-"+M.getId(),g[m]="palette-content",d(g,"max-height",0+G),d(g,r,Z.paletteContentLabelFont),d(g,v,"hidden"),g.$11h=M.getId(),U.$9h[M.getId()]=g,s[O]=M.getName(),d(s,r,Z.paletteTitleLabelFont),B(A,E),B(A,s),[A,g]},$2h:function(H){var _=this,x=_._layout,u=V&&H.s("draggable")?$("a"):w(),M=j(),D=w(),J=H.getName()||"",z=H.s("title")||H.getToolTip()||J,h=_._itemMargin;M[m]="image-box";var F=_.getItemImageWidth(),Q=_.getItemImageHeight();return k.setCanvas(M,F,Q),B(u,M),D[O]=J,D[m]="label-box","iconsonly"!==x&&B(u,D),u[m]="palette-item",d(u,"vertical-align",L),d(u,"cursor","pointer"),d(u,"border-radius",5+G),d(u,"border","1px solid transparent"),d(u,"text-align","center"),d(u,"display","inline-block"),d(u,"margin-left",h+G),d(u,"margin-top",h+G),d(u,"color",Z.paletteContentLabelColor),"smallicons"===x?(d(M,"vertical-align","middle"),d(u,"margin-left",2+G),d(u,"margin-top",2+G),d(u,"padding",2+G),d(u,"text-align",E),d(D,"display","inline-block"),d(D,"min-width",_.$21h+_._itemMargin+G)):"largeicons"===x&&(d(D,"max-width",F+G),d(D,"overflow","hidden")),u.$11h=H.getId(),z&&(u.title=z),H.s("draggable")&&!_.handleDragAndDrop&&(V?(u.href="#",d(u,"text-decoration",U)):u.draggable="true"),u},$16h:function(T,B,h,t){var j=k.initContext(T);k.translateAndScale(j,0,0,1),j.clearRect(0,0,h,h);var A=(h-t)/2;Z.drawStretchImage(j,Z.getImage(B),"fill",0,A,t,t),j.restore()},$15h:function(T){var v=this,m=T.getId(),R=v._view.querySelector(".palette-toggle-icon-"+m),M=T.isExpanded()?Z.paletteCollapseIcon:Z.paletteExpandIcon;if(R&&M){var F=v.$19h(),J=v.$20h();v.$16h(R,M,F,J)}},_drawToolsIcon:function(Y){var e=this,V=Y.s("tools");if(V)for(var d=0;d<V.length;d++){var R=e._view.querySelector(".palette-header-tool"+Y.getId()+"-"+d),w=V[d].icon,L=e.$19h(),r=e.$20h();e.$16h(R,w,L,r)}},$14h:function(C){var S=this,g=C.getId(),l=S.$10h[g].querySelector(".image-box"),s=C.getImage(),E=C.s("image.stretch");if(l&&s){var J=k.initContext(l),X=S.getItemImagePadding();X="smallicons"===S._layout?X/2:X;var Y=S.getItemImageWidth()-2*X,T=S.getItemImageHeight()-2*X;k.translateAndScale(J,0,0,1),J.clearRect(0,0,Y,T),Z.drawStretchImage(J,Z.getImage(s),E,X,X,Y,T,C,S),J.restore()}},validateImpl:function(){var b,g,K,L=this,w=L.$9h,m=L._layout,F=L.$10h,z=L.$4h,d=L._view,U=L.dm();if(L.$13h&&(delete L.$13h,z={},U.each(function(H){z[H.getId()]=H})),"smallicons"===m)for(var o in z){var R=z[o];if(R instanceof N){var j=R.getName()||"",q=Z.getTextSize(Z.paletteContentLabelFont,j).width;L.$21h!=i&&L.$21h>q||(L.$21h=q)}}for(var o in z){K=z[o];var M,T;if(U.contains(K)){if(K instanceof ht.Group){var v,X=L.$1h(K),c=F[K.getId()];c&&(v=c.nextSibling,s(d,v),s(d,c)),g=U.getSiblings(K).indexOf(K);var Y=d.children[2*g]||L._79O;Y&&Y.parentNode?(d.insertBefore(X[0],Y),d.insertBefore(v||X[1],Y)):(d.appendChild(X[0]),d.appendChild(v||X[1])),F[K.getId()]=X[0],b=w[K.getId()]=v||X[1],T=K.$12h;var Q=K.s("promptText");T||(K.$12h=$("div"),K.$12h[O]=Q||"",T=K.$12h),0===K.getChildren().size()?b.contains(T)||B(b,T):b.contains(T)&&s(b,T)}else if(M=K.getParent()){var e=L.$2h(K),J=F[K.getId()];b=w[M.getId()],J&&s(J.parentNode,J),g=U.getSiblings(K).indexOf(K);var P=b.children[g];P?b.insertBefore(e,P):B(b,e),F[K.getId()]=e,L.$14h(K)}}else{var I=F[K.getId()],D=I.parentNode;if(K instanceof ht.Group){var A=I.nextSibling;s(d,I),s(d,A),delete w[K.getId()]}else s(D,I),0===D.children.length&&(M=U.getDataById(D.$11h),M&&(T=M.$12h,T&&!D.contains(T)&&B(D,T)));delete F[K.getId()]}}L.$4h={};var a=function(){var Q=L._59I,g=0;L.$32h!=i&&(clearInterval(L.$32h),g=0,delete L.$32h),L.$32h=setInterval(function(){L.$31h(),Q===L._59I?(g++,g>=2&&(clearInterval(L.$32h),delete L.$32h)):(g=0,Q=L._59I)},30)};for(var C in w)if(b=w[C],K=U.getDataById(w[C].$11h),L.$15h(K),L._drawToolsIcon(K),K.isExpanded()){if(b.style.maxHeight===0+G){var t=b.scrollHeight+L._itemMargin+G;S(b).duration(200).set(l,t).set("padding-bottom",L._itemMargin+G).end(function(){return function(){a()}}(t))}else b.style.maxHeight=b.scrollHeight+G;b.style.paddingBottom=L._itemMargin+G}else b.style.maxHeight!==0+G&&S(b).duration(200).set(l,W).set("padding-bottom",W).end(function(){return function(){a()}}(b));L.$28h(),L.$31h()},$31h:function(){for(var H=this,i=H._view,q=0,u=i.children,O=0;O<u.length;O++){var l=u[O];l.className&&l.className.indexOf("palette-")>=0&&(q+=l.offsetHeight)}H._59I=q,H.$30h=H.$33h(H.ty());var S=H.ty();i.scrollTop=-S,H._29I={x:0,y:-S,width:i.clientWidth,height:i.clientHeight},d(H._79O,L,-S+G),H._93I()},$33h:function(O){var Q=this,E=Q._29I.height-Q._59I;return E>O&&(O=E),O>0?0:Math.round(O)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(f){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(f.property)<0&&this.redraw(),"translateY"===f.property&&(this.iv(),this._43o())},findDataByName:function(g){for(var G=this.dm().getDatas(),P=0;P<G.size();P++){var K=G.get(P);if(K.getName()===g)return K}},setDataModel:function(k){var Y=this,w=Y._dataModel,X=Y._selectionModel;w!==k&&(w&&(w.umm(Y.$6h,Y),w.umd(Y.$8h,Y),w.umh(Y.$7h,Y),X||w.sm().ums(Y.$28h,Y)),Y._dataModel=k,k.mm(Y.$6h,Y),k.md(Y.$8h,Y),k.mh(Y.$7h,Y),X?X._21I(k):k.sm().ms(Y.$28h,Y),Y.sm().setSelectionMode("single"),Y.fp("dataModel",w,k))},$6h:function(m){var B=this,V=B._view,v=m.data,S=B.$4h;"add"===m.kind?S[v.getId()]=v:"remove"===m.kind?S[v.getId()]=v:"clear"===m.kind&&(B.$10h={},B.$9h={},B.$4h={},V[O]=""),B.iv()},$7h:function(M){var i=this,y=M.data;i.$4h[y.getId()]=y,i.iv()},$8h:function(U){var s=this,f=U.data,m=U.property;"expanded"===m?s.iv():(s.$4h[f.getId()]=f,s.iv())},$28h:function(){var s,i=this,B=i.sm(),e="palette-item",p=B.ld();this.dm().each(function(K){s=i.$10h[K.getId()],s&&s[m].indexOf(e)>=0&&(K===p?d(s,I,Z.paletteItemSelectBackground):X(s,I))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);