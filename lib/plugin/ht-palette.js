!function(L,P,e){"use strict";var G="px",f="0",i="innerHTML",E="className",C=ht.Default,k=ht.Color,H=ht.Node,p="position",s="top",W="left",F=C.animate,S=C.getInternal(),g="width",f="0",x="none",J="max-height",a="font",r="background",l="border-box",I="user-select",Q="box-sizing",v="overflow",d=C.isTouchable,A=C.isTouchEvent,S=C.getInternal(),$=k.titleIconBackground,h=C.scrollBarInteractiveSize,B=/msie 9/.test(L.navigator?L.navigator.userAgent.toLowerCase():""),t=null,Z=function(){return document},u=function(O){return Z().createElement(O)},M=function(){return u("div")},T=function(){var k=M(),p=k.style;return p.msTouchAction=x,p.cursor="default",d&&p.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",t),p.position="absolute",p.left=f,p.top=f,k},y=function(){return u("canvas")},R=function(){return document.body},w=function(Z,d,J){Z.style.setProperty(d,J,t)},o=function(K,l){K.style.removeProperty(l)},q=function(F,R,i){C.def(ht.widget[F],R,i)},O=function(R,L){R.appendChild(L)},c=function(F,J){F.removeChild(J)},j=S.addEventListener;S.removeEventListener,S.addMethod(C,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:$,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:$}]},paletteTitleLabelColor:C.labelSelectColor,paletteTitleLabelFont:C.labelFont,paletteContentLabelFont:C.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:C.widgetTitleHeight,paletteTitleBackground:k.titleBackground,paletteTitleHoverBackground:k.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:e,paletteItemHoverBorderColor:k.highlight,paletteItemSelectBackground:k.highlight},!0);var n=".palette-item:hover{border: 1px solid "+C.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+C.paletteTitleHoverBackground+" !important}",X=document.createElement("style");d||(X.styleSheet?X.styleSheet.cssText=n:X.appendChild(Z().createTextNode(n))),Z().getElementsByTagName("head")[0].appendChild(X);var b=function(C){var a=this;a.$22h=C,a.addListeners()};C.def(b,P,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var r=this;r.$36h&&R().removeChild(r.$36h),r.$23h=r.$24h=r.$25h=r.$35h=r.$36h=t},handle_touchstart:function(Y){for(var v,J=this,s=J.$22h,q=Y.target,b=s.sm(),I=s.dm(),m="palette-header",p="palette-header-tool",H="palette-item",G=!1,x=!1,X=!1;q&&(q[E]||"").indexOf(m)<0&&(q[E]||"").indexOf(H)<0;)q=q.parentNode;if(q&&q[E].indexOf(p)>=0?G=!0:q&&q[E].indexOf(m)>=0?X=!0:q&&q[E].indexOf(H)>=0&&(x=!0),C.isLeftButton(Y))if(J.$27h(Y))J.$24h=C.getClientPoint(Y),J.$25h=s.ty();else if(G){C.preventDefault(Y),v=q.parentNode.$11h;var W=I.getDataById(v),f=W.s("tools")[q.toolIndex];f.action&&f.action.call(s)}else if(X){C.preventDefault(Y),v=q.$11h;var W=I.getDataById(v);W.isExpanded()?W.setExpanded(!1):W.setExpanded(!0)}else if(x){v=q.$11h;var N=I.getDataById(v);b.ss(N),s.handleDragAndDrop&&(C.preventDefault(Y),N.s("draggable")&&(s.handleDragAndDrop(Y,"prepare"),J.$35h=0)),N.s("draggable")||(C.preventDefault(Y),J.$24h=C.getClientPoint(Y),J.$25h=s.ty())}else C.preventDefault(Y),J.$24h=C.getClientPoint(Y),J.$25h=s.ty();else J.$26h(Y)},handle_mousedown:function(U){this.handle_touchstart(U)},handle_mousewheel:function(D){this.handleScroll(D,D.wheelDelta/40,D.wheelDelta!==D.wheelDeltaX)},handle_DOMMouseScroll:function(g){this.handleScroll(g,-g.detail,1)},handleScroll:function(F,J,i){var y=this.$22h;C.preventDefault(F),i&&y._41o()&&y.ty(y.ty()+20*J)},handle_mouseup:function(q){this.handle_touchend(q)},handle_touchend:function(Z){var m=this;m.$37h(Z),m.$26h(Z)},handleWindowMouseUp:function(I){this.handleWindowTouchEnd(I)},handleWindowTouchEnd:function($){var I=this;I.$37h($),I.$26h($)},$37h:function(o){var P=this,J=P.$22h;2===P.$35h&&(P.$35h=3,J.handleDragAndDrop(o,"end"))},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function(I){var L=this,W=L.$22h,t=L.$23h,j=L.$24h,c=L.$25h,E=C.getClientPoint(I),Q=W._29I,b=L.$36h;if(1===L.$35h||2===L.$35h){if(L.$35h=2,W.handleDragAndDrop(I,"between"),A(I)){var $=I.touches[0];I=$?$:I.changedTouches[0]}b.style.left=I.pageX-parseInt(b.width)/2+G,b.style.top=I.pageY-parseInt(b.height)/2+G}else"p"===t?W.ty(c+E.y-j.y):"v"===t&&W.ty(c+(j.y-E.y)/Q.height*W._59I)},handle_mousemove:function(Y){this.handle_touchmove(Y)},handle_touchmove:function(D){if(!C.isDragging()&&C.isLeftButton(D)){var q=this,v=q.$22h,w=q.$27h(D);if(q.$24h){if(!q.$23h){if(C.getDistance(C.getClientPoint(D),q.$24h)<2)return;q.$23h=w?"v":"p",C.startDragging(q,D)}}else if(w)v._43o();else if(0===q.$35h){if(q.$35h=1,v.handleDragAndDrop(D,"begin"),C.startDragging(q,D),A(D)){var X=D.touches[0];D=X?X:D.changedTouches[0]}var d=q.$36h=new Image,_=v.$10h[v.sm().ld().getId()].querySelector(".image-box"),B=parseInt(_.style.width),J=parseInt(_.style.height);d.draggable=!1,d.src=_.toDataURL(),d.width=B,d.height=J,d.style.position="absolute",d.style.left=D.pageX-B/2+G,d.style.top=D.pageY-J/2+G,R().appendChild(d)}}},$27h:function($){var k=this.$22h,U=k.getView(),F=U.getBoundingClientRect(),c=k._29I,v=$.clientX-F.left+U.scrollLeft;return k._41o()&&c.x+c.width-v<h}}),ht.widget.Palette=function(f){var d=this,Z=d._view=S.createView(null,d);d.$9h={},d.$10h={},d.$4h={},d._29I={x:0,y:0,width:0,height:0},d._59I=0,d.dm(f?f:new ht.DataModel),Z[E]="ht-widget-palette",d.$29h=new b(d),w(Z,r,C.paletteContentBackground),w(Z,v,"auto"),w(Z,Q,l),w(Z,"-moz-"+Q,l),w(Z,"-webkit-"+I,x),w(Z,"-moz-"+I,x),w(Z,"-ms-"+I,x),w(Z,I,x),w(Z,"position","absolute"),w(Z,"overflow","hidden"),O(Z,d._79O=T()),j(Z,"dragstart",function(E){E.dataTransfer&&(E.dataTransfer.setData("Text","nodeid:"+E.target.$11h),E.dataTransfer.effectAllowed="all",d.$29h.$26h())})},q("Palette",P,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:C.autoHideScrollBar,_scrollBarSize:C.scrollBarSize,_scrollBarColor:C.scrollBarColor,getViewRect:function(){return this._29I},ty:function(E){return E==t?this.getTranslateY():(this.setTranslateY(E),void 0)},setTranslateY:function(R){if(this.$32h==t){var v=this,Z=v.$33h(R),P=v.$30h;v.$30h=Z,v.fp("translateY",P,Z)}},getTranslateY:function(){return this.$30h},setLayout:function(d){var f,c,q=this,r=q._layout;q._layout=d,"smallicons"===d?f=c=20:"iconsonly"===d?f=c=50:(f=70,c=50),q.setItemImageWidth(f),q.setItemImageHeight(c),q.setItemImagePadding(4),q.fp("layout",r,d)},getDataAt:function(g){for(var e=g.target;e&&e.$11h==t;)e=e.parentNode;return e&&e.$11h!=t?this.getDataModel().getDataById(e.$11h):void 0},$20h:function(){var G=16;return d&&(G*=1.2),G},$19h:function(){return C.paletteTitleHeight},$18h:function(){var o=C.paletteSeparatorWidth,X=C.paletteTitleBackground,u=C.paletteSeparatorColor||C.brighter(X);return o+G+" solid "+u},$17h:function(C){w(C,"cursor","pointer"),w(C,"display","inline-block"),w(C,"margin-right",(d?8:4)+G),w(C,"vertical-align",s)},$1h:function(F){var b=this,D=M(),T=M(),L=u("span");D[E]="palette-header",w(D,p,"relative"),w(D,r,C.paletteTitleBackground),w(D,"color",C.paletteTitleLabelColor),w(D,s,f),w(D,Q,l),w(D,"-moz-"+Q,l),w(D,"padding","0 5px 0 0"),w(D,"border-top",b.$18h()),w(D,g,"100%"),w(D,"cursor","pointer"),w(D,"white-space","nowrap"),w(D,v,"hidden"),w(D,a,C.paletteTitleLabelFont),w(D,"line-height",b.$19h()+G),D.$11h=F.getId();var d=y(),W=b.$19h(),n=b.$20h();b.$17h(d),S.setCanvas(d,n,W),O(D,d);var A=F.s("tools");if(A)for(var z=0;z<A.length;z++){var R=y();b.$17h(R),S.setCanvas(R,n,W),R[E]="palette-header-tool palette-header-tool"+F.getId()+"-"+z,R.style.position="absolute",R.style.right=(n+10)*z+"px",R.toolIndex=z,O(D,R)}return d[E]="palette-toggle-icon-"+F.getId(),T[E]="palette-content",w(T,"max-height",0+G),w(T,a,C.paletteContentLabelFont),w(T,v,"hidden"),T.$11h=F.getId(),b.$9h[F.getId()]=T,L[i]=F.getName(),w(L,a,C.paletteTitleLabelFont),O(D,d),O(D,L),[D,T]},$2h:function(g){var V=this,I=V._layout,D=B&&g.s("draggable")?u("a"):M(),p=y(),t=M(),e=g.getName()||"",K=g.s("title")||g.getToolTip()||e,L=V._itemMargin;p[E]="image-box";var Z=V.getItemImageWidth(),h=V.getItemImageHeight();return S.setCanvas(p,Z,h),O(D,p),t[i]=e,t[E]="label-box","iconsonly"!==I&&O(D,t),D[E]="palette-item",w(D,"vertical-align",s),w(D,"cursor","pointer"),w(D,"border-radius",5+G),w(D,"border","1px solid transparent"),w(D,"text-align","center"),w(D,"display","inline-block"),w(D,"margin-left",L+G),w(D,"margin-top",L+G),w(D,"color",C.paletteContentLabelColor),"smallicons"===I?(w(p,"vertical-align","middle"),w(D,"margin-left",2+G),w(D,"margin-top",2+G),w(D,"padding",2+G),w(D,"text-align",W),w(t,"display","inline-block"),w(t,"min-width",V.$21h+V._itemMargin+G)):"largeicons"===I&&(w(t,"max-width",Z+G),w(t,"overflow","hidden")),D.$11h=g.getId(),K&&(D.title=K),g.s("draggable")&&!V.handleDragAndDrop&&(B?(D.href="#",w(D,"text-decoration",x)):D.draggable="true"),D},$16h:function(M,G,D,H){var X=S.initContext(M);S.translateAndScale(X,0,0,1),X.clearRect(0,0,D,D);var w=(D-H)/2;C.drawStretchImage(X,C.getImage(G),"fill",0,w,H,H),X.restore()},$15h:function(O){var L=this,s=O.getId(),x=L._view.querySelector(".palette-toggle-icon-"+s),l=O.isExpanded()?C.paletteCollapseIcon:C.paletteExpandIcon;if(x&&l){var q=L.$19h(),$=L.$20h();L.$16h(x,l,q,$)}},_drawToolsIcon:function(i){var e=this,y=i.s("tools");if(y)for(var d=0;d<y.length;d++){var m=e._view.querySelector(".palette-header-tool"+i.getId()+"-"+d),f=y[d].icon,k=e.$19h(),P=e.$20h();e.$16h(m,f,k,P)}},$14h:function(u){var z=this,I=u.getId(),b=z.$10h[I].querySelector(".image-box"),w=u.getImage(),g=u.s("image.stretch");if(b&&w){var n=S.initContext(b),J=z.getItemImagePadding();J="smallicons"===z._layout?J/2:J;var i=z.getItemImageWidth()-2*J,q=z.getItemImageHeight()-2*J;S.translateAndScale(n,0,0,1),n.clearRect(0,0,i,q),C.drawStretchImage(n,C.getImage(w),g,J,J,i,q,u,z,z.getBodyColor(u)),n.restore()}},validateImpl:function(){var e,Q,m,r=this,N=r.$9h,k=r._layout,q=r.$10h,W=r.$4h,D=r._view,d=r.dm();if(r.$13h&&(delete r.$13h,W={},d.each(function(o){W[o.getId()]=o})),"smallicons"===k)for(var j in W){var h=W[j];if(h instanceof H){var P=h.getName()||"",g=C.getTextSize(C.paletteContentLabelFont,P).width;r.$21h!=t&&r.$21h>g||(r.$21h=g)}}for(var j in W){m=W[j];var z,o;if(d.contains(m)){if(m instanceof ht.Group){var l,Z=r.$1h(m),x=q[m.getId()];x&&(l=x.nextSibling,c(D,l),c(D,x)),Q=d.getSiblings(m).indexOf(m);var U=D.children[2*Q]||r._79O;U&&U.parentNode?(D.insertBefore(Z[0],U),D.insertBefore(l||Z[1],U)):(D.appendChild(Z[0]),D.appendChild(l||Z[1])),q[m.getId()]=Z[0],e=N[m.getId()]=l||Z[1],o=m.$12h;var B=m.s("promptText");o||(m.$12h=u("div"),m.$12h[i]=B||"",o=m.$12h),0===m.getChildren().size()?e.contains(o)||O(e,o):e.contains(o)&&c(e,o)}else if(z=m.getParent()){var b=r.$2h(m),T=q[m.getId()];e=N[z.getId()],T&&c(T.parentNode,T),Q=d.getSiblings(m).indexOf(m);var w=e.children[Q];w?e.insertBefore(b,w):O(e,b),q[m.getId()]=b,r.$14h(m)}}else{var v=q[m.getId()],E=v.parentNode;if(m instanceof ht.Group){var n=v.nextSibling;c(D,v),c(D,n),delete N[m.getId()]}else c(E,v),0===E.children.length&&(z=d.getDataById(E.$11h),z&&(o=z.$12h,o&&!E.contains(o)&&O(E,o)));delete q[m.getId()]}}r.$4h={};var K=function(){var w=r._59I,y=0;r.$32h!=t&&(clearInterval(r.$32h),y=0,delete r.$32h),r.$32h=setInterval(function(){r.$31h(),w===r._59I?(y++,y>=2&&(clearInterval(r.$32h),delete r.$32h)):(y=0,w=r._59I)},30)};for(var _ in N)if(e=N[_],m=d.getDataById(N[_].$11h),r.$15h(m),r._drawToolsIcon(m),m.isExpanded()){if(e.style.maxHeight===0+G){var M=e.scrollHeight+r._itemMargin+G;F(e).duration(200).set(J,M).set("padding-bottom",r._itemMargin+G).end(function(){return function(){K()}}(M))}else e.style.maxHeight=e.scrollHeight+G;e.style.paddingBottom=r._itemMargin+G}else e.style.maxHeight!==0+G&&F(e).duration(200).set(J,f).set("padding-bottom",f).end(function(){return function(){K()}}(e));r.$28h(),r.$31h()},$31h:function(){for(var Q=this,W=Q._view,N=0,u=W.children,F=0;F<u.length;F++){var H=u[F];H.className&&H.className.indexOf("palette-")>=0&&(N+=H.offsetHeight)}Q._59I=N,Q.$30h=Q.$33h(Q.ty());var $=Q.ty();W.scrollTop=-$,Q._29I={x:0,y:-$,width:W.clientWidth,height:W.clientHeight},w(Q._79O,s,-$+G),Q._93I()},$33h:function(e){var I=this,P=I._29I.height-I._59I;return P>e&&(e=P),e>0?0:Math.round(e)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function($){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf($.property)<0&&this.redraw(),"translateY"===$.property&&(this.iv(),this._43o())},findDataByName:function(g){for(var f=this.dm().getDatas(),W=0;W<f.size();W++){var G=f.get(W);if(G.getName()===g)return G}},setDataModel:function(Q){var K=this,O=K._dataModel,H=K._selectionModel;O!==Q&&(O&&(O.umm(K.$6h,K),O.umd(K.$8h,K),O.umh(K.$7h,K),H||O.sm().ums(K.$28h,K)),K._dataModel=Q,Q.mm(K.$6h,K),Q.md(K.$8h,K),Q.mh(K.$7h,K),H?H._21I(Q):Q.sm().ms(K.$28h,K),K.sm().setSelectionMode("single"),K.fp("dataModel",O,Q))},$6h:function(I){var u=this,s=u._view,d=I.data,v=u.$4h;"add"===I.kind?v[d.getId()]=d:"remove"===I.kind?v[d.getId()]=d:"clear"===I.kind&&(u.$10h={},u.$9h={},u.$4h={},s[i]=""),u.iv()},$7h:function(r){var W=this,E=r.data;W.$4h[E.getId()]=E,W.iv()},$8h:function(C){var J=this,r=C.data,g=C.property;"expanded"===g?J.iv():(J.$4h[r.getId()]=r,J.iv())},$28h:function(){var t,h=this,W=h.sm(),m="palette-item",j=W.ld();this.dm().each(function(D){t=h.$10h[D.getId()],t&&t[E].indexOf(m)>=0&&(D===j?w(t,r,C.paletteItemSelectBackground):o(t,r))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);