!function(Z,b){"use strict";var E="ht",d=E+".graph.",$=Z[E],s=$.graph,a=$.Default,R=$.Color,B=null,C="px",x=a.getInternal(),H=x.getPinchDist,c=a.preventDefault,T=a.getTouchCount,n=a.startDragging;x.addMethod(a,{overviewBackground:R.widgetBackground,overviewMaskBackground:R.transparent,overviewContentBorderColor:R.widgetBorder,overviewContentBackground:R.background},!0),s.Overview=function(H){var R=this,p=R._view=x.createView(1,R);R._canvas=x.createCanvas(p),p.style.background=a.overviewBackground,p.appendChild(R._mask=x.createDiv()),R.setGraphView(H),R.addListeners()},a.def(d+"Overview",b,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:a.overviewMaskBackground,_contentBorderColor:a.overviewContentBorderColor,_contentBackground:a.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(o){var T=this;if(T.gv!==o){var B=T.gv;T.gv=o,B&&(B.removeViewListener(T.handleGraphViewChanged,T),B.ump(T.handleGraphViewPropertyChanged,T)),o&&(o.addViewListener(T.handleGraphViewChanged,T),o.mp(T.handleGraphViewPropertyChanged,T)),T.fp("graphView",B,o),T.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function($){this._autoUpdate&&"validate"===$.kind&&this.redraw()},handleGraphViewPropertyChanged:function(o){("canvasBackground"===o.property||this.getFixToRect()&&("zoom"===o.property||"translateX"===o.property||"translateY"===o.property))&&this.redraw()},redraw:function(){var T=this;T._redraw||(T._redraw=1,T.iv(50))},validateImpl:function(){var j=this,n=j.gv,i=j._canvas,Z=j.getWidth(),F=j.getHeight(),S=j._redraw,y=a.devicePixelRatio;if(n){var J=j._mask,G=J.style,T=n.getViewRect(),m=this.getFixToRect(),O=m?"boolean"==typeof m?n.getContentRect():m:n.getScrollRect(),o=O.x,q=O.y,d=O.width,Y=O.height,N=j._rate=Math.max(d/Z,Y/F),s=j._x=(Z-d/N)/2,A=j._y=(F-Y/N)/2;if(0!==T.width&&0!==T.height||j.hasRetry||(a.callLater(j.iv,j,B),j.hasRetry=!0),(Z!==i.clientWidth||F!==i.clientHeight)&&(x.setCanvas(i,Z,F),S=1),x.isSameRect(O,j._scrollRect)||(j._scrollRect=O,S=1),S){var M=x.initContext(i),k=n.getDataModel(),l=k.getBackground()||j._contentBackground,h=j._contentBorderColor;M.clearRect(0,0,Z*y,F*y);var U=k.getBackground()&&k.a("width")>0&&k.a("height")>0;l&&!U&&x.fillRect(M,s*y,A*y,d/N*y,Y/N*y,l),x.translateAndScale(M,-o/N+s,-q/N+A,1/N),n._42(M),M.restore(),h&&x.drawBorder(M,h,s*y,A*y,d/N*y,Y/N*y)}G.background=j._maskBackground,G.left=s+(T.x-o)/N+C,G.top=A+(T.y-q)/N+C,G.width=T.width/N+C,G.height=T.height/N+C,j._redraw=null}else if(S){var M=x.initContext(i);M.clearRect(0,0,Z*y,F*y),M.restore(),j._redraw=null}},center:function(E){var J=this,V=J.gv;if(V){var w=V._zoom,M=V._29I,Q=J._rate,k=J._scrollRect,f=a.getLogicalPoint(E,J._canvas),S=k.x+(f.x-J._x)*Q,g=k.y+(f.y-J._y)*Q;V.setTranslate((M.width/2-S)*w,(M.height/2-g)*w)}},handle_mousedown:function(X){this.handle_touchstart(X)},handleWindowMouseUp:function(k){this.handleWindowTouchEnd(k)},handleWindowMouseMove:function(u){this.handleWindowTouchMove(u)},handle_mousewheel:function(Y){this.handleScroll(Y,Y.wheelDelta)},handle_DOMMouseScroll:function(m){2===m.axis&&this.handleScroll(m,-m.detail)},handleScroll:function(U,$){if(c(U),this.gv){var F=this.gv;$>0?F.scrollZoomIn():0>$&&F.scrollZoomOut()}},handle_touchstart:function(I){if(c(I),this.gv&&a.isLeftButton(I)){var p=this,Q=p.gv,q=T(I);1===q?a.isDoubleClick(I)&&Q.isResettable()?Q.reset():(p.center(I),n(p,I)):2===q&&(p._dist=H(I),n(p,I))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(g){if(this.gv){var y=this,x=y._dist,Z=T(g);1===Z?y.center(g):2===Z&&x!=B&&y.gv.handlePinch(B,H(g),x)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);