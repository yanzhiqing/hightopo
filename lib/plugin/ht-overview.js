!function(Y,j){"use strict";var k="ht",H=k+".graph.",N=Y[k],T=N.graph,h=N.Default,v=N.Color,X=null,b="px",L=h.getInternal(),$=L.getPinchDist,C=h.preventDefault,z=h.getTouchCount,S=h.startDragging;L.addMethod(h,{overviewBackground:v.widgetBackground,overviewMaskBackground:v.transparent,overviewContentBorderColor:v.widgetBorder,overviewContentBackground:v.background},!0),T.Overview=function(x){var z=this,j=z._view=L.createView(1,z);z._canvas=L.createCanvas(j),j.style.background=h.overviewBackground,j.appendChild(z._mask=L.createDiv()),z.setGraphView(x),z.addListeners()},h.def(H+"Overview",j,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:h.overviewMaskBackground,_contentBorderColor:h.overviewContentBorderColor,_contentBackground:h.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(s){var O=this;if(O.gv!==s){var t=O.gv;O.gv=s,t&&(t.removeViewListener(O.handleGraphViewChanged,O),t.ump(O.handleGraphViewPropertyChanged,O)),s&&(s.addViewListener(O.handleGraphViewChanged,O),s.mp(O.handleGraphViewPropertyChanged,O)),O.fp("graphView",t,s),O.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(G){this._autoUpdate&&"validate"===G.kind&&this.redraw()},handleGraphViewPropertyChanged:function(V){("canvasBackground"===V.property||this.getFixToRect()&&("zoom"===V.property||"translateX"===V.property||"translateY"===V.property))&&this.redraw()},redraw:function(){var x=this;x._redraw||(x._redraw=1,x.iv(50))},validateImpl:function(){var T=this,w=T.gv,K=T._canvas,q=T.getWidth(),I=T.getHeight(),m=T._redraw;if(w){var r=T._mask,k=r.style,z=w.getViewRect(),_=this.getFixToRect(),n=_?"boolean"==typeof _?w.getContentRect():_:w.getScrollRect(),y=n.x,x=n.y,t=n.width,M=n.height,V=T._rate=Math.max(t/q,M/I),E=T._x=(q-t/V)/2,J=T._y=(I-M/V)/2;if(0!==z.width&&0!==z.height||T.hasRetry||(h.callLater(T.iv,T,X),T.hasRetry=!0),(q!==K.clientWidth||I!==K.clientHeight)&&(L.setCanvas(K,q,I),m=1),L.isSameRect(n,T._scrollRect)||(T._scrollRect=n,m=1),m){var g=L.initContext(K),H=w.getDataModel(),N=H.getBackground()||T._contentBackground,A=T._contentBorderColor,U=h.devicePixelRatio;g.clearRect(0,0,q*U,I*U);var D=H.getBackground()&&H.a("width")>0&&H.a("height")>0;N&&!D&&L.fillRect(g,E*U,J*U,t/V*U,M/V*U,N),L.translateAndScale(g,-y/V+E,-x/V+J,1/V),w._42(g),g.restore(),A&&L.drawBorder(g,A,E*U,J*U,t/V*U,M/V*U)}k.background=T._maskBackground,k.left=E+(z.x-y)/V+b,k.top=J+(z.y-x)/V+b,k.width=z.width/V+b,k.height=z.height/V+b,T._redraw=null}else if(m){var g=L.initContext(K);g.clearRect(0,0,q,I),g.restore(),T._redraw=null}},center:function(H){var o=this,U=o.gv;if(U){var m=U._zoom,R=U._29I,_=o._rate,u=o._scrollRect,M=h.getLogicalPoint(H,o._canvas),l=u.x+(M.x-o._x)*_,E=u.y+(M.y-o._y)*_;U.setTranslate((R.width/2-l)*m,(R.height/2-E)*m)}},handle_mousedown:function(_){this.handle_touchstart(_)},handleWindowMouseUp:function(u){this.handleWindowTouchEnd(u)},handleWindowMouseMove:function(F){this.handleWindowTouchMove(F)},handle_mousewheel:function(P){this.handleScroll(P,P.wheelDelta)},handle_DOMMouseScroll:function(u){2===u.axis&&this.handleScroll(u,-u.detail)},handleScroll:function(J,I){if(C(J),this.gv){var V=this.gv;I>0?V.scrollZoomIn():0>I&&V.scrollZoomOut()}},handle_touchstart:function(r){if(C(r),this.gv&&h.isLeftButton(r)){var E=this,A=E.gv,M=z(r);1===M?h.isDoubleClick(r)&&A.isResettable()?A.reset():(E.center(r),S(E,r)):2===M&&(E._dist=$(r),S(E,r))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(Q){if(this.gv){var s=this,l=s._dist,y=z(Q);1===y?s.center(Q):2===y&&l!=X&&s.gv.handlePinch(X,$(Q),l)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);