!function(z){"use strict";var x="ht",U=z[x],S=U.Default,k=Math,E=(k.PI,k.sin,k.cos,k.atan2,k.sqrt,k.max),N=k.floor,v=(k.round,k.ceil),M=U.Shape,K=(U.Edge,U.List),L=U.Style,G=U.graph,r=S.getInternal(),Y=r.ui(),s=null,J="prototype",D=z.clearInterval,y=z.setInterval,C=function(N){var x=N.data,j=this.dm();if(x&&"add"===N.kind){var t=j.$1c,U=x instanceof M?"shape.":"edge.";t&&x.s(U+"dash.flow")&&t.indexOf(x)<0&&t.push(x)}"clear"===N.kind&&(j.$1c=[])},I=function(w){var X=w.property,l=w.data,x=w.newValue,A=this.dm().$1c,Q=l instanceof M?"s:shape.dash.flow":"s:edge.dash.flow";if(A&&X===Q)if(x)A.indexOf(l)<0&&A.push(l);else for(var h=A.length,u=0;h>u;u++)if(A[u]===l){A.splice(u,1);break}},$=G.GraphView[J],i=Y.EdgeUI[J],g=Y.ShapeUI[J],o=g._80o,h=i._80o,A=U.DataModel[J],q=A.prepareRemove,d=$.setDataModel;L["edge.dash.flow.step"]==s&&(L["edge.dash.flow.step"]=3),L["shape.dash.flow.step"]==s&&(L["shape.dash.flow.step"]=3),A.prepareRemove=function(s){q.call(this,s);var I=s._dataModel,J=I.$1c;if(J)for(var C=J.length,U=0;C>U;U++)if(J[U]===s){J.splice(U,1);break}},$.setDataModel=function(X){var Z=this,S=Z._dataModel;if(S!==X){S&&(S.umm(C,Z),S.umd(I,Z),S.$1c=[]),X.mm(C,Z),X.md(I,Z);var p=X.$1c=[];X.each(function(n){var d=n instanceof M?"shape.":"edge.";n.s(d+"dash.flow")&&p.indexOf(n)<0&&p.push(n)}),d.call(Z,X)}},$.setDashFlowInterval=function(N){var h=this,y=h.$2c;h.$2c=N,h.fp("dashFlowInterval",y,N),h.$3c!=s&&(D(h.$3c),delete h.$3c,h.enableDashFlow(N))},$.getDashFlowInterval=function(){return this.$2c},$.$4c=function(){var f,I,$,X=this,A=X.tx(),p=X.ty(),l=X._zoom,t=X.getWidth(),O=X.getHeight(),C={x:-A/l,y:-p/l,width:t/l,height:O/l},D=X.dm().$1c,y=X._56I,k=new K;if(D.forEach(function(B){y[B.getId()]&&(f=X.getDataUI(B),f&&($=f._79o(),$&&k.add($)))}),0!==k.size()&&(k.each(function(N){S.intersectsRect(C,N)&&(I=S.unionRect(I,N))}),I&&(I&&(S.grow(I,E(1,1/l)),I.x=N(I.x*l)/l,I.y=N(I.y*l)/l,I.width=v(I.width*l)/l,I.height=v(I.height*l)/l,I=S.intersection(C,I)),I))){var g=X._canvas.getContext("2d");g.save(),g.lineCap=S.lineCap,g.lineJoin=S.lineJoin;var U=S.devicePixelRatio,s=I.x,L=I.y,x=I.width,J=I.height;s=Math.floor((s*l+A)*U),L=Math.floor((L*l+p)*U),x=Math.ceil(x*l*U)+1,J=Math.ceil(J*l*U)+1,I.x=(s/U-A)/l,I.y=(L/U-p)/l,I.width=x/U/l,I.height=J/U/l,g.beginPath(),g.rect(s,L,x,J),g.clip(),g.clearRect(s,L,x,J),r.translateAndScale(g,A,p,l),X.$5c(g,I),g.restore()}},$.$5c=function(f,v){var V,T,y=this;y._93db(f),y.each(function(_){y._56I[_._id]&&(V=y.getDataUI(_),V&&(T=V._79o(),(!v||S.intersectsRect(v,T))&&(V.$7c=!0,V._42(f),delete V.$7c)))}),y._92db(f)},$.enableDashFlow=function(Z){var e=this;e.$3c==s&&(e.$3c=y(function(){e.$4c()},Z||e.$2c||50))},$.disableDashFlow=function(){var v=this;D(v.$3c),delete v.$3c};var c=function(){var z=this,c=z._data,q=c instanceof M?"shape.":"edge.",m=c.s(q+"dash.pattern"),Z=c.s(q+"dash.flow.reverse");if(m&&c.s(q+"dash")&&c.s(q+"dash.flow")&&z.$7c){var Q=z.s(q+"dash.offset")||0,X=c.s(q+"dash.flow.step"),G=c.getStyleMap(),W=0;m.forEach(function(S){W+=S}),Z&&(X=-X),Q-=X,Q%=W,G||(c._styleMap=G={}),G[q+"dash.offset"]=Q}};i._80o=function(g){h.call(this,g),c.call(this)},g._80o=function(B){o.call(this,B),c.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);