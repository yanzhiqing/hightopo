!function(E,g){"use strict";var q="ht",Q=E[q],t="px",$="left",D="top",i="bottom",U="right",j="innerHTML",h="className",L="",J="width",T="height",K="string",k="position",l="absolute",F="0",C="opacity",V="background",s=Q.Default,R=s.getInternal(),G=Q.Color,X=s.animate,v=s.isTouchable,w=s.isTouchEvent,B=null,x=(Math.sqrt,E.parseInt),H=E.setTimeout,f=(Math.round,G.titleIconBackground),u=function(c){return typeof c===K||c instanceof String},n=function(){return document},r=function(O){return n().createElement(O)},c=function(){var M=r("div");return M.tabIndex=-1,M.style.outline="none",M},A=function(){return r("canvas")},b=function(s,Y){O(s,"-webkit-transform",Y),O(s,"-ms-transform",Y),O(s,"transform",Y)},O=function(v,o,w){v.style.setProperty(o,w,B)},d=function(v,x,N){s.def(Q.widget[v],x,N)},S=function(Q,f){Q.appendChild(f)},e=function(){return n().documentElement},W=function(){return e().clientWidth},Z=function(){return e().clientHeight},Y=R.addEventListener,I=R.removeEventListener,p=function(t){var Y=t.touches[0];return Y?Y:t.changedTouches[0]};R.addMethod(s,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:f},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:f}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:f},{type:"rect",rect:[10,10,80,20],background:f}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:f},{type:"rect",rect:[10,34,56,14],background:f},{type:"rect",rect:[34,10,56,14],background:f},{type:"rect",rect:[82,10,8,56],background:f},{type:"rect",rect:[66,62,24,8],background:f}]},dialogTitleLabelColor:s.labelSelectColor,dialogTitleLabelFont:(v?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:s.labelFont,dialogTitleBackground:G.titleBackground,dialogHeaderBackground:G.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var y=function(y){var t=this;t.$1d=y,t.addListeners()};s.def(y,g,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(j){var d=this,A=d.$1d,T=A.$6d,u=A._config,D=A.$7d,V=j,h=j.target;if(D.contains(h)||s.preventDefault(j),s.isLeftButton(j)){w(j)&&(V=p(j));var $=d.$8d={x:V.pageX,y:V.pageY};d.$9d={x:$.x,y:$.y},!u.maximized&&u.draggable&&T.contains(h)&&(d.$4d=!0,s.startDragging(d,j)),d.handle_mousemove(j)&&(d.$2d=!0,s.startDragging(d,j)),D.contains(j.target)||A.$41d.focus()}},handle_mousedown:function(o){this.handle_touchstart(o)},handle_touchend:function(e){if(s.isLeftButton(e)&&!this.$5d&&!this.$3d){var p=this,o=p.$1d,i=e.target,V=o._config,z=o.$18d,b=o.$16d;for(V.closable&&z.contains(i)&&o.hide(),V.maximizable&&b.contains(i)&&(V.maximized?o.restore():o.maximize());i&&(i.className||"").indexOf("dialog-button")<0;)i=i.parentNode;i&&i.buttonItem&&o.action&&o.action(i.buttonItem,e),delete p.$8d,delete p.$9d}},handle_mouseup:function(C){this.handle_touchend(C)},handleWindowTouchEnd:function(Q){var S=this,f=S.$1d,H=f.$10d;S.$2d&&S.$3d?H.fire({kind:"endResize",target:f,originEvent:Q}):S.$4d&&S.$5d&&H.fire({kind:"endMove",target:f,originEvent:Q}),this.clear()},handleWindowMouseUp:function(w){this.handleWindowTouchEnd(w)},handle_mousemove:function(q){var F=this.$1d._config;if(F.maximized)return!1;if("w"!==F.resizeMode&&"h"!==F.resizeMode&&"wh"!==F.resizeMode)return!1;var r=this,B=r.getView(),T=B.querySelector(".resize-area"),Y=T.getBoundingClientRect(),R={x:Y.left,y:Y.top,width:Y.width,height:Y.height};q=w(q)?p(q):q;var h=q.clientX,k=q.clientY,V={x:h,y:k};return s.containsPoint(R,V)?(O(B,"cursor","nwse-resize"),!0):(O(B,"cursor",L),void 0)},handleWindowTouchMove:function(L){L.preventDefault();var H=L;w(L)&&(H=p(L));var X=this,R=X.$8d,d=X.$9d;if(!(d.x==R.x&&d.y==R.y&&s.getDistance(d,{x:H.pageX,y:H.pageY})<=1)){var _=X.$1d,y=_._config,F=_.$21d,E=y.resizeMode||"wh",A=H.pageX-R.x,i=H.pageY-R.y;if(X.$2d){var r=F.offsetWidth,e=F.offsetHeight,S=r+A,G=e+i;if(S=Math.max(S,50),G=Math.max(G,50),"center"===y.position||y.position==B){var T={},C=F.getBoundingClientRect();T.x=C.left,T.y=C.top,y.position=T}"w"===E?(_.setSize(S,e),R.x+=S-r):"h"===E?(_.setSize(r,G),R.y+=G-e):"wh"===E&&(_.setSize(S,G),R.x+=S-r,R.y+=G-e),X.$3d?_.$10d.fire({kind:"betweenResize",target:_,originEvent:L}):(X.$3d=!0,_.$10d.fire({kind:"beginResize",target:_,originEvent:L}))}else if(X.$4d){var b=F.getBoundingClientRect(),z=b.width,J=b.height,Q=W(),V=Z(),h=x(F.style.left)||0,v=x(F.style.top)||0,M=h+A,g=v+i,u=_.adjustPosition({x:M,y:g},{width:z,height:J},{width:Q,height:V});u&&(M=u.x,g=u.y);var P=M-h,o=g-v;O(F,$,M+t),O(F,D,g+t),R.x+=P,R.y+=o,y.position={x:M,y:g},X.$5d?_.$10d.fire({kind:"betweenMove",target:_,originEvent:L}):(X.$5d=!0,_.$10d.fire({kind:"beginMove",target:_,originEvent:L}))}}},handleWindowMouseMove:function(o){this.handleWindowTouchMove(o)},handleWindowResize:function(){var v=this,R=v,r=R._config,Q=R.$21d,P=W(),c=Z(),C=r.width,l=r.height,i=r.position||"center";r.maximized?(O(Q,J,P+t),O(Q,T,c+t),O(Q,D,F),O(Q,$,F)):(O(Q,J,C+t),O(Q,T,l+t),"center"===i?(O(Q,$,(P-C)/2+t),O(Q,D,(c-l)/2+t)):(O(Q,$,i.x+t),O(Q,D,i.y+t))),R.iv()},handle_mousewheel:function(m){m.stopPropagation()},handle_DOMMouseScroll:function(_){_.stopPropagation()}}),Q.widget.Dialog=function(c){var a=this,e=a._view=R.createView(null,a);e[h]="ht-widget-dialog",O(e,k,l),O(e,D,F),O(e,i,F),O(e,$,F),O(e,U,F),O(e,J,"auto"),O(e,T,"auto"),s.baseZIndex!=B&&O(e,"z-index",s.baseZIndex+"");var N=a.$11d=new y(a);a.bindingHandleWindowResize=N.handleWindowResize.bind(a),a.$10d=new Q.Notifier,c&&a.setConfig(c)},d("Dialog",g,{ms_v:1,ms_fire:1,_modal:!0,setTitle:function(k){this._config.title=k,this.getView().querySelector(".dialog-container-title span").innerHTML=k},clearNodes:function(y){if(y)for(;y.firstChild;)y.removeChild(y.firstChild)},$31d:function(){var H=this,o=H.$6d=c(),R=H._config,T=H.$12d=H.$13d();o[h]="dialog-container-title",O(o,"cursor","default"),O(o,"white-space","nowrap"),O(o,"overflow","hidden"),O(o,"font",s.dialogTitleLabelFont),O(o,V,R.titleBackground||s.dialogTitleBackground),O(o,"color",R.titleColor||s.dialogTitleLabelColor);var a=r("span"),J=H.$25d();if(R.titleAlign&&O(o,"text-align",R.titleAlign),R.titleIcon){var X=H.$14d=H.$15d();S(o,X)}if(R.title&&R.title.trim&&(R.title=R.title.trim()),a[j]=R.title||"&nbsp;",S(o,a),R.maximizable){var u=H.$16d=H.$17d();S(T,u)}if(R.closable){var P=H.$18d=H.$19d();S(T,P)}return S(o,T),O(o,"display","block"),O(o,"line-height",J+t),o},$13d:function(){var q=c();return O(q,k,l),O(q,$,F),O(q,U,5+t),O(q,D,F),O(q,i,F),O(q,"text-align",U),O(q,"white-space","nowrap"),q[h]="dialog-title-controls",q},$20d:function(){var Z=this.$21d=c(),e=this._config,_=e.borderWidth;return O(Z,k,"fixed"),O(Z,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),O(Z,"padding",F+" "+_+t+" "+_+t+" "+_+t),O(Z,"box-sizing","border-box"),O(Z,"-moz-box-sizing","border-box"),Z[h]="dialog-container",O(Z,V,e.titleBackground||s.dialogTitleBackground),Z},$22d:function(){var I,o=this,_=o._config,n=o.$7d=c(),M=_.content,d=0,X=_.contentPadding||0;_.buttons!=B&&_.buttons.length>0&&(d=32),u(M)?n[j]=M:M.getView?(I=M.getView(),S(n,I)):(I=M,S(n,I)),O(n,k,l),O(n,"font",s.dialogContentLabelFont),_.width&&O(n,J,_.width-10-2*X+t),Q.Default.appendToScreen(n);var W=n.offsetWidth+1,p=n.offsetHeight,V=o.$25d();return _.width==B?_.width=W+10+2*X:O(n,J,"auto"),_.height==B&&(_.height=p+V+d+5+2*X),Q.Default.removeHTML(n),I&&(O(I,"box-sizing","border-box"),O(I,"-moz-box-sizing","border-box"),O(I,J,"100%"),O(I,T,"100%")),n[h]="dialog-content",O(n,D,V+X+t),O(n,i,d+X+t),O(n,$,X+t),O(n,U,X+t),O(n,"overflow","hidden"),n},getOverlayDiv:function(){return this.$41d},$23d:function(){if(this.$41d)return this.$41d;var R=this.$41d=c();return R[h]="dialog-overlay",O(R,k,l),O(R,D,F),O(R,i,F),O(R,$,F),O(R,U,F),O(R,V,"rgba(235, 235, 235, 0.7)"),R},_config:B,setSize:function(j,a){var r=this,T=r._config;T&&(T.width=j,T.height=a,r.isShowing()&&(r.bindingHandleWindowResize(),r.iv()))},getConfig:function(){return this._config},$24d:function(){var D=this._config,F=D.titleIconSize||16;return v&&(F*=1.2),F},$25d:function(){var q=this._config,N=q.titleHeight||s.widgetTitleHeight;return N},$26d:function(P){O(P,"cursor","pointer"),O(P,"display","inline-block"),O(P,"margin-right",(v?8:4)+t),O(P,"vertical-align",D)},$27d:function(){var M=this.$30d=c(),Q=10;return v&&(Q=20),O(M,J,Q+t),O(M,T,Q+t),O(M,k,l),O(M,i,F),O(M,U,F),M[h]="resize-area",M},$15d:function(){var W=this,u=A();u[h]="dialog-title-control dialog-title-control-icon";var L=W.$25d(),F=W.$24d();return W.$26d(u),R.setCanvas(u,F,L),u},$17d:function(){var X=A();X[h]="dialog-title-control dialog-title-control-maximize";var v=this.$25d(),o=this.$24d();return this.$26d(X),R.setCanvas(X,o,v),X},$19d:function(){var B=A();B[h]="dialog-title-control dialog-title-control-close";var T=this.$25d(),S=this.$24d();return this.$26d(B),R.setCanvas(B,S,T),B},$28d:function(){var $=c();return O($,V,s.dialogContentBackground||"white"),O($,J,"100%"),O($,T,"100%"),O($,k,"relative"),$},$29d:function(){var Y=this,u=c();O(u,"line-height",32+t),O(u,k,l),O(u,i,F),O(u,$,F),O(u,"white-space","nowrap"),O(u,"overflow","hidden"),O(u,U,F),O(u,V,s.dialogHeaderBackground),u[h]="dialog-container-buttons";var C=this._config,g=C.buttonsAlign||U,E=0;return O(u,"text-align",g),Y.$42d=[],C.buttons.forEach(function(P){var K={};for(var I in P)K[I]=P[I];P.background||(K.background=s.dialogButtonBackground),P.selectBackground||(K.selectBackground=s.dialogButtonSelectBackground),P.labelColor||(K.labelColor=s.dialogButtonLabelColor);var i=s.createObject(Q.widget.Button,K),Z=i.getView();Z[h]="dialog-button "+P.className,Z.buttonItem=P,Y.$42d.push(i),O(Z,k,"relative"),O(Z,"display","inline-block"),O(Z,"text-align",$),O(Z,"height",24+t);var a=v?10:5;g===$||g===U?O(Z,"margin-"+g,a+t):0===E||O(Z,"margin-"+$,a+t),O(Z,"vertical-align","middle");var L=s.getTextSize(i.getLabelFont(),P.label).width+10;i.onClicked=function(o){P.action&&P.action.call(Y,P,o)},O(Z,J,L+t),S(u,i.getView()),E++}),u},setConfig:function(a){if(a){var K=this,m=K._view;K._config=a,K.action=a.action,K.clearNodes(m),a.borderWidth==B&&(a.borderWidth=5);var T=K.$23d(),E=K.$28d(),H=K.$31d(),u=K.$22d(),i=K.$20d(),R=K.$30d=K.$27d();if(S(m,T),S(m,i),S(i,E),S(E,H),S(E,u),a.buttons!=B&&a.buttons.length>0){var e=K.$29d();S(E,e)}S(i,R),a.maximized?(a.maximized=!1,K.bindingHandleWindowResize(),K.maximize(!0)):K.bindingHandleWindowResize(),K.isShowing()&&K.iv()}},hide:function(){var n=this,G=n.$21d,l=n.$41d,S=n._view;S[h]="ht-widget-dialog",X(G).duration(200).scale(.7).set(C,F).end(function(){n.onHidden&&n.onHidden(),Q.Default.removeHTML(S),n.$10d.fire({kind:"hide",target:n})}),X(l).duration(200).set(C,F).end(),I(E,"resize",n.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(d){this._modal=d;var s=this.$23d();s.style.display=d?"block":"none";var o=this._view;O(o,J,d?"auto":F),O(o,T,d?"auto":F)},isModal:function(){return this._modal},$32d:function(){var V=this,h=V._config,T=V.$21d;b(T,L),V.iv(),h.maximized?V.$10d.fire({kind:"maximize",target:V}):V.$10d.fire({kind:"restore",target:V})},maximize:function(j){var C=this,c=C.$21d,r=C._config;if(!r.maximized){r.maximized=!0,C.$33d(),C.$16d[h]="dialog-title-control dialog-title-control-minimize";var S=r.width,v=r.height,F=x(c.style.left)||0,d=x(c.style.top)||0;C.$36d=S,C.$37d=v,C.$34d=F,C.$35d=d;var Q,q=j?0:200,K=this._view.parentNode;Q=K&&K!==document.body?this._view.parentNode.getBoundingClientRect():s.getWindowInfo(),X(c).duration(q).set($,Q.left+t).set(D,Q.top+t).set(J,Q.width+t).set(T,Q.height+t).end(function(){C.$32d()})}},restore:function(){var y=this,v=y.$34d,p=y.$35d,r=y.$36d,u=y.$37d,q=y._config;if(q.maximized&&(q.maximized=!1,y.$33d(),y.$16d[h]="dialog-title-control dialog-title-control-maximize",y.isShowing()&&v!=B&&p!=B&&r!=B&&u!=B)){var K=y.$21d;X(K).duration(200).set($,v+t).set(D,p+t).set(J,r+t).set(T,u+t).end(function(){y.$32d()})}delete y.$34d,delete y.$35d,delete y.$36d,delete y.$37d},show:function(c){var q=this,g=q._view,P=q._config,j=q.$21d,k=q.$41d;c=c||P.parentDOM,P&&P.zIndex!=B&&O(g,"z-index",P.zIndex+L),c?Q.Default.appendChild(c,g):Q.Default.appendToScreen(g),b(j,"scale(0.7)"),O(j,C,F),q.iv(),q.validate(),q._view[h]+=" dialog-show",H(function(){X(j).duration(200).scale(1).set(C,"1").end(function(){O(j,J,j.clientWidth+t),O(j,T,j.clientHeight+t),q.onShown&&q.onShown(),q.$10d.fire({kind:"show",target:q});var G=P&&P.content;G&&G.iv&&G.iv()}),X(k).duration(200).set(C,"1").end(),Y(E,"resize",q.bindingHandleWindowResize)},30)},setPosition:function(T){var H=this.$21d;H.style.left=T.x+"px",H.style.top=T.y+"px"},addEventListener:function(Q,n,h){this.$10d.add(Q,n,h)},removeEventListener:function(A,p){this.$10d.remove(A,p)},$38d:function(p,x,n,E){var Z=R.initContext(p);R.translateAndScale(Z,0,0,1),Z.clearRect(0,0,n,n);var W=(n-E)/2;s.drawStretchImage(Z,s.getImage(x),"fill",0,W,E,E),Z.restore()},$33d:function(){var $=this,w=$._config,A=$.$16d,F=w.maximized?s.dialogRestoreIcon:s.dialogMaximizeIcon;if(A&&F){var G=$.$25d(),B=$.$24d();$.$38d(A,s.getImage(F),G,B)}},$39d:function(){var o=this,X=o._config,F=o.$14d,p=X.titleIcon;if(F&&p){var b=o.$25d(),h=o.$24d();o.$38d(F,s.getImage(p),b,h)}},$40d:function(){var n=this,d=n.$18d,b=s.dialogCloseIcon;if(d&&b){var X=n.$25d(),x=n.$24d();n.$38d(d,s.getImage(b),X,x)}},invalidate:function(I){var Z=this,E=Z.$42d;Z._68I||(Z._68I=1,s.callLater(Z.validate,Z,B,I),Z.onInvalidated&&Z.onInvalidated(),Z.fireViewEvent("invalidate"));var k=Z._config.content;k.invalidate&&k.invalidate(),E&&E.forEach(function(E){E.iv()})},validateImpl:function(){var t=this;t.$40d(),t.$33d(),t.$39d();var I=t._config.content;I.initView&&(I.setX(0),I.setY(0),I.setWidth(t.$7d.clientWidth),I.setHeight(t.$7d.clientHeight))},adjustPosition:function(J,_,B){var u=_.width,T=_.height,K=B.width,W=B.height,Z=J.x,Y=J.y,R=this._config,I=R.minDragSize||20;return"inside"===R.dragMode?(Z+u>K&&(Z=K-u),Y+T>W&&(Y=W-T),0>Z&&(Z=0),0>Y&&(Y=0)):(null==R.dragMode||"none"===R.dragMode)&&(-u+I>Z&&(Z=-u+I),Z>K-I&&(Z=K-I),Y>W-I&&(Y=W-I),0>Y&&(Y=0)),{x:Z,y:Y}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);