!function(c){"use strict";var N="ht",k=c[N],z=Math,M=z.max,T=z.min,I=z.abs,m=z.atan2,r=(z.cos,z.sin,z.ceil),u=k.Default,v=u.getInternal(),R=k.List,A=v.Mat,b=v.getNodeRect,y=v.intersectionLineRect,g=u.getDistance,d=u.setEdgeType,h="left",w="right",W="top",L="bottom",n="edge.type",e="edge.gap",s="edge.center",f="edge.extend",B=function(r,E){return b(r,E).width},p=function(x,L){return b(x,L).height},o=function(i,h){return v.getEdgeHostPosition(i,h,"source")},J=function(r,n){return v.getEdgeHostPosition(r,n,"target")},q=function(L,S){var f=L.s(n),c=L.getEdgeGroup();if(c){var d=0;if(c.eachSiblingEdge(function(D){S.isVisible(D)&&D.s(n)==f&&d++}),d>1)return L.s(e)*(d-1)/2}return 0},O=function(J,o){var v=J.s(n),R=J.isLooped();if(!J.getEdgeGroup())return R?J.s(e):0;var F,g=0,b=0,t=0;return J.getEdgeGroup().getSiblings().each(function(k){k.each(function(y){if(y._40I===J._40I&&y.s(n)==v&&o.isVisible(y)){var O=y.s(e);F?(b+=t/2+O/2,t=O):(F=y,t=O),y===J&&(g=b)}})}),R?b-g+t:g-b/2},C=function(L,B){var G=B.s("edge.corner.radius");return u.toRoundedCorner(L,G)};v.addMethod(k.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),d("boundary",function(w,S,C,v){v||(S=-S);var l,u=o(C,w),Q=J(C,w),P=b(C,w._40I),Y=b(C,w._41I),t=new A(m(Q.y-u.y,Q.x-u.x)),q=g(u,Q),c=u.x,n=u.y;return l=t.tf(0,S),u={x:l.x+c,y:l.y+n},l=t.tf(q,S),Q={x:l.x+c,y:l.y+n},l=y(u,Q,P),l&&(u={x:l[0],y:l[1]}),l=y(u,Q,Y),l&&(Q={x:l[0],y:l[1]}),{points:new R([u,Q])}}),d("ripple",function(f,X,w,b){b||(X=-X);var D=o(w,f),e=J(w,f),$=g(D,e),y=T(f.s("edge.offset"),$/2),B=f.s("edge.ripple.size"),k=f.s("edge.ripple.length"),h=f.s("edge.ripple.both"),c=f.s(s),p=f.s("edge.ripple.elevation"),S=new R,v=f.s("edge.ripple.straight")?null:new R,l=new A(m(e.y-D.y,e.x-D.x));b||(p=-p),$-=2*y,k>0&&(B=r($/k));var t=$/B;v&&v.add(1);for(var W=0;B>W;W++)v&&v.add(3),0===W?S.add({x:y+t*W,y:c?0:X}):S.add({x:y+t*W,y:X}),S.add({x:y+t*W+t/2,y:p+X}),h&&(p=-p);for(S.add({x:y+$,y:c?0:X}),W=0;W<S.size();W++){var q=l.tf(S.get(W));q.x+=D.x,q.y+=D.y,S.set(W,q)}return{points:S,segments:v}}),d("h.v",function(T,$,D){$=O(T,D);var t=new R,v=T.s(s),w=o(D,T),r=w.x,M=w.y,y=J(D,T),u=y.x,E=y.y,K=T._40I instanceof k.Edge,g=T._41I instanceof k.Edge,L=0,P=0,A=u-r,F=E-M;return v||(L=K?0:B(D,T._40I)/2,P=g?0:p(D,T._41I)/2),A>=0&&0>=F?(t.add({x:r+L,y:M+$}),t.add({x:u+$,y:M+$}),t.add({x:u+$,y:E+P})):0>=A&&F>=0?(t.add({x:r-L,y:M+$}),t.add({x:u+$,y:M+$}),t.add({x:u+$,y:E-P})):A>=0&&F>=0?(t.add({x:r+L,y:M+$}),t.add({x:u-$,y:M+$}),t.add({x:u-$,y:E-P})):(t.add({x:r-L,y:M+$}),t.add({x:u-$,y:M+$}),t.add({x:u-$,y:E+P})),C(t,T)}),d("v.h",function(L,N,V){N=O(L,V);var n=new R,a=L.s(s),T=o(V,L),q=T.x,g=T.y,b=J(V,L),G=b.x,U=b.y,K=L._40I instanceof k.Edge,E=L._41I instanceof k.Edge,Z=0,u=0,w=G-q,S=U-g;return a||(Z=E?0:B(V,L._41I)/2,u=K?0:p(V,L._40I)/2),w>=0&&0>=S?(n.add({x:q+N,y:g-u}),n.add({x:q+N,y:U+N}),n.add({x:G-Z,y:U+N})):0>=w&&S>=0?(n.add({x:q+N,y:g+u}),n.add({x:q+N,y:U+N}),n.add({x:G+Z,y:U+N})):w>=0&&S>=0?(n.add({x:q-N,y:g+u}),n.add({x:q-N,y:U+N}),n.add({x:G-Z,y:U+N})):(n.add({x:q-N,y:g-u}),n.add({x:q-N,y:U+N}),n.add({x:G+Z,y:U+N})),C(n,L)}),d("ortho",function(a,K,F){var i=new R,y=a.s(s),b=a.s("edge.ortho"),t=a._40I,S=a._41I,r=o(F,a),w=r.x,T=r.y,O=J(F,a),q=O.x,Q=O.y,M=q-w,G=Q-T,v=t instanceof k.Edge,Z=S instanceof k.Edge,P=y||v?0:B(F,t)/2,Y=y||v?0:p(F,t)/2,D=y||Z?0:B(F,S)/2,n=y||Z?0:p(F,S)/2,g=(M-(P+D)*(M>0?1:-1))*b,z=(G-(Y+n)*(G>0?1:-1))*b;return I(M)<I(G)?M>=0&&0>=G?(i.add({x:w+K,y:T-Y}),i.add({x:w+K,y:T+z+K-Y}),i.add({x:q+K,y:T+z+K-Y}),i.add({x:q+K,y:Q+n})):0>=M&&G>=0?(i.add({x:w+K,y:T+Y}),i.add({x:w+K,y:T+z+K+Y}),i.add({x:q+K,y:T+z+K+Y}),i.add({x:q+K,y:Q-n})):M>=0&&G>=0?(i.add({x:w+K,y:T+Y}),i.add({x:w+K,y:T+z-K+Y}),i.add({x:q+K,y:T+z-K+Y}),i.add({x:q+K,y:Q-n})):(i.add({x:w+K,y:T-Y}),i.add({x:w+K,y:T+z-K-Y}),i.add({x:q+K,y:T+z-K-Y}),i.add({x:q+K,y:Q+n})):M>=0&&0>=G?(i.add({x:w+P,y:T+K}),i.add({x:w+g+K+P,y:T+K}),i.add({x:w+g+K+P,y:Q+K}),i.add({x:q-D,y:Q+K})):0>=M&&G>=0?(i.add({x:w-P,y:T+K}),i.add({x:w+g+K-P,y:T+K}),i.add({x:w+g+K-P,y:Q+K}),i.add({x:q+D,y:Q+K})):M>=0&&G>=0?(i.add({x:w+P,y:T+K}),i.add({x:w+g-K+P,y:T+K}),i.add({x:w+g-K+P,y:Q+K}),i.add({x:q-D,y:Q+K})):(i.add({x:w-P,y:T+K}),i.add({x:w+g-K-P,y:T+K}),i.add({x:w+g-K-P,y:Q+K}),i.add({x:q+D,y:Q+K})),C(i,a)}),d("flex",function(S,U,j){var _=new R,N=S.s("edge.flex")+q(S,j),r=S.s(s),E=S._40I,W=S._41I,c=o(j,S),u=c.x,H=c.y,l=J(j,S),O=l.x,t=l.y,z=E instanceof k.Edge,K=W instanceof k.Edge,T=O-u,v=t-H,g=r||z?0:B(j,E)/2,h=r||z?0:p(j,E)/2,b=r||K?0:B(j,W)/2,y=r||K?0:p(j,W)/2,X=T>0?N:-N,L=v>0?N:-N;return I(T)<I(v)?T>=0&&0>=v?(_.add({x:u+U,y:H-h}),_.add({x:u+U,y:H+L+U-h}),_.add({x:O+U,y:t-L+U+y}),_.add({x:O+U,y:t+y})):0>=T&&v>=0?(_.add({x:u+U,y:H+h}),_.add({x:u+U,y:H+L+U+h}),_.add({x:O+U,y:t-L+U-y}),_.add({x:O+U,y:t-y})):T>=0&&v>=0?(_.add({x:u+U,y:H+h}),_.add({x:u+U,y:H+L-U+h}),_.add({x:O+U,y:t-L-U-y}),_.add({x:O+U,y:t-y})):(_.add({x:u+U,y:H-h}),_.add({x:u+U,y:H+L-U-h}),_.add({x:O+U,y:t-L-U+y}),_.add({x:O+U,y:t+y})):T>=0&&0>=v?(_.add({x:u+g,y:H+U}),_.add({x:u+X+U+g,y:H+U}),_.add({x:O-X+U-b,y:t+U}),_.add({x:O-b,y:t+U})):0>=T&&v>=0?(_.add({x:u-g,y:H+U}),_.add({x:u+X+U-g,y:H+U}),_.add({x:O-X+U+b,y:t+U}),_.add({x:O+b,y:t+U})):T>=0&&v>=0?(_.add({x:u+g,y:H+U}),_.add({x:u+X-U+g,y:H+U}),_.add({x:O-X-U-b,y:t+U}),_.add({x:O-b,y:t+U})):(_.add({x:u-g,y:H+U}),_.add({x:u+X-U-g,y:H+U}),_.add({x:O-X-U+b,y:t+U}),_.add({x:O+b,y:t+U})),C(_,S)}),d("extend.east",function(g,d,N){var U=new R,W=g.s(f)+q(g,N),H=g.s(s),K=o(N,g),D=g._40I instanceof k.Edge,X=g._41I instanceof k.Edge,h=K.x+(H||D?0:B(N,g._40I)/2),x=K.y,P=J(N,g),r=P.x+(H||X?0:B(N,g._41I)/2),p=P.y,F=M(h,r)+W;return x>p?(U.add({x:h,y:x+d}),U.add({x:F+d,y:x+d}),U.add({x:F+d,y:p-d}),U.add({x:r,y:p-d})):(U.add({x:h,y:x-d}),U.add({x:F+d,y:x-d}),U.add({x:F+d,y:p+d}),U.add({x:r,y:p+d})),C(U,g)}),d("extend.west",function(X,M,l){var V=new R,d=X.s(f)+q(X,l),O=X.s(s),Q=X._40I instanceof k.Edge,D=X._41I instanceof k.Edge,Z=o(l,X),t=Z.x-(O||Q?0:B(l,X._40I)/2),m=Z.y,G=J(l,X),g=G.x-(O||D?0:B(l,X._41I)/2),i=G.y,n=T(t,g)-d;return m>i?(V.add({x:t,y:m+M}),V.add({x:n-M,y:m+M}),V.add({x:n-M,y:i-M}),V.add({x:g,y:i-M})):(V.add({x:t,y:m-M}),V.add({x:n-M,y:m-M}),V.add({x:n-M,y:i+M}),V.add({x:g,y:i+M})),C(V,X)}),d("extend.north",function(D,_,h){var E=new R,t=D.s(f)+q(D,h),V=D.s(s),x=D._40I instanceof k.Edge,B=D._41I instanceof k.Edge,g=o(h,D),L=g.x,M=g.y-(V||x?0:p(h,D._40I)/2),U=J(h,D),u=U.x,y=U.y-(V||B?0:p(h,D._41I)/2),j=T(M,y)-t;return L>u?(E.add({y:M,x:L+_}),E.add({y:j-_,x:L+_}),E.add({y:j-_,x:u-_}),E.add({y:y,x:u-_})):(E.add({y:M,x:L-_}),E.add({y:j-_,x:L-_}),E.add({y:j-_,x:u+_}),E.add({y:y,x:u+_})),C(E,D)}),d("extend.south",function(h,Q,T){var a=new R,w=h.s(f)+q(h,T),F=h.s(s),x=h._40I instanceof k.Edge,S=h._41I instanceof k.Edge,Z=o(T,h),B=Z.x,j=Z.y+(F||x?0:p(T,h._40I)/2),e=J(T,h),u=e.x,g=e.y+(F||S?0:p(T,h._41I)/2),O=M(j,g)+w;return B>u?(a.add({y:j,x:B+Q}),a.add({y:O+Q,x:B+Q}),a.add({y:O+Q,x:u-Q}),a.add({y:g,x:u-Q})):(a.add({y:j,x:B-Q}),a.add({y:O+Q,x:B-Q}),a.add({y:O+Q,x:u+Q}),a.add({y:g,x:u+Q})),C(a,h)});var _=function(k,z,C,j,x){if(j.sort(function(l,i){var d=l.getSourceAgent()===z?l.getTargetAgent():l.getSourceAgent(),D=i.getSourceAgent()===z?i.getTargetAgent():i.getSourceAgent(),G=d.p(),$=D.p();if(C===h||C===w){if(G.y>$.y)return 1;if(G.y<$.y)return-1}else{if(G.x>$.x)return 1;if(G.x<$.x)return-1}return u.sortFunc(l.getId(),i.getId())}),x){for(var E,W,Q,$=k.getSourceAgent(),X=k.getTargetAgent(),B=0;B<j.size();B++){var d=j.get(B);d.getSourceAgent()===$&&d.getTargetAgent()===X||d.getTargetAgent()===$&&d.getSourceAgent()===X?(W||(W=new R),W.add(d,0)):W?(Q||(Q=new R),Q.add(d)):(E||(E=new R),E.add(d))}j.clear(),E&&j.addAll(E),W&&j.addAll(W),Q&&j.addAll(Q)}var S=j.indexOf(k),O=j.size(),v=k.s(e);return{side:C,index:S,size:O,offset:-v*(O-1)/2+v*S}},Z=function(P,O,f,N,V){var L=O.s(n);return _(O,f,N,f.getAgentEdges().toList(function(N){return P.isVisible(N)&&N.s(n)===L}),V)},Y=function(B,q){var u=B.getSourceAgent()===q?B.getTargetAgent():B.getSourceAgent(),T=q.p(),Y=u.p(),P=Y.x-T.x,H=Y.y-T.y;return P>0&&I(H)<=P?w:0>P&&I(H)<=-P?h:H>0&&I(P)<=H?L:W},l=function(M,d,I){var R=d.s(n),f=Y(d,I);return _(d,I,f,I.getAgentEdges().toList(function(U){return M.isVisible(U)&&U.s(n)===R&&Y(U,I)===f}))},X=function(U,l){var O=U.getSourceAgent()===l,V=O?U.getTargetAgent():U.getSourceAgent(),P=l.p(),c=V.p();return O?P.y>c.y?W:L:P.x<c.x?w:h},K=function(F,B,p){var o=B.s(n),e=X(B,p);return _(B,p,e,p.getAgentEdges().toList(function(P){return F.isVisible(P)&&P.s(n)===o&&X(P,p)===e}),e===w||e===L)},D=function(O,a){var f=O.getSourceAgent()===a,n=f?O.getTargetAgent():O.getSourceAgent(),m=a.p(),P=n.p();return f?m.x<P.x?w:h:m.y>P.y?W:L},S=function(G,s,S){var m=s.s(n),Q=D(s,S);return _(s,S,Q,S.getAgentEdges().toList(function(q){return G.isVisible(q)&&q.s(n)===m&&D(q,S)===Q}),Q===w||Q===L)},x=function(O,t,v){var r=O.getSourceAgent(),U=O.getTargetAgent(),q=r.getId()>U.getId(),i=q?U:r,N=q?r:U,Y=i.p(),X=N.p(),G=v(t,O,i),y=v(t,O,N),_=O.s(s),F=_?0:B(t,i)/2,Q=_?0:B(t,N)/2,f=_?0:p(t,i)/2,Z=_?0:p(t,N)/2,K=G.offset,j=y.offset,E=G.side,S=y.side,u=new R;return E===W?(u.add({x:Y.x+K,y:Y.y-f}),u.add({x:Y.x+K,y:X.y+j}),S===h?u.add({x:X.x-Q,y:X.y+j}):u.add({x:X.x+Q,y:X.y+j})):E===L?(u.add({x:Y.x+K,y:Y.y+f}),u.add({x:Y.x+K,y:X.y+j}),S===h?u.add({x:X.x-Q,y:X.y+j}):u.add({x:X.x+Q,y:X.y+j})):E===h?(u.add({x:Y.x-F,y:Y.y+K}),u.add({x:X.x+j,y:Y.y+K}),S===L?u.add({x:X.x+j,y:X.y+Z}):u.add({x:X.x+j,y:X.y-Z})):E===w&&(u.add({x:Y.x+F,y:Y.y+K}),u.add({x:X.x+j,y:Y.y+K}),S===L?u.add({x:X.x+j,y:X.y+Z}):u.add({x:X.x+j,y:X.y-Z})),q&&u.reverse(),C(u,O)};d("ortho2",function(M,m,V){var G,P,d=M.s(s),o=M.s("edge.ortho"),J=M.getSourceAgent(),$=M.getTargetAgent(),f=J.getId()>$.getId(),g=f?$:J,c=f?J:$,q=g.p(),x=c.p(),I=l(V,M,g),r=l(V,M,c),T=d?0:B(V,g)/2,k=d?0:p(V,g)/2,X=d?0:B(V,c)/2,y=d?0:p(V,c)/2,H=new R,z=I.offset,O=r.offset,E=I.side;return E===w?(G=x.y>q.y?-z:z,P=q.x+T+(x.x-X-q.x-T)*o,H.add({x:q.x+T,y:q.y+z}),H.add({x:P+G,y:q.y+z}),H.add({x:P+G,y:x.y+O}),H.add({x:x.x-X,y:x.y+O})):E===h?(G=x.y>q.y?-z:z,P=q.x-T-(q.x-T-x.x-X)*o,H.add({x:q.x-T,y:q.y+z}),H.add({x:P-G,y:q.y+z}),H.add({x:P-G,y:x.y+O}),H.add({x:x.x+X,y:x.y+O})):E===L?(G=x.x>q.x?-z:z,P=q.y+k+(x.y-y-q.y-k)*o,H.add({x:q.x+z,y:q.y+k}),H.add({x:q.x+z,y:P+G}),H.add({x:x.x+O,y:P+G}),H.add({x:x.x+O,y:x.y-y})):E===W&&(G=x.x>q.x?-z:z,P=q.y-k-(q.y-k-x.y-y)*o,H.add({x:q.x+z,y:q.y-k}),H.add({x:q.x+z,y:P-G}),H.add({x:x.x+O,y:P-G}),H.add({x:x.x+O,y:x.y+y})),f&&H.reverse(),C(H,M)},!0),d("flex2",function(f,U,j){var N,i=f.getSourceAgent(),c=f.getTargetAgent(),Q=i.getId()>c.getId(),J=Q?c:i,b=Q?i:c,d=J.p(),q=b.p(),K=l(j,f,J),O=l(j,f,b),t=f.s(s),Z=f.s("edge.flex")+(K.size-1)/2*f.s(e),V=t?0:B(j,J)/2,G=t?0:p(j,J)/2,I=t?0:B(j,b)/2,u=t?0:p(j,b)/2,v=new R,P=K.offset,_=O.offset,X=K.side;return X===w?(N=q.y>d.y?-P:P,v.add({x:d.x+V,y:d.y+P}),v.add({x:d.x+V+Z+N,y:d.y+P}),v.add({x:q.x-I-Z+N,y:q.y+_}),v.add({x:q.x-I,y:q.y+_})):X===h?(N=q.y>d.y?-P:P,v.add({x:d.x-V,y:d.y+P}),v.add({x:d.x-V-Z-N,y:d.y+P}),v.add({x:q.x+I+Z-N,y:q.y+_}),v.add({x:q.x+I,y:q.y+_})):X===L?(N=q.x>d.x?-P:P,v.add({x:d.x+P,y:d.y+G}),v.add({x:d.x+P,y:d.y+G+Z+N}),v.add({x:q.x+_,y:q.y-u-Z+N}),v.add({x:q.x+_,y:q.y-u})):X===W&&(N=q.x>d.x?-P:P,v.add({x:d.x+P,y:d.y-G}),v.add({x:d.x+P,y:d.y-G-Z-N}),v.add({x:q.x+_,y:q.y+u+Z-N}),v.add({x:q.x+_,y:q.y+u})),Q&&v.reverse(),C(v,f)},!0),d("extend.north2",function(x,B,X){var Y=x.getSourceAgent(),l=x.getTargetAgent(),P=Y.getId()>l.getId(),n=P?l:Y,k=P?Y:l,v=n.p(),b=k.p(),D=Z(X,x,n,W),V=Z(X,x,k,W,!0),o=x.s(s),H=o?0:p(X,n)/2,L=o?0:p(X,k)/2,i=D.offset,y=V.offset,A=x.s(f)+(D.size-1)/2*x.s(e),K=T(v.y-H,b.y-L)-A+(v.x<b.x?i:-i),w=new R;return w.add({x:v.x+i,y:v.y-H}),w.add({x:v.x+i,y:K}),w.add({x:b.x+y,y:K}),w.add({x:b.x+y,y:b.y-L}),P&&w.reverse(),C(w,x)},!0),d("extend.south2",function(d,W,t){var G=d.getSourceAgent(),x=d.getTargetAgent(),i=G.getId()>x.getId(),l=i?x:G,r=i?G:x,O=l.p(),b=r.p(),$=Z(t,d,l,L),c=Z(t,d,r,L,!0),F=d.s(s),o=F?0:p(t,l)/2,E=F?0:p(t,r)/2,y=$.offset,q=c.offset,g=d.s(f)+($.size-1)/2*d.s(e),U=M(O.y+o,b.y+E)+g+(O.x>b.x?y:-y),I=new R;return I.add({x:O.x+y,y:O.y+o}),I.add({x:O.x+y,y:U}),I.add({x:b.x+q,y:U}),I.add({x:b.x+q,y:b.y+E}),i&&I.reverse(),C(I,d)},!0),d("extend.west2",function(h,c,u){var o=h.getSourceAgent(),b=h.getTargetAgent(),k=o.getId()>b.getId(),j=k?b:o,S=k?o:b,N=j.p(),z=S.p(),n=Z(u,h,j,W),m=Z(u,h,S,W,!0),L=h.s(s),d=L?0:B(u,j)/2,M=L?0:B(u,S)/2,H=n.offset,w=m.offset,K=h.s(f)+(n.size-1)/2*h.s(e),G=T(N.x-d,z.x-M)-K+(N.y<z.y?H:-H),$=new R;return $.add({x:N.x-d,y:N.y+H}),$.add({x:G,y:N.y+H}),$.add({x:G,y:z.y+w}),$.add({x:z.x-M,y:z.y+w}),k&&$.reverse(),C($,h)},!0),d("extend.east2",function(z,N,L){var K=z.getSourceAgent(),q=z.getTargetAgent(),g=K.getId()>q.getId(),w=g?q:K,l=g?K:q,y=w.p(),p=l.p(),I=Z(L,z,w,W),J=Z(L,z,l,W,!0),u=z.s(s),x=u?0:B(L,w)/2,G=u?0:B(L,l)/2,c=I.offset,j=J.offset,_=z.s(f)+(I.size-1)/2*z.s(e),v=M(y.x+x,p.x+G)+_+(y.y>p.y?c:-c),E=new R;return E.add({x:y.x+x,y:y.y+c}),E.add({x:v,y:y.y+c}),E.add({x:v,y:p.y+j}),E.add({x:p.x+G,y:p.y+j}),g&&E.reverse(),C(E,z)},!0),d("v.h2",function(T,Y,Z){return x(T,Z,K)},!0),d("h.v2",function(h,f,r){return x(h,r,S)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);