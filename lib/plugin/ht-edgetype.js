!function(o){"use strict";var Q="ht",C=o[Q],R=Math,M=R.max,c=R.min,v=R.abs,n=R.atan2,q=(R.cos,R.sin,R.ceil),W=C.Default,$=W.getInternal(),j=C.List,h=$.Mat,b=$.getNodeRect,x=$.intersectionLineRect,u=W.getDistance,z=W.setEdgeType,L="left",s="right",J="top",V="bottom",U="edge.type",l="edge.gap",m="edge.center",Y="edge.extend",P=function(c,h){return b(c,h).width},B=function(R,A){return b(R,A).height},i=function(L,T){return $.getEdgeAgentPosition(L,T._40I,T.s("edge.source.position"),T.s("edge.source.offset.x"),T.s("edge.source.offset.y"),T.s("edge.source.anchor.x"),T.s("edge.source.anchor.y"))},K=function(G,N){return $.getEdgeAgentPosition(G,N._41I,N.s("edge.target.position"),N.s("edge.target.offset.x"),N.s("edge.target.offset.y"),N.s("edge.target.anchor.x"),N.s("edge.target.anchor.y"))},p=function(E,D){var c=E.s(U),W=E.getEdgeGroup();if(W){var R=0;if(W.eachSiblingEdge(function(E){D.isVisible(E)&&E.s(U)==c&&R++}),R>1)return E.s(l)*(R-1)/2}return 0},N=function(Q,W){var G=Q.s(U),f=Q.isLooped();if(!Q.getEdgeGroup())return f?Q.s(l):0;var C,j=0,V=0,Z=0;return Q.getEdgeGroup().getSiblings().each(function(b){b.each(function(d){if(d._40I===Q._40I&&d.s(U)==G&&W.isVisible(d)){var v=d.s(l);C?(V+=Z/2+v/2,Z=v):(C=d,Z=v),d===Q&&(j=V)}})}),f?V-j+Z:j-V/2},g=function(v,m){var e=m.s("edge.corner.radius");return W.toRoundedCorner(v,e)};$.addMethod(C.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),z("boundary",function(y,p,H,M){M||(p=-p);var v,w=i(H,y),V=K(H,y),Z=b(H,y._40I),m=b(H,y._41I),X=new h(n(V.y-w.y,V.x-w.x)),r=u(w,V),J=w.x,P=w.y;return v=X.tf(0,p),w={x:v.x+J,y:v.y+P},v=X.tf(r,p),V={x:v.x+J,y:v.y+P},v=x(w,V,Z),v&&(w={x:v[0],y:v[1]}),v=x(w,V,m),v&&(V={x:v[0],y:v[1]}),{points:new j([w,V])}}),z("ripple",function(I,C,l,Y){Y||(C=-C);var A=i(l,I),Z=K(l,I),g=u(A,Z),f=c(I.s("edge.offset"),g/2),M=I.s("edge.ripple.size"),y=I.s("edge.ripple.length"),J=I.s("edge.ripple.both"),a=I.s(m),R=I.s("edge.ripple.elevation"),p=new j,X=I.s("edge.ripple.straight")?null:new j,P=new h(n(Z.y-A.y,Z.x-A.x));Y||(R=-R),g-=2*f,y>0&&(M=q(g/y));var d=g/M;X&&X.add(1);for(var W=0;M>W;W++)X&&X.add(3),0===W?p.add({x:f+d*W,y:a?0:C}):p.add({x:f+d*W,y:C}),p.add({x:f+d*W+d/2,y:R+C}),J&&(R=-R);for(p.add({x:f+g,y:a?0:C}),W=0;W<p.size();W++){var E=P.tf(p.get(W));E.x+=A.x,E.y+=A.y,p.set(W,E)}return{points:p,segments:X}}),z("h.v",function($,H,U){H=N($,U);var Q=new j,r=$.s(m),q=i(U,$),w=q.x,h=q.y,J=K(U,$),b=J.x,A=J.y,X=0,o=0,R=b-w,y=A-h;return r||(X=P(U,$._40I)/2,o=B(U,$._41I)/2),R>=0&&0>=y?(Q.add({x:w+X,y:h+H}),Q.add({x:b+H,y:h+H}),Q.add({x:b+H,y:A+o})):0>=R&&y>=0?(Q.add({x:w-X,y:h+H}),Q.add({x:b+H,y:h+H}),Q.add({x:b+H,y:A-o})):R>=0&&y>=0?(Q.add({x:w+X,y:h+H}),Q.add({x:b-H,y:h+H}),Q.add({x:b-H,y:A-o})):(Q.add({x:w-X,y:h+H}),Q.add({x:b-H,y:h+H}),Q.add({x:b-H,y:A+o})),g(Q,$)}),z("v.h",function(x,F,T){F=N(x,T);var f=new j,z=x.s(m),D=i(T,x),E=D.x,C=D.y,$=K(T,x),w=$.x,e=$.y,Z=0,G=0,y=w-E,d=e-C;return z||(Z=P(T,x._41I)/2,G=B(T,x._40I)/2),y>=0&&0>=d?(f.add({x:E+F,y:C-G}),f.add({x:E+F,y:e+F}),f.add({x:w-Z,y:e+F})):0>=y&&d>=0?(f.add({x:E+F,y:C+G}),f.add({x:E+F,y:e+F}),f.add({x:w+Z,y:e+F})):y>=0&&d>=0?(f.add({x:E-F,y:C+G}),f.add({x:E-F,y:e+F}),f.add({x:w-Z,y:e+F})):(f.add({x:E-F,y:C-G}),f.add({x:E-F,y:e+F}),f.add({x:w+Z,y:e+F})),g(f,x)}),z("ortho",function(c,l,x){var Q=new j,A=c.s(m),$=c.s("edge.ortho"),W=c._40I,M=c._41I,u=i(x,c),I=u.x,L=u.y,p=K(x,c),R=p.x,Y=p.y,D=R-I,X=Y-L,h=A?0:P(x,W)/2,E=A?0:B(x,W)/2,H=A?0:P(x,M)/2,n=A?0:B(x,M)/2,s=(D-(h+H)*(D>0?1:-1))*$,d=(X-(E+n)*(X>0?1:-1))*$;return v(D)<v(X)?D>=0&&0>=X?(Q.add({x:I+l,y:L-E}),Q.add({x:I+l,y:L+d+l-E}),Q.add({x:R+l,y:L+d+l-E}),Q.add({x:R+l,y:Y+n})):0>=D&&X>=0?(Q.add({x:I+l,y:L+E}),Q.add({x:I+l,y:L+d+l+E}),Q.add({x:R+l,y:L+d+l+E}),Q.add({x:R+l,y:Y-n})):D>=0&&X>=0?(Q.add({x:I+l,y:L+E}),Q.add({x:I+l,y:L+d-l+E}),Q.add({x:R+l,y:L+d-l+E}),Q.add({x:R+l,y:Y-n})):(Q.add({x:I+l,y:L-E}),Q.add({x:I+l,y:L+d-l-E}),Q.add({x:R+l,y:L+d-l-E}),Q.add({x:R+l,y:Y+n})):D>=0&&0>=X?(Q.add({x:I+h,y:L+l}),Q.add({x:I+s+l+h,y:L+l}),Q.add({x:I+s+l+h,y:Y+l}),Q.add({x:R-H,y:Y+l})):0>=D&&X>=0?(Q.add({x:I-h,y:L+l}),Q.add({x:I+s+l-h,y:L+l}),Q.add({x:I+s+l-h,y:Y+l}),Q.add({x:R+H,y:Y+l})):D>=0&&X>=0?(Q.add({x:I+h,y:L+l}),Q.add({x:I+s-l+h,y:L+l}),Q.add({x:I+s-l+h,y:Y+l}),Q.add({x:R-H,y:Y+l})):(Q.add({x:I-h,y:L+l}),Q.add({x:I+s-l-h,y:L+l}),Q.add({x:I+s-l-h,y:Y+l}),Q.add({x:R+H,y:Y+l})),g(Q,c)}),z("flex",function(N,z,H){var I=new j,Q=N.s("edge.flex")+p(N,H),U=N.s(m),Y=N._40I,M=N._41I,F=i(H,N),s=F.x,k=F.y,T=K(H,N),E=T.x,W=T.y,C=E-s,A=W-k,$=U?0:P(H,Y)/2,t=U?0:B(H,Y)/2,u=U?0:P(H,M)/2,w=U?0:B(H,M)/2,c=C>0?Q:-Q,O=A>0?Q:-Q;return v(C)<v(A)?C>=0&&0>=A?(I.add({x:s+z,y:k-t}),I.add({x:s+z,y:k+O+z-t}),I.add({x:E+z,y:W-O+z+w}),I.add({x:E+z,y:W+w})):0>=C&&A>=0?(I.add({x:s+z,y:k+t}),I.add({x:s+z,y:k+O+z+t}),I.add({x:E+z,y:W-O+z-w}),I.add({x:E+z,y:W-w})):C>=0&&A>=0?(I.add({x:s+z,y:k+t}),I.add({x:s+z,y:k+O-z+t}),I.add({x:E+z,y:W-O-z-w}),I.add({x:E+z,y:W-w})):(I.add({x:s+z,y:k-t}),I.add({x:s+z,y:k+O-z-t}),I.add({x:E+z,y:W-O-z+w}),I.add({x:E+z,y:W+w})):C>=0&&0>=A?(I.add({x:s+$,y:k+z}),I.add({x:s+c+z+$,y:k+z}),I.add({x:E-c+z-u,y:W+z}),I.add({x:E-u,y:W+z})):0>=C&&A>=0?(I.add({x:s-$,y:k+z}),I.add({x:s+c+z-$,y:k+z}),I.add({x:E-c+z+u,y:W+z}),I.add({x:E+u,y:W+z})):C>=0&&A>=0?(I.add({x:s+$,y:k+z}),I.add({x:s+c-z+$,y:k+z}),I.add({x:E-c-z-u,y:W+z}),I.add({x:E-u,y:W+z})):(I.add({x:s-$,y:k+z}),I.add({x:s+c-z-$,y:k+z}),I.add({x:E-c-z+u,y:W+z}),I.add({x:E+u,y:W+z})),g(I,N)}),z("extend.east",function(G,o,n){var D=new j,R=G.s(Y)+p(G,n),C=G.s(m),y=i(n,G),W=y.x+(C?0:P(n,G._40I)/2),z=y.y,f=K(n,G),X=f.x+(C?0:P(n,G._41I)/2),s=f.y,h=M(W,X)+R;return z>s?(D.add({x:W,y:z+o}),D.add({x:h+o,y:z+o}),D.add({x:h+o,y:s-o}),D.add({x:X,y:s-o})):(D.add({x:W,y:z-o}),D.add({x:h+o,y:z-o}),D.add({x:h+o,y:s+o}),D.add({x:X,y:s+o})),g(D,G)}),z("extend.west",function(k,q,I){var R=new j,a=k.s(Y)+p(k,I),x=k.s(m),F=i(I,k),H=F.x-(x?0:P(I,k._40I)/2),A=F.y,_=K(I,k),N=_.x-(x?0:P(I,k._41I)/2),r=_.y,w=c(H,N)-a;return A>r?(R.add({x:H,y:A+q}),R.add({x:w-q,y:A+q}),R.add({x:w-q,y:r-q}),R.add({x:N,y:r-q})):(R.add({x:H,y:A-q}),R.add({x:w-q,y:A-q}),R.add({x:w-q,y:r+q}),R.add({x:N,y:r+q})),g(R,k)}),z("extend.north",function(D,v,r){var d=new j,X=D.s(Y)+p(D,r),b=D.s(m),S=i(r,D),L=S.x,w=S.y-(b?0:B(r,D._40I)/2),Z=K(r,D),x=Z.x,V=Z.y-(b?0:B(r,D._41I)/2),T=c(w,V)-X;return L>x?(d.add({y:w,x:L+v}),d.add({y:T-v,x:L+v}),d.add({y:T-v,x:x-v}),d.add({y:V,x:x-v})):(d.add({y:w,x:L-v}),d.add({y:T-v,x:L-v}),d.add({y:T-v,x:x+v}),d.add({y:V,x:x+v})),g(d,D)}),z("extend.south",function(H,v,l){var T=new j,E=H.s(Y)+p(H,l),F=H.s(m),o=i(l,H),r=o.x,f=o.y+(F?0:B(l,H._40I)/2),k=K(l,H),W=k.x,$=k.y+(F?0:B(l,H._41I)/2),D=M(f,$)+E;return r>W?(T.add({y:f,x:r+v}),T.add({y:D+v,x:r+v}),T.add({y:D+v,x:W-v}),T.add({y:$,x:W-v})):(T.add({y:f,x:r-v}),T.add({y:D+v,x:r-v}),T.add({y:D+v,x:W+v}),T.add({y:$,x:W+v})),g(T,H)});var A=function(h,r,f,X,x){if(X.sort(function(E,I){var V=E.getSourceAgent()===r?E.getTargetAgent():E.getSourceAgent(),o=I.getSourceAgent()===r?I.getTargetAgent():I.getSourceAgent(),_=V.p(),a=o.p();if(f===L||f===s){if(_.y>a.y)return 1;if(_.y<a.y)return-1}else{if(_.x>a.x)return 1;if(_.x<a.x)return-1}return W.sortFunc(E.getId(),I.getId())}),x){for(var H,b,z,n=h.getSourceAgent(),M=h.getTargetAgent(),d=0;d<X.size();d++){var t=X.get(d);t.getSourceAgent()===n&&t.getTargetAgent()===M||t.getTargetAgent()===n&&t.getSourceAgent()===M?(b||(b=new j),b.add(t,0)):b?(z||(z=new j),z.add(t)):(H||(H=new j),H.add(t))}X.clear(),H&&X.addAll(H),b&&X.addAll(b),z&&X.addAll(z)}var V=X.indexOf(h),Q=X.size(),o=h.s(l);return{side:f,index:V,size:Q,offset:-o*(Q-1)/2+o*V}},H=function(r,l,Y,B,s){var f=l.s(U);return A(l,Y,B,Y.getAgentEdges().toList(function(Y){return r.isVisible(Y)&&Y.s(U)===f}),s)},I=function(W,N){var b=W.getSourceAgent()===N?W.getTargetAgent():W.getSourceAgent(),G=N.p(),z=b.p(),y=z.x-G.x,H=z.y-G.y;return y>0&&v(H)<=y?s:0>y&&v(H)<=-y?L:H>0&&v(y)<=H?V:J},Z=function(K,V,g){var Z=V.s(U),i=I(V,g);return A(V,g,i,g.getAgentEdges().toList(function(A){return K.isVisible(A)&&A.s(U)===Z&&I(A,g)===i}))},r=function(f,z){var I=f.getSourceAgent()===z,q=I?f.getTargetAgent():f.getSourceAgent(),S=z.p(),i=q.p();return I?S.y>i.y?J:V:S.x<i.x?s:L},t=function(J,m,k){var B=m.s(U),W=r(m,k);return A(m,k,W,k.getAgentEdges().toList(function(i){return J.isVisible(i)&&i.s(U)===B&&r(i,k)===W}),W===s||W===V)},O=function(u,F){var o=u.getSourceAgent()===F,v=o?u.getTargetAgent():u.getSourceAgent(),j=F.p(),T=v.p();return o?j.x<T.x?s:L:j.y>T.y?J:V},E=function(N,m,T){var P=m.s(U),r=O(m,T);return A(m,T,r,T.getAgentEdges().toList(function(Q){return N.isVisible(Q)&&Q.s(U)===P&&O(Q,T)===r}),r===s||r===V)},e=function(M,S,W){var o=M.getSourceAgent(),e=M.getTargetAgent(),N=o.getId()>e.getId(),R=N?e:o,Z=N?o:e,l=R.p(),u=Z.p(),D=W(S,M,R),I=W(S,M,Z),y=M.s(m),A=y?0:P(S,R)/2,T=y?0:P(S,Z)/2,f=y?0:B(S,R)/2,d=y?0:B(S,Z)/2,G=D.offset,K=I.offset,k=D.side,x=I.side,U=new j;return k===J?(U.add({x:l.x+G,y:l.y-f}),U.add({x:l.x+G,y:u.y+K}),x===L?U.add({x:u.x-T,y:u.y+K}):U.add({x:u.x+T,y:u.y+K})):k===V?(U.add({x:l.x+G,y:l.y+f}),U.add({x:l.x+G,y:u.y+K}),x===L?U.add({x:u.x-T,y:u.y+K}):U.add({x:u.x+T,y:u.y+K})):k===L?(U.add({x:l.x-A,y:l.y+G}),U.add({x:u.x+K,y:l.y+G}),x===V?U.add({x:u.x+K,y:u.y+d}):U.add({x:u.x+K,y:u.y-d})):k===s&&(U.add({x:l.x+A,y:l.y+G}),U.add({x:u.x+K,y:l.y+G}),x===V?U.add({x:u.x+K,y:u.y+d}):U.add({x:u.x+K,y:u.y-d})),N&&U.reverse(),g(U,M)};z("ortho2",function(S,D,I){var h,w,v=S.s(m),z=S.s("edge.ortho"),f=S.getSourceAgent(),F=S.getTargetAgent(),x=f.getId()>F.getId(),Y=x?F:f,U=x?f:F,X=Y.p(),Q=U.p(),N=Z(I,S,Y),e=Z(I,S,U),y=v?0:P(I,Y)/2,p=v?0:B(I,Y)/2,i=v?0:P(I,U)/2,C=v?0:B(I,U)/2,H=new j,K=N.offset,o=e.offset,c=N.side;return c===s?(h=Q.y>X.y?-K:K,w=X.x+y+(Q.x-i-X.x-y)*z,H.add({x:X.x+y,y:X.y+K}),H.add({x:w+h,y:X.y+K}),H.add({x:w+h,y:Q.y+o}),H.add({x:Q.x-i,y:Q.y+o})):c===L?(h=Q.y>X.y?-K:K,w=X.x-y-(X.x-y-Q.x-i)*z,H.add({x:X.x-y,y:X.y+K}),H.add({x:w-h,y:X.y+K}),H.add({x:w-h,y:Q.y+o}),H.add({x:Q.x+i,y:Q.y+o})):c===V?(h=Q.x>X.x?-K:K,w=X.y+p+(Q.y-C-X.y-p)*z,H.add({x:X.x+K,y:X.y+p}),H.add({x:X.x+K,y:w+h}),H.add({x:Q.x+o,y:w+h}),H.add({x:Q.x+o,y:Q.y-C})):c===J&&(h=Q.x>X.x?-K:K,w=X.y-p-(X.y-p-Q.y-C)*z,H.add({x:X.x+K,y:X.y-p}),H.add({x:X.x+K,y:w-h}),H.add({x:Q.x+o,y:w-h}),H.add({x:Q.x+o,y:Q.y+C})),x&&H.reverse(),g(H,S)},!0),z("flex2",function(I,X,E){var K,z=I.getSourceAgent(),U=I.getTargetAgent(),t=z.getId()>U.getId(),w=t?U:z,n=t?z:U,e=w.p(),f=n.p(),F=Z(E,I,w),Y=Z(E,I,n),T=I.s(m),u=I.s("edge.flex")+(F.size-1)/2*I.s(l),O=T?0:P(E,w)/2,G=T?0:B(E,w)/2,S=T?0:P(E,n)/2,d=T?0:B(E,n)/2,v=new j,A=F.offset,b=Y.offset,D=F.side;return D===s?(K=f.y>e.y?-A:A,v.add({x:e.x+O,y:e.y+A}),v.add({x:e.x+O+u+K,y:e.y+A}),v.add({x:f.x-S-u+K,y:f.y+b}),v.add({x:f.x-S,y:f.y+b})):D===L?(K=f.y>e.y?-A:A,v.add({x:e.x-O,y:e.y+A}),v.add({x:e.x-O-u-K,y:e.y+A}),v.add({x:f.x+S+u-K,y:f.y+b}),v.add({x:f.x+S,y:f.y+b})):D===V?(K=f.x>e.x?-A:A,v.add({x:e.x+A,y:e.y+G}),v.add({x:e.x+A,y:e.y+G+u+K}),v.add({x:f.x+b,y:f.y-d-u+K}),v.add({x:f.x+b,y:f.y-d})):D===J&&(K=f.x>e.x?-A:A,v.add({x:e.x+A,y:e.y-G}),v.add({x:e.x+A,y:e.y-G-u-K}),v.add({x:f.x+b,y:f.y+d+u-K}),v.add({x:f.x+b,y:f.y+d})),t&&v.reverse(),g(v,I)},!0),z("extend.north2",function(Q,u,N){var U=Q.getSourceAgent(),i=Q.getTargetAgent(),W=U.getId()>i.getId(),k=W?i:U,q=W?U:i,e=k.p(),C=q.p(),y=H(N,Q,k,J),h=H(N,Q,q,J,!0),$=Q.s(m),E=$?0:B(N,k)/2,M=$?0:B(N,q)/2,V=y.offset,x=h.offset,L=Q.s(Y)+(y.size-1)/2*Q.s(l),v=c(e.y-E,C.y-M)-L+(e.x<C.x?V:-V),T=new j;return T.add({x:e.x+V,y:e.y-E}),T.add({x:e.x+V,y:v}),T.add({x:C.x+x,y:v}),T.add({x:C.x+x,y:C.y-M}),W&&T.reverse(),g(T,Q)},!0),z("extend.south2",function(A,R,e){var k=A.getSourceAgent(),x=A.getTargetAgent(),w=k.getId()>x.getId(),u=w?x:k,t=w?k:x,_=u.p(),n=t.p(),S=H(e,A,u,V),q=H(e,A,t,V,!0),y=A.s(m),U=y?0:B(e,u)/2,D=y?0:B(e,t)/2,I=S.offset,h=q.offset,f=A.s(Y)+(S.size-1)/2*A.s(l),Q=M(_.y+U,n.y+D)+f+(_.x>n.x?I:-I),N=new j;return N.add({x:_.x+I,y:_.y+U}),N.add({x:_.x+I,y:Q}),N.add({x:n.x+h,y:Q}),N.add({x:n.x+h,y:n.y+D}),w&&N.reverse(),g(N,A)},!0),z("extend.west2",function(r,N,L){var t=r.getSourceAgent(),w=r.getTargetAgent(),W=t.getId()>w.getId(),n=W?w:t,V=W?t:w,Q=n.p(),b=V.p(),E=H(L,r,n,J),A=H(L,r,V,J,!0),a=r.s(m),v=a?0:P(L,n)/2,T=a?0:P(L,V)/2,B=E.offset,U=A.offset,e=r.s(Y)+(E.size-1)/2*r.s(l),z=c(Q.x-v,b.x-T)-e+(Q.y<b.y?B:-B),h=new j;return h.add({x:Q.x-v,y:Q.y+B}),h.add({x:z,y:Q.y+B}),h.add({x:z,y:b.y+U}),h.add({x:b.x-T,y:b.y+U}),W&&h.reverse(),g(h,r)},!0),z("extend.east2",function(B,e,b){var G=B.getSourceAgent(),z=B.getTargetAgent(),Q=G.getId()>z.getId(),C=Q?z:G,N=Q?G:z,c=C.p(),q=N.p(),O=H(b,B,C,J),K=H(b,B,N,J,!0),f=B.s(m),F=f?0:P(b,C)/2,p=f?0:P(b,N)/2,A=O.offset,t=K.offset,V=B.s(Y)+(O.size-1)/2*B.s(l),v=M(c.x+F,q.x+p)+V+(c.y>q.y?A:-A),h=new j;return h.add({x:c.x+F,y:c.y+A}),h.add({x:v,y:c.y+A}),h.add({x:v,y:q.y+t}),h.add({x:q.x+p,y:q.y+t}),Q&&h.reverse(),g(h,B)},!0),z("v.h2",function(A,Z,l){return e(A,l,t)},!0),z("h.v2",function(q,D,n){return e(q,n,E)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);