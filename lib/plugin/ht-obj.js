!function(y,e,P){"use strict";function w(){var z=[],Q=[];return function(){return 0===arguments.length?Q.join("")+u.apply(String,z):(z.length+arguments.length>1024&&(Q.push(u.apply(String,z)),z.length=0),Array.prototype.push.apply(z,arguments),void 0)}}function S(u,j,o,P,M){var e,J,g=8*M-P-1,f=(1<<g)-1,_=f>>1,E=-7,V=o?M-1:0,z=o?-1:1,W=u[j+V];for(V+=z,e=W&(1<<-E)-1,W>>=-E,E+=g;E>0;e=256*e+u[j+V],V+=z,E-=8);for(J=e&(1<<-E)-1,e>>=-E,E+=P;E>0;J=256*J+u[j+V],V+=z,E-=8);if(0===e)e=1-_;else{if(e===f)return J?0/0:1/0*(W?-1:1);J+=Math.pow(2,P),e-=_}return(W?-1:1)*J*Math.pow(2,e-P)}var D="ht",i=y[D],Y=null,O=Math,x=O.abs,W=O.max,C=Number.MAX_VALUE,I=i.Default,p=I.getInternal(),z=I.clone,Q=p.vec3TransformMat4,c=[0,0],L=p.appendArray,F=function(){function Z(I,$,O,y){if(I){var w=I[y];if(w){O.ignoreColor||($.color=w.kd),!O.ignoreTransparent&&w.d>0&&w.d<1&&($.transparent=!0,$.opacity=w.d);var J;if(!O.ignoreImage&&(J=w.map_kd)){J=J.split(" ");for(var Q=-1,o=0;o<J.length;o++)"-o"===J[o]?($.uvOffset=[parseFloat(J[o+1]),parseFloat(J[o+2])],o+=3,Q=o):"-s"===J[o]&&($.uvScale=[parseFloat(J[o+1]),parseFloat(J[o+2])],o+=3,Q=o);$.image=(O.prefix||"")+J.splice(Q+1).join(" ")}}}}var F=/v( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,H=/vt( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,f=/vn( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,J=/^[og]\s*(.+)?/,n=function(z,J){return J=parseInt(J),J>=0?z[J-1]:z[J+z.length]},r=function(f,h,R,X,Z){if(f.lvs){var v=n(h,X),r=n(h,Z),N=R.matrix,b=f.lvs;N?(L(b,Q(z(v),N)),L(b,Q(z(r),N))):(L(b,v),L(b,r))}},V=function(x,_,R,H,O,i){if(x.vs){var N=n(_,H),l=n(_,O),k=n(_,i),B=R.matrix,g=x.vs;if(R.flipFace){var Z=l;l=k,k=Z}B?(L(g,Q(z(N),B)),L(g,Q(z(l),B)),L(g,Q(z(k),B))):(L(g,N),L(g,l),L(g,k))}},T=function(S,W,K,N,_,s){if(S.vs){var H=K.flipY,i=N===P?c:n(W,N),f=_===P?c:n(W,_),r=s===P?c:n(W,s);if(K.flipFace){var k=f;f=r,r=k}S.uv.push(i[0],H?1-i[1]:i[1],f[0],H?1-f[1]:f[1],r[0],H?1-r[1]:r[1])}},R=function(x,c,E,I,u,V){if(x.vs){var P=n(c,I),J=n(c,u),H=n(c,V),N=E.normalMatrix,s=x.ns;if(E.flipFace){var o=J;J=H,H=o}N?(L(s,Q(z(P),N)),L(s,Q(z(J),N)),L(s,Q(z(H),N))):(L(s,P),L(s,J),L(s,H))}},t=function(d,g,H,f){for(var I=f.length-1,z=0;I>z;++z)r(d,g,H,f[z],f[z+1]);r(d,g,H,f[I],f[0])},N=function(D,B,h,z,x,w,t,p){var y=z&&z.length&&p;w[3]===P?(V(D,B,x,w[0],w[1],w[2]),t?T(D,h,x,t[0],t[1],t[2]):D.uv&&D.uv.length&&T(D,h,x),y&&R(D,z,x,p[0],p[1],p[2])):(V(D,B,x,w[0],w[1],w[3]),V(D,B,x,w[1],w[2],w[3]),t?(T(D,h,x,t[0],t[1],t[3]),T(D,h,x,t[1],t[2],t[3])):D.uv&&D.uv.length&&(T(D,h,x),T(D,h,x)),y&&(R(D,z,x,p[0],p[1],p[3]),R(D,z,x,p[1],p[2],p[3])))},l=function(t,z,o,y){var B,U,T,J,E,d,b,K,N=C,F=C,R=C,e=-C,$=-C,Q=-C;for(B in t)for(d=t[B].vs,K=d.length,U=0;K>U;U+=3)T=d[U+0],J=d[U+1],E=d[U+2],N>T&&(N=T),F>J&&(F=J),R>E&&(R=E),T>e&&(e=T),J>$&&($=J),E>Q&&(Q=E);var u;if(o){var _=N+(e-N)/2,I=F+($-F)/2,r=R+(Q-R)/2;for(B in t){for(d=t[B].vs,K=d.length,U=0;K>U;U+=3)d[U+0]-=_,d[U+1]-=I,d[U+2]-=r;if(b=t[B].lvs)for(K=b.length,U=0;K>U;U+=3)b[U+0]-=_,b[U+1]-=I,b[U+2]-=r}u=[_,I,r]}var k,D,L;o?(k=e-N,D=$-F,L=Q-R):(k=2*W(x(N),x(e)),D=2*W(x(F),x($)),L=2*W(x(R),x(Q))),0===k&&(k=Math.min(D,L)/1e3||.001),0===D&&(D=Math.min(k,L)/1e3||.001),0===L&&(L=Math.min(k,D)/1e3||.001),y.rawS3=[k,D,L];for(B in t){if(d=t[B].vs,b=t[B].lvs,z){for(K=d.length,U=0;K>U;U+=3)k&&(d[U+0]/=k),D&&(d[U+1]/=D),L&&(d[U+2]/=L);if(b)for(K=b.length,U=0;K>U;U+=3)k&&(b[U+0]/=k),D&&(b[U+1]/=D),L&&(b[U+2]/=L);var l=t[B].ns;if(l){K=l.length;var p=new i.Math.Vector3;for(U=0;K>U;U+=3)p.set(l[U+0]*k,l[U+1]*D,l[U+2]*L).normalize(),l[U+0]=p.x,l[U+1]=p.y,l[U+2]=p.z}}t[B].rawS3=y.rawS3,u&&(t[B].center=u)}};return function(x,P,e){if(!x)return Y;(p.isString(P)||P instanceof ArrayBuffer)&&(P=M(P)),e||(e={}),e.flipY==Y&&(e.flipY=!0),(e.s3||e.r3||e.t3||e.mat)&&(e.matrix=p.createWorldMatrix(e.mat,e.s3,e.r3,e.rotationMode,e.t3));var Q,q,D,k,u=i.Style["wf.loadQuadWireframe"],r=[],T=[],A=e.ignoreNormal?Y:[],S=e.reverseFlipMtls,G={vs:[],uv:[],ns:A?[]:Y},c={htdefault:G},o=new a(x),y="",W="";for(A&&e.matrix&&(e.normalMatrix=p.createNormalMatrix(e.matrix));null!=(q=o.stepNext());)if(q=q.trim(),0!==q.length&&"#"!==q.charAt(0))if(q.indexOf("\\")!==q.length-1){if(y&&(q=y+q,y=""),q.indexOf("#QNAN0")>=0&&(q=q.replace(/#QNAN0/gi,"0")),D=F.exec(q))r.push([parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3])]);else if(D=H.exec(q))T.push([parseFloat(D[1]),parseFloat(D[2])]);else if(A&&(D=f.exec(q)))e.flipFace?A.push([parseFloat(-D[1]),parseFloat(-D[2]),parseFloat(-D[3])]):A.push([parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3])]);else if("f"===q[0]){var V=q.split(/\s+/);if(V.length<4)continue;var h,Q,g,d=[],w=[],s=[];for(Q=1,g=V.length;g>Q;Q++)h=V[Q].split("/"),d.push(parseInt(h[0],10)),h.length>1&&h[1].length>0&&s.push(parseInt(h[1],10)),h.length>2&&h[2].length>0&&w.push(parseInt(h[2],10));for(Q=0,g=d.length-2;g>Q;Q++)N(G,r,T,A,e,[d[0],d[Q+1],d[Q+2]],s.length?[s[0],s[Q+1],s[Q+2]]:Y,w.length?[w[0],w[Q+1],w[Q+2]]:Y);u&&t(G,r,e,d)}else if(e.part&&null!==(D=J.exec(q)))W=(" "+D[0].substr(1).trim()).substr(1);else if(/^usemtl /.test(q)){var C=q.substring(7).trim();C.split(" ").forEach(function(l){var j=e.part?W+"_"+l:l;(G=c[j])||(G=c[j]={name:j,vs:[],uv:[],ns:A?[]:Y,lvs:u?[]:Y},e.ignoreMtls&&e.ignoreMtls.indexOf(l)>=0&&delete G.vs,(e.reverseFlip||"*"===S||S&&S.indexOf(l)>=0)&&(G.reverseFlip=!0),Z(P,G,e,l))})}}else y+=q.substring(0,q.length-1);var n=[];for(var O in c){var B=c[O].vs;if(B&&0!==B.length){var R=c[O].uv;if(R)for(var m=2*B.length/3-R.length;m-->0;)R.push(0)}else n.push(O)}n.forEach(function(P){delete c[P]}),l(c,e.cube,e.center,e);var $=e.shape3d;if($){var U=[];for(var k in c){var G=c[k];U.rawS3=G.rawS3,G.center&&(U.center=G.center),U.push(G)}I.setShape3dModel($,U)}return c}}(),M=function(N){var f={};if(N)for(var j,H,p,h,M,d,n=new a(N),X=/\s+/;null!=(H=n.stepNext());)H=H.trim(),0!==H.length&&"#"!==H.charAt(0)&&(p=H.indexOf(" "),h=(p?H.substring(0,p):H).toLowerCase(),M=(p?H.substring(p+1):"").trim(),"newmtl"===h?f[M]=j={name:M}:j&&("ka"===h||"kd"===h||"ks"===h?(d=M.split(X,3),j[h]=[parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]),1]):j[h]="ns"===h||"d"===h?parseFloat(M):M));return f},a=function(M){var G=this;if(M instanceof ArrayBuffer){G.isBuffer=!0;var j=0,H=new Uint8Array(M),J=H.length,w=H.length;G.stepNext=function(){for(var $,b,p=j;J>j;)if($=H[j],b=$>>4,12===b||13==b)j+=2;else if(14===b)j+=3;else if(j++,10===$)return String.fromCharCode.apply(null,H.subarray(p,j));return j>p?String.fromCharCode.apply(null,H.subarray(p,j)):null}}else{G.isBuffer=!1;var N=M.split("\n"),y=0,w=N.length;G.stepNext=function(){return w>y?N[y++]:null}}};a.prototype={},a.prototype.constructor=a,p.addMethod(I,{loadObj:function(Q,i,K){K=K||{};var z=!1;/(MSIE |Trident\/|Edge\/)/.test(y.navigator.userAgent)&&(z=!0);var q=function(M){var J,E=K.finishFunc,v=K.shape3d,Z=M?F(M[0],M[1],K):null;if(Z){if(v)J=I.getShape3dModel(v);else{J=[];for(var X in Z){var d=Z[X];J.rawS3=d.rawS3,J.push(d)}}E&&E(Z,J,J.rawS3)}else E&&E(null)};if(z){K.responseType="arraybuffer";var x=function(_){I.xhrLoad(Q,function(r){q([r,_])},K)};i?I.xhrLoad(i,function(Z){x(Z)},K):x()}else I.xhrLoad(i?[Q,i]:[Q],q,K)},parseObj:function(I,d,X){return F(I,d,X)}});var r=i.ByteBuffer=function(w,H,E){if("undefined"==typeof w&&(w=r.DEFAULT_CAPACITY),"undefined"==typeof H&&(H=r.DEFAULT_ENDIAN),"undefined"==typeof E&&(E=r.DEFAULT_NOASSERT),!E){if(w=0|w,0>w)throw RangeError("Illegal capacity");H=!!H,E=!!E}this.buffer=0===w?l:new ArrayBuffer(w),this.view=0===w?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=w,this.littleEndian=H,this.noAssert=E,this.bufferId=0},l=new ArrayBuffer(0);e.defineProperties(r.prototype,{offset:{get:function(){return this._offset},set:function(c){this._offset=c,c&&c>=this.limit&&this.trySwitchNextBuffer()}}}),r.LITTLE_ENDIAN=!0,r.BIG_ENDIAN=!1,r.DEFAULT_CAPACITY=16,r.DEFAULT_ENDIAN=r.BIG_ENDIAN,r.DEFAULT_NOASSERT=!1,r.METRICS_BYTES="b";var u=String.fromCharCode,o=r.prototype;o.trySwitchNextBuffer=function(){var R=this.buffers[++this.bufferId];R&&(this.buffer=R,this.limit=R.byteLength,this.offset=0,this.view=R.byteLength>0?new Uint8Array(R):null)},o.readUint8=function(M){var L="undefined"==typeof M;if(L&&(M=this.offset),!this.noAssert){if("number"!=typeof M||0!==M%1)throw TypeError("Illegal offset: "+M+" (not an integer)");if(M>>>=0,0>M||M+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+M+" (+"+1+") <= "+this.buffer.byteLength)}var J=this.view[M];return L&&(this.offset+=1),J},o.readUint16=function(O){var h="undefined"==typeof O;if(h&&(O=this.offset),!this.noAssert){if("number"!=typeof O||0!==O%1)throw TypeError("Illegal offset: "+O+" (not an integer)");if(O>>>=0,0>O||O+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+O+" (+"+2+") <= "+this.buffer.byteLength)}var l=0;return this.littleEndian?(l=this.view[O],l|=this.view[O+1]<<8):(l=this.view[O]<<8,l|=this.view[O+1]),h&&(this.offset+=2),l},o.readUint24=function(u){var b="undefined"==typeof u;if(b&&(u=this.offset),!this.noAssert){if("number"!=typeof u||0!==u%1)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,0>u||u+3>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+"+4+") <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[u+2]<<16,n|=this.view[u+1]<<8,n|=this.view[u]):(n=this.view[u+1]<<8,n|=this.view[u+2],n+=this.view[u]<<16>>>0),n|=0,b&&(this.offset+=3),n},o.readUint32=function(K){var v="undefined"==typeof K;if(v&&(K=this.offset),!this.noAssert){if("number"!=typeof K||0!==K%1)throw TypeError("Illegal offset: "+K+" (not an integer)");if(K>>>=0,0>K||K+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+K+" (+"+4+") <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[K+2]<<16,n|=this.view[K+1]<<8,n|=this.view[K],n+=this.view[K+3]<<24>>>0):(n=this.view[K+1]<<16,n|=this.view[K+2]<<8,n|=this.view[K+3],n+=this.view[K]<<24>>>0),v&&(this.offset+=4),n},o.readFloat32=function(M){var v="undefined"==typeof M;if(v&&(M=this.offset),!this.noAssert){if("number"!=typeof M||0!==M%1)throw TypeError("Illegal offset: "+M+" (not an integer)");if(M>>>=0,0>M||M+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+M+" (+"+4+") <= "+this.buffer.byteLength)}var n=S(this.view,M,this.littleEndian,23,4);return v&&(this.offset+=4),n};var N=function(){var G={};return G.MAX_CODEPOINT=1114111,G.decodeUTF8=function(Y,G){for(var $,Q,r,l,m=function($){$=$.slice(0,$.indexOf(null));var g=Error($.toString());throw g.name="TruncatedError",g.bytes=$,g};null!==($=Y());)if(0===(128&$))G($);else if(192===(224&$))null===(Q=Y())&&m([$,Q]),G((31&$)<<6|63&Q);else if(224===(240&$))(null===(Q=Y())||null===(r=Y()))&&m([$,Q,r]),G((15&$)<<12|(63&Q)<<6|63&r);else{if(240!==(248&$))throw RangeError("Illegal starting byte: "+$);(null===(Q=Y())||null===(r=Y())||null===(l=Y()))&&m([$,Q,r,l]),G((7&$)<<18|(63&Q)<<12|(63&r)<<6|63&l)}},G.UTF16toUTF8=function(j,E){for(var f,Q=null;;){if(null===(f=null!==Q?Q:j()))break;f>=55296&&57343>=f&&null!==(Q=j())&&Q>=56320&&57343>=Q?(E(1024*(f-55296)+Q-56320+65536),Q=null):E(f)}null!==Q&&E(Q)},G.UTF8toUTF16=function(O,y){var A=null;for("number"==typeof O&&(A=O,O=function(){return null});null!==A||null!==(A=O());)65535>=A?y(A):(A-=65536,y((A>>10)+55296),y(A%1024+56320)),A=null},G.decodeUTF8toUTF16=function(c,q){G.decodeUTF8(c,function(D){G.UTF8toUTF16(D,q)})},G.calculateCodePoint=function(W){return 128>W?1:2048>W?2:65536>W?3:4},G.calculateUTF8=function(U){for(var w,v=0;null!==(w=U());)v+=128>w?1:2048>w?2:65536>w?3:4;return v},G.calculateUTF16asUTF8=function(g){var w=0,d=0;return G.UTF16toUTF8(g,function(H){++w,d+=128>H?1:2048>H?2:65536>H?3:4}),[w,d]},G}();o.readString=function(u,z,s){"number"==typeof z&&(s=z,z=P);var I="undefined"==typeof s;if(I&&(s=this.offset),"undefined"==typeof z&&(z=r.METRICS_CHARS),!this.noAssert){if("number"!=typeof u||0!==u%1)throw TypeError("Illegal length: "+u+" (not an integer)");if(u|=0,"number"!=typeof s||0!==s%1)throw TypeError("Illegal offset: "+s+" (not an integer)");if(s>>>=0,0>s||s+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+s+" (+"+0+") <= "+this.buffer.byteLength)}var i,f=0,l=s;if(z===r.METRICS_CHARS){if(i=w(),N.decodeUTF8(function(){return u>f&&s<this.limit?this.view[s++]:null}.bind(this),function(d){++f,N.UTF8toUTF16(d,i)}),f!==u)throw RangeError("Illegal range: Truncated data, "+f+" == "+u);return I?(this.offset=s,i()):{string:i(),length:s-l}}if(z===r.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof s||0!==s%1)throw TypeError("Illegal offset: "+s+" (not an integer)");if(s>>>=0,0>s||s+u>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+s+" (+"+u+") <= "+this.buffer.byteLength)}var H=s+u;if(N.decodeUTF8toUTF16(function(){return H>s?this.view[s++]:null}.bind(this),i=w(),this.noAssert),s!==H)throw RangeError("Illegal range: Truncated data, "+s+" == "+H);return I?(this.offset=s,i()):{string:i(),length:s-l}}throw TypeError("Unsupported metrics: "+z)};var t=function(K){if(K.length){for(var U=0;U<K.length;U++)if(!K[U])return;var W=K[0],n=new r(0);n.buffer=W,n.limit=W.byteLength,n.view=W.byteLength>0?new Uint8Array(W):null,n.buffers=K;var H=[],i=n.readUint8(10);return T(H,n),X(H,n),G(H,n,i),H}},T=function(J,b){b.offset+=19},X=function(w,b){var q=b.readUint8();1&q&&(w.center=d(b)),2&q&&(w.rawS3=d(b))},m=function(H){return[H.readFloat32(),H.readFloat32()]},d=function(d){return[d.readFloat32(),d.readFloat32(),d.readFloat32()]},U=function(T){var v=T.readUint32();return T.readString(v,r.METRICS_BYTES)},G=function(G,s,g){for(var o=((g||0)<<8)+s.readUint8(),Z=0;o>Z;Z++)G.push(f(s))},f=function(w){var I={},n=w.readUint32(),q=0,r=n&1<<q++,F=n&1<<q++,T=n&1<<q++,Z=n&1<<q++,l=n&1<<q++,D=n&1<<q++,x=n&1<<q++,H=n&1<<q++,B=n&1<<q++,s=n&1<<q++,A=n&1<<q++,f=n&1<<q++;return(r||F)&&h(I,w,3,"vs","lvs"),T&&h(I,w,2,"uv"),Z&&h(I,w,3,"ns"),l&&(I.name=U(w)),D&&(I.color=d(w)),x&&(I.transparent=!!w.readUint8()),H&&(I.opacity=w.readFloat32()),B&&(I.uvoffset=m(w)),s&&(I.uvScale=d(w)),A&&(I.image=U(w)),f&&(I.reverseFlip=!!w.readUint8()),I},R=16383,E=function(g){var t=g.readUint16(),H=16384&t,u=32768&t,c=(t&R)/R,W=0;return u&&(W=g.readUint16()),(H?1:-1)*(W+c)},K=function(V){var u=V.readUint32(),H=u&1<<30,Z=u&1<<29,N=u&1<<28,n=16383,t=(16383&u>>14)/n,L=(16383&u)/n,k=Math.sqrt(1-t*t-L*L)||0;return[t*(H?1:-1),L*(Z?1:-1),k*(N?1:-1)]},h=function(C,r,s,k,q){var Y=r.readUint32();r.readUint8();var W,R,m,o=r.readUint32(),n=r.readUint32(),j=[];if("uv"===k)for(W=0;Y>W;W++)R=E(r),m=E(r),j.push([R,m]);else if("ns"===k)for(W=0;Y>W;W++)j.push(K(r));else for(var W=0;Y>W;W++)j.push(d(r));var $;$=256>Y?"readUint8":65536>Y?"readUint16":16777216>Y?"readUint24":"readUint32";var L,f,g;if(o)for(L=C[k]=[],W=0;o>W;W++)f=r[$](),g=j[f],"uv"===k?L.push(g[0],g[1]):L.push(g[0],g[1],g[2]);if(n)for(L=C[q]=[],W=0;n>W;W++)f=r[$](),g=j[f],L.push(g[0],g[1],g[2])};I.getInternal().addMethod(I,{loadBin:function(g,W){W=W||{};var h=function(N){var z,G=W.finishFunc,r=W.shape3d,Q=t(N);if(Q){if(r)z=I.getShape3dModel(r);else{z=[];for(var u in Q){var T=Q[u];z.rawS3=T.rawS3,z.push(T)}}G&&G(Q,z,z.rawS3)}else G&&G(null)},J=function(Q){var k=W.finishFunc;if(!Q)return k&&k(null),void 0;if(Q.byteLength<50){var N=new Uint8Array(Q),K=N[9];if(K>1){for(var x=[],B=g.substr(0,g.length-4),z=1;K>z;z++)x.push(B+z+".bin");return I.xhrLoad(x,function(y){y.splice(0,0,Q),h(y)},W),void 0}}h([Q])};W.responseType="arraybuffer",I.xhrLoad(g,function(t){J(t)},W)},parseBin:function(k){return t([k])}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);