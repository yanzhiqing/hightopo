!function(W,P,g){"use strict";function S(){var U=[],R=[];return function(){return 0===arguments.length?R.join("")+D.apply(String,U):(U.length+arguments.length>1024&&(R.push(D.apply(String,U)),U.length=0),Array.prototype.push.apply(U,arguments),void 0)}}function i(H,R,O,E,v){var I,J,Y=8*v-E-1,o=(1<<Y)-1,h=o>>1,K=-7,G=O?v-1:0,$=O?-1:1,U=H[R+G];for(G+=$,I=U&(1<<-K)-1,U>>=-K,K+=Y;K>0;I=256*I+H[R+G],G+=$,K-=8);for(J=I&(1<<-K)-1,I>>=-K,K+=E;K>0;J=256*J+H[R+G],G+=$,K-=8);if(0===I)I=1-h;else{if(I===o)return J?0/0:1/0*(U?-1:1);J+=Math.pow(2,E),I-=h}return(U?-1:1)*J*Math.pow(2,I-E)}var Q="ht",G=W[Q],u=null,n=Math,O=n.abs,N=n.max,b=Number.MAX_VALUE,d=G.Default,t=d.getInternal(),h=d.clone,z=t.vec3TransformMat4,x=[0,0],j=t.appendArray,q=function(){function K(K,y,P,I){if(K){var d=K[I];if(d){P.ignoreColor||(y.color=d.kd),!P.ignoreTransparent&&d.d>0&&d.d<1&&(y.transparent=!0,y.opacity=d.d);var c;if(!P.ignoreImage&&(c=d.map_kd)){c=c.split(" ");for(var e=-1,l=0;l<c.length;l++)"-o"===c[l]?(y.uvOffset=[parseFloat(c[l+1]),parseFloat(c[l+2])],l+=3,e=l):"-s"===c[l]&&(y.uvScale=[parseFloat(c[l+1]),parseFloat(c[l+2])],l+=3,e=l);y.image=(P.prefix||"")+c.splice(e+1).join(" ")}}}}var D=/v( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,f=/vt( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,a=/vn( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,I=/^[og]\s*(.+)?/,q=function(h,v){return v=parseInt(v),v>=0?h[v-1]:h[v+h.length]},V=function(Q,N,n,F,R){if(Q.lvs){var y=q(N,F),E=q(N,R),e=n.matrix,f=Q.lvs;e?(j(f,z(h(y),e)),j(f,z(h(E),e))):(j(f,y),j(f,E))}},W=function(r,$,d,u,T,E){if(r.vs){var i=q($,u),m=q($,T),f=q($,E),b=d.matrix,K=r.vs;if(d.flipFace){var l=m;m=f,f=l}b?(j(K,z(h(i),b)),j(K,z(h(m),b)),j(K,z(h(f),b))):(j(K,i),j(K,m),j(K,f))}},T=function(j,F,Z,y,I,f){if(j.vs){var L=Z.flipY,b=y===g?x:q(F,y),r=I===g?x:q(F,I),V=f===g?x:q(F,f);if(Z.flipFace){var S=r;r=V,V=S}j.uv.push(b[0],L?1-b[1]:b[1],r[0],L?1-r[1]:r[1],V[0],L?1-V[1]:V[1])}},w=function(K,C,O,W,i,m){if(K.vs){var n=q(C,W),M=q(C,i),r=q(C,m),$=O.normalMatrix,t=K.ns;if(O.flipFace){var B=M;M=r,r=B}$?(j(t,z(h(n),$)),j(t,z(h(M),$)),j(t,z(h(r),$))):(j(t,n),j(t,M),j(t,r))}},i=function(i,j,J,$){for(var A=$.length-1,y=0;A>y;++y)V(i,j,J,$[y],$[y+1]);V(i,j,J,$[A],$[0])},v=function(c,m,P,f,t,J,p,N){var A=f&&f.length&&N;J[3]===g?(W(c,m,t,J[0],J[1],J[2]),p?T(c,P,t,p[0],p[1],p[2]):c.uv&&c.uv.length&&T(c,P,t),A&&w(c,f,t,N[0],N[1],N[2])):(W(c,m,t,J[0],J[1],J[3]),W(c,m,t,J[1],J[2],J[3]),p?(T(c,P,t,p[0],p[1],p[3]),T(c,P,t,p[1],p[2],p[3])):c.uv&&c.uv.length&&(T(c,P,t),T(c,P,t)),A&&(w(c,f,t,N[0],N[1],N[3]),w(c,f,t,N[1],N[2],N[3])))},E=function(E,w,u,M){var $,x,F,k,Y,L,n,l,V=b,i=b,A=b,g=-b,C=-b,a=-b;for($ in E)for(L=E[$].vs,l=L.length,x=0;l>x;x+=3)F=L[x+0],k=L[x+1],Y=L[x+2],V>F&&(V=F),i>k&&(i=k),A>Y&&(A=Y),F>g&&(g=F),k>C&&(C=k),Y>a&&(a=Y);var f;if(u){var T=V+(g-V)/2,_=i+(C-i)/2,q=A+(a-A)/2;for($ in E){for(L=E[$].vs,l=L.length,x=0;l>x;x+=3)L[x+0]-=T,L[x+1]-=_,L[x+2]-=q;if(n=E[$].lvs)for(l=n.length,x=0;l>x;x+=3)n[x+0]-=T,n[x+1]-=_,n[x+2]-=q}f=[T,_,q]}var J,m,y;u?(J=g-V,m=C-i,y=a-A):(J=2*N(O(V),O(g)),m=2*N(O(i),O(C)),y=2*N(O(A),O(a))),0===J&&(J=Math.min(m,y)/1e3||.001),0===m&&(m=Math.min(J,y)/1e3||.001),0===y&&(y=Math.min(J,m)/1e3||.001),M.rawS3=[J,m,y];for($ in E){if(L=E[$].vs,n=E[$].lvs,w){for(l=L.length,x=0;l>x;x+=3)J&&(L[x+0]/=J),m&&(L[x+1]/=m),y&&(L[x+2]/=y);if(n)for(l=n.length,x=0;l>x;x+=3)J&&(n[x+0]/=J),m&&(n[x+1]/=m),y&&(n[x+2]/=y);var t=E[$].ns;if(t){l=t.length;var e=new G.Math.Vector3;for(x=0;l>x;x+=3)e.set(t[x+0]*J,t[x+1]*m,t[x+2]*y).normalize(),t[x+0]=e.x,t[x+1]=e.y,t[x+2]=e.z}}E[$].rawS3=M.rawS3,f&&(E[$].center=f)}};return function(o,P,U){if(!o)return u;(t.isString(P)||P instanceof ArrayBuffer)&&(P=A(P)),U||(U={}),U.flipY==u&&(U.flipY=!0),(U.s3||U.r3||U.t3||U.mat)&&(U.matrix=t.createWorldMatrix(U.mat,U.s3,U.r3,U.rotationMode,U.t3));var S,m,x,C,V=G.Style["wf.loadQuadWireframe"],z=[],$=[],p=U.ignoreNormal?u:[],c=U.reverseFlipMtls,Q={vs:[],uv:[],ns:p?[]:u},n={htdefault:Q},T=new e(o),H="",J="";for(p&&U.matrix&&(U.normalMatrix=t.createNormalMatrix(U.matrix));null!=(m=T.stepNext());)if(m=m.trim(),0!==m.length&&"#"!==m.charAt(0))if(m.indexOf("\\")!==m.length-1){if(H&&(m=H+m,H=""),m.indexOf("#QNAN0")>=0&&(m=m.replace(/#QNAN0/gi,"0")),x=D.exec(m))z.push([parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])]);else if(x=f.exec(m))$.push([parseFloat(x[1]),parseFloat(x[2])]);else if(p&&(x=a.exec(m)))U.flipFace?p.push([parseFloat(-x[1]),parseFloat(-x[2]),parseFloat(-x[3])]):p.push([parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])]);else if("f"===m[0]){var g=m.split(/\s+/);if(g.length<4)continue;var Z,S,s,r=[],j=[],h=[];for(S=1,s=g.length;s>S;S++)Z=g[S].split("/"),r.push(parseInt(Z[0],10)),Z.length>1&&Z[1].length>0&&h.push(parseInt(Z[1],10)),Z.length>2&&Z[2].length>0&&j.push(parseInt(Z[2],10));for(S=0,s=r.length-2;s>S;S++)v(Q,z,$,p,U,[r[0],r[S+1],r[S+2]],h.length?[h[0],h[S+1],h[S+2]]:u,j.length?[j[0],j[S+1],j[S+2]]:u);V&&i(Q,z,U,r)}else if(U.part&&null!==(x=I.exec(m)))J=(" "+x[0].substr(1).trim()).substr(1);else if(/^usemtl /.test(m)){var X=m.substring(7).trim();X.split(" ").forEach(function(l){var G=U.part?J+"_"+l:l;(Q=n[G])||(Q=n[G]={name:G,vs:[],uv:[],ns:p?[]:u,lvs:V?[]:u},U.ignoreMtls&&U.ignoreMtls.indexOf(l)>=0&&delete Q.vs,(U.reverseFlip||"*"===c||c&&c.indexOf(l)>=0)&&(Q.reverseFlip=!0),K(P,Q,U,l))})}}else H+=m.substring(0,m.length-1);var R=[];for(var M in n){var N=n[M].vs;if(N&&0!==N.length){var W=n[M].uv;if(W)for(var k=2*N.length/3-W.length;k-->0;)W.push(0)}else R.push(M)}R.forEach(function(i){delete n[i]}),E(n,U.cube,U.center,U);var l=U.shape3d;if(l){var _=[];for(var C in n){var Q=n[C];_.rawS3=Q.rawS3,Q.center&&(_.center=Q.center),_.push(Q)}d.setShape3dModel(l,_)}return n}}(),A=function(f){var V={};if(f)for(var k,B,b,x,R,p,c=new e(f),Y=/\s+/;null!=(B=c.stepNext());)B=B.trim(),0!==B.length&&"#"!==B.charAt(0)&&(b=B.indexOf(" "),x=(b?B.substring(0,b):B).toLowerCase(),R=(b?B.substring(b+1):"").trim(),"newmtl"===x?V[R]=k={name:R}:k&&("ka"===x||"kd"===x||"ks"===x?(p=R.split(Y,3),k[x]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2]),1]):k[x]="ns"===x||"d"===x?parseFloat(R):R));return V},e=function(_){var x=this;if(_ instanceof ArrayBuffer){x.isBuffer=!0;var R=0,i=new Uint8Array(_),n=i.length,N=i.length;x.stepNext=function(){for(var K,O,C=R;n>R;)if(K=i[R],O=K>>4,12===O||13==O)R+=2;else if(14===O)R+=3;else if(R++,10===K)return String.fromCharCode.apply(null,i.subarray(C,R));return R>C?String.fromCharCode.apply(null,i.subarray(C,R)):null}}else{x.isBuffer=!1;var l=_.split("\n"),B=0,N=l.length;x.stepNext=function(){return N>B?l[B++]:null}}};e.prototype={},e.prototype.constructor=e,t.addMethod(d,{loadObj:function(B,I,_){_=_||{};var l=!1;/(MSIE |Trident\/|Edge\/)/.test(W.navigator.userAgent)&&(l=!0);var N=function(k){var $,E=_.finishFunc,X=_.shape3d,L=k?q(k[0],k[1],_):null;if(L){if(X)$=d.getShape3dModel(X);else{$=[];for(var B in L){var Z=L[B];$.rawS3=Z.rawS3,$.push(Z)}}E&&E(L,$,$.rawS3)}else E&&E(null)};if(l){_.responseType="arraybuffer";var Y=function(A){d.xhrLoad(B,function(i){N([i,A])},_)};I?d.xhrLoad(I,function(S){Y(S)},_):Y()}else d.xhrLoad(I?[B,I]:[B],N,_)},parseObj:function(b,m,F){return q(b,m,F)}});var c=G.ByteBuffer=function(K,u,W){if("undefined"==typeof K&&(K=c.DEFAULT_CAPACITY),"undefined"==typeof u&&(u=c.DEFAULT_ENDIAN),"undefined"==typeof W&&(W=c.DEFAULT_NOASSERT),!W){if(K=0|K,0>K)throw RangeError("Illegal capacity");u=!!u,W=!!W}this.buffer=0===K?y:new ArrayBuffer(K),this.view=0===K?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=K,this.littleEndian=u,this.noAssert=W,this.bufferId=0},y=new ArrayBuffer(0);P.defineProperties(c.prototype,{offset:{get:function(){return this._offset},set:function(D){this._offset=D,D&&D>=this.limit&&this.trySwitchNextBuffer()}}}),c.LITTLE_ENDIAN=!0,c.BIG_ENDIAN=!1,c.DEFAULT_CAPACITY=16,c.DEFAULT_ENDIAN=c.BIG_ENDIAN,c.DEFAULT_NOASSERT=!1,c.METRICS_BYTES="b";var D=String.fromCharCode,X=c.prototype;X.trySwitchNextBuffer=function(){var R=this.buffers[++this.bufferId];R&&(this.buffer=R,this.limit=R.byteLength,this.offset=0,this.view=R.byteLength>0?new Uint8Array(R):null)},X.readUint8=function(p){var D="undefined"==typeof p;if(D&&(p=this.offset),!this.noAssert){if("number"!=typeof p||0!==p%1)throw TypeError("Illegal offset: "+p+" (not an integer)");if(p>>>=0,0>p||p+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+p+" (+"+1+") <= "+this.buffer.byteLength)}var n=this.view[p];return D&&(this.offset+=1),n},X.readUint16=function(q){var X="undefined"==typeof q;if(X&&(q=this.offset),!this.noAssert){if("number"!=typeof q||0!==q%1)throw TypeError("Illegal offset: "+q+" (not an integer)");if(q>>>=0,0>q||q+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+q+" (+"+2+") <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[q],i|=this.view[q+1]<<8):(i=this.view[q]<<8,i|=this.view[q+1]),X&&(this.offset+=2),i},X.readUint24=function(b){var Z="undefined"==typeof b;if(Z&&(b=this.offset),!this.noAssert){if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+3>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+"+4+") <= "+this.buffer.byteLength)}var L=0;return this.littleEndian?(L=this.view[b+2]<<16,L|=this.view[b+1]<<8,L|=this.view[b]):(L=this.view[b+1]<<8,L|=this.view[b+2],L+=this.view[b]<<16>>>0),L|=0,Z&&(this.offset+=3),L},X.readUint32=function(X){var C="undefined"==typeof X;if(C&&(X=this.offset),!this.noAssert){if("number"!=typeof X||0!==X%1)throw TypeError("Illegal offset: "+X+" (not an integer)");if(X>>>=0,0>X||X+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+X+" (+"+4+") <= "+this.buffer.byteLength)}var K=0;return this.littleEndian?(K=this.view[X+2]<<16,K|=this.view[X+1]<<8,K|=this.view[X],K+=this.view[X+3]<<24>>>0):(K=this.view[X+1]<<16,K|=this.view[X+2]<<8,K|=this.view[X+3],K+=this.view[X]<<24>>>0),C&&(this.offset+=4),K},X.readFloat32=function(M){var E="undefined"==typeof M;if(E&&(M=this.offset),!this.noAssert){if("number"!=typeof M||0!==M%1)throw TypeError("Illegal offset: "+M+" (not an integer)");if(M>>>=0,0>M||M+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+M+" (+"+4+") <= "+this.buffer.byteLength)}var G=i(this.view,M,this.littleEndian,23,4);return E&&(this.offset+=4),G};var B=function(){var G={};return G.MAX_CODEPOINT=1114111,G.decodeUTF8=function(z,o){for(var P,q,H,U,y=function(p){p=p.slice(0,p.indexOf(null));var j=Error(p.toString());throw j.name="TruncatedError",j.bytes=p,j};null!==(P=z());)if(0===(128&P))o(P);else if(192===(224&P))null===(q=z())&&y([P,q]),o((31&P)<<6|63&q);else if(224===(240&P))(null===(q=z())||null===(H=z()))&&y([P,q,H]),o((15&P)<<12|(63&q)<<6|63&H);else{if(240!==(248&P))throw RangeError("Illegal starting byte: "+P);(null===(q=z())||null===(H=z())||null===(U=z()))&&y([P,q,H,U]),o((7&P)<<18|(63&q)<<12|(63&H)<<6|63&U)}},G.UTF16toUTF8=function(f,N){for(var q,B=null;;){if(null===(q=null!==B?B:f()))break;q>=55296&&57343>=q&&null!==(B=f())&&B>=56320&&57343>=B?(N(1024*(q-55296)+B-56320+65536),B=null):N(q)}null!==B&&N(B)},G.UTF8toUTF16=function(W,Z){var s=null;for("number"==typeof W&&(s=W,W=function(){return null});null!==s||null!==(s=W());)65535>=s?Z(s):(s-=65536,Z((s>>10)+55296),Z(s%1024+56320)),s=null},G.decodeUTF8toUTF16=function(f,H){G.decodeUTF8(f,function(N){G.UTF8toUTF16(N,H)})},G.calculateCodePoint=function(A){return 128>A?1:2048>A?2:65536>A?3:4},G.calculateUTF8=function(c){for(var Z,d=0;null!==(Z=c());)d+=128>Z?1:2048>Z?2:65536>Z?3:4;return d},G.calculateUTF16asUTF8=function(S){var w=0,C=0;return G.UTF16toUTF8(S,function(z){++w,C+=128>z?1:2048>z?2:65536>z?3:4}),[w,C]},G}();X.readString=function(e,d,n){"number"==typeof d&&(n=d,d=g);var w="undefined"==typeof n;if(w&&(n=this.offset),"undefined"==typeof d&&(d=c.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||0!==e%1)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||0!==n%1)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+0+") <= "+this.buffer.byteLength)}var k,I=0,h=n;if(d===c.METRICS_CHARS){if(k=S(),B.decodeUTF8(function(){return e>I&&n<this.limit?this.view[n++]:null}.bind(this),function(A){++I,B.UTF8toUTF16(A,k)}),I!==e)throw RangeError("Illegal range: Truncated data, "+I+" == "+e);return w?(this.offset=n,k()):{string:k(),length:n-h}}if(d===c.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof n||0!==n%1)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+e+") <= "+this.buffer.byteLength)}var U=n+e;if(B.decodeUTF8toUTF16(function(){return U>n?this.view[n++]:null}.bind(this),k=S(),this.noAssert),n!==U)throw RangeError("Illegal range: Truncated data, "+n+" == "+U);return w?(this.offset=n,k()):{string:k(),length:n-h}}throw TypeError("Unsupported metrics: "+d)};var E=function(p){if(p.length){for(var Y=0;Y<p.length;Y++)if(!p[Y])return;var N=p[0],d=new c(0);d.buffer=N,d.limit=N.byteLength,d.view=N.byteLength>0?new Uint8Array(N):null,d.buffers=p;var Z=[],D=d.readUint8(10);return k(Z,d),w(Z,d),$(Z,d,D),Z}},k=function(R,r){r.offset+=19},w=function(R,U){var w=U.readUint8();1&w&&(R.center=l(U)),2&w&&(R.rawS3=l(U))},o=function(M){return[M.readFloat32(),M.readFloat32()]},l=function(U){return[U.readFloat32(),U.readFloat32(),U.readFloat32()]},V=function(n){var q=n.readUint32();return n.readString(q,c.METRICS_BYTES)},$=function(s,N,z){for(var M=((z||0)<<8)+N.readUint8(),t=0;M>t;t++)s.push(L(N))},L=function(h){var n={},E=h.readUint32(),r=0,A=E&1<<r++,u=E&1<<r++,H=E&1<<r++,S=E&1<<r++,e=E&1<<r++,y=E&1<<r++,J=E&1<<r++,q=E&1<<r++,t=E&1<<r++,g=E&1<<r++,N=E&1<<r++,X=E&1<<r++;return(A||u)&&Z(n,h,3,"vs","lvs"),H&&Z(n,h,2,"uv"),S&&Z(n,h,3,"ns"),e&&(n.name=V(h)),y&&(n.color=l(h)),J&&(n.transparent=!!h.readUint8()),q&&(n.opacity=h.readFloat32()),t&&(n.uvoffset=o(h)),g&&(n.uvScale=l(h)),N&&(n.image=V(h)),X&&(n.reverseFlip=!!h.readUint8()),n},F=16383,C=function(K){var b=K.readUint16(),l=16384&b,C=32768&b,J=(b&F)/F,a=0;return C&&(a=K.readUint16()),(l?1:-1)*(a+J)},U=function(j){var d=j.readUint32(),y=d&1<<30,L=d&1<<29,c=d&1<<28,K=16383,W=(16383&d>>14)/K,Y=(16383&d)/K,F=Math.sqrt(1-W*W-Y*Y)||0;return[W*(y?1:-1),Y*(L?1:-1),F*(c?1:-1)]},Z=function(R,r,J,F,p){var Q=r.readUint32();r.readUint8();var B,V,T,a=r.readUint32(),k=r.readUint32(),w=[];if("uv"===F)for(B=0;Q>B;B++)V=C(r),T=C(r),w.push([V,T]);else if("ns"===F)for(B=0;Q>B;B++)w.push(U(r));else for(var B=0;Q>B;B++)w.push(l(r));var x;x=256>Q?"readUint8":65536>Q?"readUint16":16777216>Q?"readUint24":"readUint32";var X,m,q;if(a)for(X=R[F]=[],B=0;a>B;B++)m=r[x](),q=w[m],"uv"===F?X.push(q[0],q[1]):X.push(q[0],q[1],q[2]);if(k)for(X=R[p]=[],B=0;k>B;B++)m=r[x](),q=w[m],X.push(q[0],q[1],q[2])};d.getInternal().addMethod(d,{loadBin:function(Q,q){q=q||{};var H=function(c){var M,R=q.finishFunc,g=q.shape3d,D=E(c);if(D){if(g)M=d.getShape3dModel(g);else{M=[];for(var I in D){var s=D[I];M.rawS3=s.rawS3,M.push(s)}}R&&R(D,M,M.rawS3)}else R&&R(null)},f=function(s){var X=q.finishFunc;if(!s)return X&&X(null),void 0;if(s.byteLength<50){var $=new Uint8Array(s),M=$[9];if(M>1){for(var m=[],F=Q.substr(0,Q.length-4),f=1;M>f;f++)m.push(F+f+".bin");return d.xhrLoad(m,function(R){R.splice(0,0,s),H(R)},q),void 0}}H([s])};q.responseType="arraybuffer",d.xhrLoad(Q,function(B){f(B)},q)},parseBin:function(J){return E([J])}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);