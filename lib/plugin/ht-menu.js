!function(y,Z){"use strict";var K="ht",C=y[K],x="innerHTML",O="className",$=null,u="px",D=C.Default,p=D.getInternal(),q="0",n=function(){return document},o=function(j){return n().createElement(j)},B=function(){return o("canvas")},T=function(A,S,C){A.style.setProperty(S,C,$)},R=function(K,Q,a){D.def(C.widget[K],Q,a)},e=function(Z,q){Z.appendChild(q)},_=function(J,z){J.removeChild(z)},H=D.eventListenerOptionsFalse,M=(D.eventListenerOptionsTrue,function(w,t,k,i){w.addEventListener(t,k,i?H:H)}),Y=function(E,j,t,q){E.removeEventListener(j,t,q?H:H)},L=D.isTouchable;p.addMethod(D,{menuLabelFont:(L?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),C.widget.Menu=function(d){var t=this,Z=t._view=p.createView(null,t),m=t.$1g=new C.widget.ContextMenu,g=o("ul");m._r=!0,m._view[O]+=" ht-widget-dropdownmenu",Z[O]="ht-widget-menu",g[O]="header",T(Z,"margin",q),T(Z,"padding",q),T(Z,"background",D.menuBackground),T(Z,"-webkit-user-select","none"),T(Z,"-moz-user-select","none"),T(Z,"user-select","none"),T(Z,"text-align","left"),T(Z,"border-bottom",D.menuSeparatorWidth+"px solid "+D.menuSeparatorColor),T(Z,"cursor","default"),T(Z,"overflow","auto"),T(Z,"white-space","nowrap"),T(Z,"font",D.menuLabelFont),T(Z,"color",D.menuLabelColor),T(Z,"box-sizing","border-box"),T(Z,"-moz-box-sizing","border-box"),T(g,"list-style","none"),T(g,"margin",q),T(g,"padding",q),T(g,"display","inline-block"),e(Z,g),t.setItems(d),t.$2g=function(m){t.$3g(m)},t.$4g=function(T){t.$5g(T)},t.$6g=function(R){t.$7g(R)},t.$8g=function(O){t.$9g(O)},t.$9b=function(o){t.$10g(o)},t._autoShow=!0,t.setAutoShow(!1),m.afterHide=function(){t.$11g()},m.afterShow=function(){t.$12g()},Y(n(),"keydown",m.$3b),t.$3b=function(v){t.$13g(v)},t.invalidate()},R("Menu",Z,{_items:$,$14g:D.menuHoverBackground,$15g:D.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(d){var j=this;if(j.$21g=d,j.setItems(j._items),"largeicons"===d){for(var h=j._view.querySelectorAll(".header-item"),s=0,I=0;I<h.length;I++){var g=h[I];s=Math.max(s,g.clientWidth)}for(var I=0;I<h.length;I++){var g=h[I];T(g,"min-width",s+u)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(b){this.$22g=b;for(var U=this._view.querySelectorAll(".header-item"),p=0;p<U.length;p++){var r=U[p];T(r,"margin-left",b+u),T(r,"margin-right",b+u)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(C){this.$23g=C;for(var v=this._view.querySelectorAll(".header-item"),J=0;J<v.length;J++){var k=v[J];T(k,"margin-top",C+u),T(k,"margin-bottom",C+u)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(s){this.$24g=s,T(this._view,"text-align",s)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var I=this,c=I._enableGlobalKey;c===!1&&(M(n(),"keydown",I.$3b),I._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,Y(n(),"keydown",this.$3b)},setHoverBackground:function(c){this.$14g=c},setHoverColor:function(a){this.$15g=a},setItems:function(m){var d=this,f=d._view,r=d.$21g;if(d._items=m,f.children[0][x]="",d.$16g={},m&&m.length){for(var j=f.children[0],P=0,t=n().createDocumentFragment();P<m.length;P++){var G=m[P],k=o("li"),g=o("span");if(G.icon){var N=B();N[O]="menu-item-icon","smallicons"===r?(T(N,"height","1.2em"),T(N,"width","1.2em"),T(N,"vertical-align","middle")):(T(N,"height","32px"),T(N,"width","32px"),T(N,"display","block"),T(N,"margin","0 auto")),N.$20g=G.icon,e(k,N)}k[O]="header-item",T(k,"display","inline-block"),T(k,"vertical-align","top"),T(k,"padding","0 1.2em"),T(k,"line-height","1.8em"),"largeicons"===r&&T(k,"text-align","center"),T(k,"background-color","rgba(0,0,0,0)"),k.setAttribute("data-index",P),d.$16g[P]=G.items,g[x]=G.label,"iconsonly"!==r&&e(k,g),e(t,k)}e(j,t)}},showDropdownMenu:function(i){var O=this,j=O.$16g[i],Y=O.$1g,I=O._view.children[0].children[i],U=O.$17g;if(I&&I!==U){U&&O.hideDropdownMenu();var G=I.getBoundingClientRect(),s=D.getWindowInfo();O.$17g=I,Y.setItems(j),Y.show(G.left+s.left,G.top+G.height+s.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(q,E){var K=this,L=K._items;return L&&0!==L.length?K.$1g.getItemByProperty(q,E,L):$},$12g:function(){var p=this,v=p.$17g;v.style.background=p.$14g,v.style.color=p.$15g,p._autoShow||M(n(),L?"touchstart":"mousedown",p.$9b)},$11g:function(){var w=this,j=w.$17g;j&&(j.style.background="",j.style.color="",w.$17g=$),Y(n(),L?"touchstart":"mousedown",w.$9b)},$10g:function(K){var T=this,m=T._view,b=T.$1g,Z=m.children[0];!n().body.contains(m)||Z.contains(K.target)||b._view.contains(K.target)||T.hideDropdownMenu()},$13g:function(u){var Y=this,k=Y.$1g;n().body.contains(Y._view)&&k.$13b.$4b.call(k.$13b,u,Y._items)},setAutoShow:function(m){var o=this,w=o.$1g,z=o._view;o._autoShow!==m&&(o._autoShow?(Y(z,"mouseover",o.$2g),Y(z,"mouseout",o.$4g),Y(w._view,"mouseout",o.$4g),L||(M(z,"mouseover",o.$8g),M(z,"mouseout",o.$8g)),M(z,L?"touchstart":"mousedown",o.$6g)):(Y(z,"mouseover",o.$8g),Y(z,"mouseout",o.$8g),Y(z,L?"touchstart":"mousedown",o.$6g),Y(n(),L?"touchstart":"mousedown",o.$9b),L||(M(z,"mouseover",o.$2g),M(z,"mouseout",o.$4g),M(w._view,"mouseout",o.$4g))),o._autoShow=m)},$3g:function(D){var k=this,j=k._view.children[0],i=D.target;if(j!==i&&j.contains(i)){for(;"header-item"!==i[O];)i=i.parentNode;k.showDropdownMenu(i.getAttribute("data-index"))}},$5g:function(W){var i=this,V=i._view.children[0],y=i.$1g,p=W.target,b=W.relatedTarget;!V.contains(p)&&!y._view.contains(p)||V.contains(b)||y._view.contains(b)||i.hideDropdownMenu()},$7g:function(b){b.preventDefault();var C=this,X=C._view.children[0],$=C.$1g,u=b.target;if(D.isLeftButton(b)&&X!==u&&X.contains(u))if(L){for(;"header-item"!==u[O];)u=u.parentNode;var R=u.getAttribute("data-index"),$=C.$1g,Q=C._view.children[0].children[R],U=C.$17g;$.isShowing()&&C.hideDropdownMenu(),Q!==U&&C.showDropdownMenu(R)}else if($.isShowing())C.hideDropdownMenu();else{for(;"header-item"!==u[O];)u=u.parentNode;C.showDropdownMenu(u.getAttribute("data-index"))}},$9g:function(v){var y=this,F=y._view,n=y.$1g,K=v.target;if(F.contains(K)){for(var D=F.querySelectorAll(".header-item"),t=$,s=0;s<D.length;s++){var o=D[s];o.style.background="",o.style.color="","mouseover"===v.type?o.contains(K)&&(t=o):"mouseout"===v.type&&n.isShowing()&&y.$17g===o&&(t=o)}n.isShowing()&&(t||(t=y.$17g),y.showDropdownMenu(t.getAttribute("data-index"))),t&&(t.style.background=y.$14g,t.style.color=y.$15g)}},getShowingMenuIndex:function(){var j=this.$17g;return j?j.getAttribute("data-index"):-1},addTo:function(M){var B=this,f=B._view;e(M,f),B.invalidate()},dispose:function(){var r=this,X=r._view,l=r.$1g;X&&(r._autoShow?(Y(X,"mouseover",r.$2g),Y(X,"mouseout",r.$4g),Y(l._view,"mouseout",r.$4g)):(Y(X,"mouseover",r.$8g),Y(X,"mouseout",r.$8g),Y(X,L?"touchstart":"mousedown",r.$6g),Y(n(),L?"touchstart":"mousedown",r.$9b)),Y(n(),"keydown",r.$3b),l.dispose(),X.parentNode&&_(X.parentNode,X),r._view=r.$1g=r.$16g=r._items=r.$17g=r.$2g=r.$4g=r.$6g=r.$8g=r.$9b=r.$3b=$)},$19g:function(n,U,A,J){var G=p.initContext(n);p.translateAndScale(G,0,0,1),G.clearRect(0,0,A,J),D.drawStretchImage(G,D.getImage(U),"fill",0,0,A,J),G.restore()},validateImpl:function(){var t,l,b,J=this,Z=J._view,O=Z.querySelectorAll(".menu-item-icon");for(b=0;b<O.length;b++){var V=O[b];t=V.clientWidth,l=V.clientHeight,t&&l&&(p.setCanvas(V,t,l),J.$19g(V,D.getImage(V.$20g),t,l))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);